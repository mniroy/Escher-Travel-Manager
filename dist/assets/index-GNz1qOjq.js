function Tw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Nw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P0={exports:{}},Ua={},A0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),Cw=Symbol.for("react.portal"),Pw=Symbol.for("react.fragment"),Aw=Symbol.for("react.strict_mode"),Rw=Symbol.for("react.profiler"),Ow=Symbol.for("react.provider"),zw=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),Dw=Symbol.for("react.suspense"),Lw=Symbol.for("react.memo"),Mw=Symbol.for("react.lazy"),Qh=Symbol.iterator;function $w(e){return e===null||typeof e!="object"?null:(e=Qh&&e[Qh]||e["@@iterator"],typeof e=="function"?e:null)}var R0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O0=Object.assign,z0={};function Ps(e,t,n){this.props=e,this.context=t,this.refs=z0,this.updater=n||R0}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function I0(){}I0.prototype=Ps.prototype;function sd(e,t,n){this.props=e,this.context=t,this.refs=z0,this.updater=n||R0}var id=sd.prototype=new I0;id.constructor=sd;O0(id,Ps.prototype);id.isPureReactComponent=!0;var Xh=Array.isArray,D0=Object.prototype.hasOwnProperty,od={current:null},L0={key:!0,ref:!0,__self:!0,__source:!0};function M0(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)D0.call(t,r)&&!L0.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ji,type:e,key:i,ref:o,props:s,_owner:od.current}}function Fw(e,t){return{$$typeof:Ji,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ad(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ji}function Uw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zh=/\/+/g;function bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uw(""+e.key):t.toString(36)}function $o(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ji:case Cw:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+bl(o,0):r,Xh(s)?(n="",e!=null&&(n=e.replace(Zh,"$&/")+"/"),$o(s,t,n,"",function(u){return u})):s!=null&&(ad(s)&&(s=Fw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Xh(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+bl(i,a);o+=$o(i,t,n,l,s)}else if(l=$w(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+bl(i,a++),o+=$o(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function lo(e,t,n){if(e==null)return e;var r=[],s=0;return $o(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Bw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},Fo={transition:null},Vw={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Fo,ReactCurrentOwner:od};function $0(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!ad(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Ps;re.Fragment=Pw;re.Profiler=Rw;re.PureComponent=sd;re.StrictMode=Aw;re.Suspense=Dw;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vw;re.act=$0;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=O0({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=od.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)D0.call(t,l)&&!L0.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ji,type:e.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(e){return e={$$typeof:zw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ow,_context:e},e.Consumer=e};re.createElement=M0;re.createFactory=function(e){var t=M0.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Iw,render:e}};re.isValidElement=ad;re.lazy=function(e){return{$$typeof:Mw,_payload:{_status:-1,_result:e},_init:Bw}};re.memo=function(e,t){return{$$typeof:Lw,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Fo.transition;Fo.transition={};try{e()}finally{Fo.transition=t}};re.unstable_act=$0;re.useCallback=function(e,t){return it.current.useCallback(e,t)};re.useContext=function(e){return it.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return it.current.useDeferredValue(e)};re.useEffect=function(e,t){return it.current.useEffect(e,t)};re.useId=function(){return it.current.useId()};re.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return it.current.useMemo(e,t)};re.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)};re.useRef=function(e){return it.current.useRef(e)};re.useState=function(e){return it.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return it.current.useTransition()};re.version="18.3.1";A0.exports=re;var b=A0.exports;const Yi=Nw(b),Ww=Tw({__proto__:null,default:Yi},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw=b,Kw=Symbol.for("react.element"),qw=Symbol.for("react.fragment"),Gw=Object.prototype.hasOwnProperty,Jw=Hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yw={key:!0,ref:!0,__self:!0,__source:!0};function F0(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Gw.call(t,r)&&!Yw.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Kw,type:e,key:i,ref:o,props:s,_owner:Jw.current}}Ua.Fragment=qw;Ua.jsx=F0;Ua.jsxs=F0;P0.exports=Ua;var c=P0.exports,jc={},U0={exports:{}},wt={},B0={exports:{}},V0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,P){var R=D.length;D.push(P);e:for(;0<R;){var A=R-1>>>1,L=D[A];if(0<s(L,P))D[A]=P,D[R]=L,R=A;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var P=D[0],R=D.pop();if(R!==P){D[0]=R;e:for(var A=0,L=D.length,M=L>>>1;A<M;){var ee=2*(A+1)-1,je=D[ee],Rt=ee+1,zr=D[Rt];if(0>s(je,R))Rt<L&&0>s(zr,je)?(D[A]=zr,D[Rt]=R,A=Rt):(D[A]=je,D[ee]=R,A=ee);else if(Rt<L&&0>s(zr,R))D[A]=zr,D[Rt]=R,A=Rt;else break e}}return P}function s(D,P){var R=D.sortIndex-P.sortIndex;return R!==0?R:D.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=D)r(u),P.sortIndex=P.expirationTime,t(l,P);else break;P=n(u)}}function j(D){if(x=!1,v(D),!y)if(n(l)!==null)y=!0,fe(k);else{var P=n(u);P!==null&&ne(j,P.startTime-D)}}function k(D,P){y=!1,x&&(x=!1,m(E),E=-1),p=!0;var R=f;try{for(v(P),h=n(l);h!==null&&(!(h.expirationTime>P)||D&&!C());){var A=h.callback;if(typeof A=="function"){h.callback=null,f=h.priorityLevel;var L=A(h.expirationTime<=P);P=e.unstable_now(),typeof L=="function"?h.callback=L:h===n(l)&&r(l),v(P)}else r(l);h=n(l)}if(h!==null)var M=!0;else{var ee=n(u);ee!==null&&ne(j,ee.startTime-P),M=!1}return M}finally{h=null,f=R,p=!1}}var S=!1,_=null,E=-1,N=5,T=-1;function C(){return!(e.unstable_now()-T<N)}function I(){if(_!==null){var D=e.unstable_now();T=D;var P=!0;try{P=_(!0,D)}finally{P?H():(S=!1,_=null)}}else S=!1}var H;if(typeof g=="function")H=function(){g(I)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,se=Q.port2;Q.port1.onmessage=I,H=function(){se.postMessage(null)}}else H=function(){w(I,0)};function fe(D){_=D,S||(S=!0,H())}function ne(D,P){E=w(function(){D(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,fe(k))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var R=f;f=P;try{return D()}finally{f=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=f;f=D;try{return P()}finally{f=R}},e.unstable_scheduleCallback=function(D,P,R){var A=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?A+R:A):R=A,D){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=R+L,D={id:d++,callback:P,priorityLevel:D,startTime:R,expirationTime:L,sortIndex:-1},R>A?(D.sortIndex=R,t(u,D),n(l)===null&&D===n(u)&&(x?(m(E),E=-1):x=!0,ne(j,R-A))):(D.sortIndex=L,t(l,D),y||p||(y=!0,fe(k))),D},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(D){var P=f;return function(){var R=f;f=P;try{return D.apply(this,arguments)}finally{f=R}}}})(V0);B0.exports=V0;var Qw=B0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw=b,vt=Qw;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W0=new Set,xi={};function Pr(e,t){vs(e,t),vs(e+"Capture",t)}function vs(e,t){for(xi[e]=t,e=0;e<t.length;e++)W0.add(t[e])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=Object.prototype.hasOwnProperty,Zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ef={},tf={};function e1(e){return Ec.call(tf,e)?!0:Ec.call(ef,e)?!1:Zw.test(e)?tf[e]=!0:(ef[e]=!0,!1)}function t1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n1(e,t,n,r){if(t===null||typeof t>"u"||t1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function cd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ld,cd);qe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ld,cd);qe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ld,cd);qe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function ud(e,t,n,r){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n1(t,n,s,r)&&(n=null),r||s===null?e1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Sn=Xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,co=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),Tc=Symbol.for("react.profiler"),H0=Symbol.for("react.provider"),K0=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),Nc=Symbol.for("react.suspense"),Cc=Symbol.for("react.suspense_list"),fd=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),q0=Symbol.for("react.offscreen"),nf=Symbol.iterator;function Ls(e){return e===null||typeof e!="object"?null:(e=nf&&e[nf]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,Sl;function Gs(e){if(Sl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sl=t&&t[1]||""}return`
`+Sl+e}var kl=!1;function _l(e,t){if(!e||kl)return"";kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{kl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Gs(e):""}function r1(e){switch(e.tag){case 5:return Gs(e.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 2:case 15:return e=_l(e.type,!1),e;case 11:return e=_l(e.type.render,!1),e;case 1:return e=_l(e.type,!0),e;default:return""}}function Pc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gr:return"Fragment";case qr:return"Portal";case Tc:return"Profiler";case dd:return"StrictMode";case Nc:return"Suspense";case Cc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K0:return(e.displayName||"Context")+".Consumer";case H0:return(e._context.displayName||"Context")+".Provider";case hd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fd:return t=e.displayName||null,t!==null?t:Pc(e.type)||"Memo";case Cn:t=e._payload,e=e._init;try{return Pc(e(t))}catch{}}return null}function s1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(t);case 8:return t===dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i1(e){var t=G0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uo(e){e._valueTracker||(e._valueTracker=i1(e))}function J0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ac(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y0(e,t){t=t.checked,t!=null&&ud(e,"checked",t,!1)}function Rc(e,t){Y0(e,t);var n=Gn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oc(e,t.type,Gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oc(e,t,n){(t!=="number"||sa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Js=Array.isArray;function ds(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function of(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Js(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gn(n)}}function Q0(e,t){var n=Gn(t.value),r=Gn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function af(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function X0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ic(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?X0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ho,Z0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ho=ho||document.createElement("div"),ho.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ho.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o1=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(e){o1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ni[t]=ni[e]})});function eg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ni.hasOwnProperty(e)&&ni[e]?(""+t).trim():t+"px"}function tg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=eg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var a1=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dc(e,t){if(t){if(a1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Lc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mc=null;function pd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $c=null,hs=null,fs=null;function lf(e){if(e=Zi(e)){if(typeof $c!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Ka(t),$c(e.stateNode,e.type,t))}}function ng(e){hs?fs?fs.push(e):fs=[e]:hs=e}function rg(){if(hs){var e=hs,t=fs;if(fs=hs=null,lf(e),t)for(e=0;e<t.length;e++)lf(t[e])}}function sg(e,t){return e(t)}function ig(){}var jl=!1;function og(e,t,n){if(jl)return e(t,n);jl=!0;try{return sg(e,t,n)}finally{jl=!1,(hs!==null||fs!==null)&&(ig(),rg())}}function bi(e,t){var n=e.stateNode;if(n===null)return null;var r=Ka(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Fc=!1;if(yn)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Fc=!1}function l1(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ri=!1,ia=null,oa=!1,Uc=null,c1={onError:function(e){ri=!0,ia=e}};function u1(e,t,n,r,s,i,o,a,l){ri=!1,ia=null,l1.apply(c1,arguments)}function d1(e,t,n,r,s,i,o,a,l){if(u1.apply(this,arguments),ri){if(ri){var u=ia;ri=!1,ia=null}else throw Error(O(198));oa||(oa=!0,Uc=u)}}function Ar(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ag(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cf(e){if(Ar(e)!==e)throw Error(O(188))}function h1(e){var t=e.alternate;if(!t){if(t=Ar(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cf(s),e;if(i===r)return cf(s),t;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function lg(e){return e=h1(e),e!==null?cg(e):null}function cg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cg(e);if(t!==null)return t;e=e.sibling}return null}var ug=vt.unstable_scheduleCallback,uf=vt.unstable_cancelCallback,f1=vt.unstable_shouldYield,p1=vt.unstable_requestPaint,Te=vt.unstable_now,m1=vt.unstable_getCurrentPriorityLevel,md=vt.unstable_ImmediatePriority,dg=vt.unstable_UserBlockingPriority,aa=vt.unstable_NormalPriority,g1=vt.unstable_LowPriority,hg=vt.unstable_IdlePriority,Ba=null,Zt=null;function y1(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Ba,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:w1,v1=Math.log,x1=Math.LN2;function w1(e){return e>>>=0,e===0?32:31-(v1(e)/x1|0)|0}var fo=64,po=4194304;function Ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function la(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ys(a):(i&=o,i!==0&&(r=Ys(i)))}else o=n&~s,o!==0?r=Ys(o):i!==0&&(r=Ys(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Bt(t),s=1<<n,r|=e[n],t&=~s;return r}function b1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S1(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Bt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=b1(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Bc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fg(){var e=fo;return fo<<=1,!(fo&4194240)&&(fo=64),e}function El(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function k1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function gd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ce=0;function pg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mg,yd,gg,yg,vg,Vc=!1,mo=[],$n=null,Fn=null,Un=null,Si=new Map,ki=new Map,Rn=[],_1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function df(e,t){switch(e){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(t.pointerId)}}function $s(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Zi(t),t!==null&&yd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function j1(e,t,n,r,s){switch(t){case"focusin":return $n=$s($n,e,t,n,r,s),!0;case"dragenter":return Fn=$s(Fn,e,t,n,r,s),!0;case"mouseover":return Un=$s(Un,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Si.set(i,$s(Si.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ki.set(i,$s(ki.get(i)||null,e,t,n,r,s)),!0}return!1}function xg(e){var t=pr(e.target);if(t!==null){var n=Ar(t);if(n!==null){if(t=n.tag,t===13){if(t=ag(n),t!==null){e.blockedOn=t,vg(e.priority,function(){gg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mc=r,n.target.dispatchEvent(r),Mc=null}else return t=Zi(n),t!==null&&yd(t),e.blockedOn=n,!1;t.shift()}return!0}function hf(e,t,n){Uo(e)&&n.delete(t)}function E1(){Vc=!1,$n!==null&&Uo($n)&&($n=null),Fn!==null&&Uo(Fn)&&(Fn=null),Un!==null&&Uo(Un)&&(Un=null),Si.forEach(hf),ki.forEach(hf)}function Fs(e,t){e.blockedOn===t&&(e.blockedOn=null,Vc||(Vc=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,E1)))}function _i(e){function t(s){return Fs(s,e)}if(0<mo.length){Fs(mo[0],e);for(var n=1;n<mo.length;n++){var r=mo[n];r.blockedOn===e&&(r.blockedOn=null)}}for($n!==null&&Fs($n,e),Fn!==null&&Fs(Fn,e),Un!==null&&Fs(Un,e),Si.forEach(t),ki.forEach(t),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)xg(n),n.blockedOn===null&&Rn.shift()}var ps=Sn.ReactCurrentBatchConfig,ca=!0;function T1(e,t,n,r){var s=ce,i=ps.transition;ps.transition=null;try{ce=1,vd(e,t,n,r)}finally{ce=s,ps.transition=i}}function N1(e,t,n,r){var s=ce,i=ps.transition;ps.transition=null;try{ce=4,vd(e,t,n,r)}finally{ce=s,ps.transition=i}}function vd(e,t,n,r){if(ca){var s=Wc(e,t,n,r);if(s===null)Dl(e,t,r,ua,n),df(e,r);else if(j1(s,e,t,n,r))r.stopPropagation();else if(df(e,r),t&4&&-1<_1.indexOf(e)){for(;s!==null;){var i=Zi(s);if(i!==null&&mg(i),i=Wc(e,t,n,r),i===null&&Dl(e,t,r,ua,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dl(e,t,r,null,n)}}var ua=null;function Wc(e,t,n,r){if(ua=null,e=pd(r),e=pr(e),e!==null)if(t=Ar(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ag(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ua=e,null}function wg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m1()){case md:return 1;case dg:return 4;case aa:case g1:return 16;case hg:return 536870912;default:return 16}default:return 16}}var In=null,xd=null,Bo=null;function bg(){if(Bo)return Bo;var e,t=xd,n=t.length,r,s="value"in In?In.value:In.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Bo=s.slice(e,1<r?1-r:void 0)}function Vo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function go(){return!0}function ff(){return!1}function bt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?go:ff,this.isPropagationStopped=ff,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),t}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wd=bt(As),Xi=be({},As,{view:0,detail:0}),C1=bt(Xi),Tl,Nl,Us,Va=be({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Us&&(Us&&e.type==="mousemove"?(Tl=e.screenX-Us.screenX,Nl=e.screenY-Us.screenY):Nl=Tl=0,Us=e),Tl)},movementY:function(e){return"movementY"in e?e.movementY:Nl}}),pf=bt(Va),P1=be({},Va,{dataTransfer:0}),A1=bt(P1),R1=be({},Xi,{relatedTarget:0}),Cl=bt(R1),O1=be({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),z1=bt(O1),I1=be({},As,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),D1=bt(I1),L1=be({},As,{data:0}),mf=bt(L1),M1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F1[e])?!!t[e]:!1}function bd(){return U1}var B1=be({},Xi,{key:function(e){if(e.key){var t=M1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bd,charCode:function(e){return e.type==="keypress"?Vo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),V1=bt(B1),W1=be({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=bt(W1),H1=be({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bd}),K1=bt(H1),q1=be({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),G1=bt(q1),J1=be({},Va,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y1=bt(J1),Q1=[9,13,27,32],Sd=yn&&"CompositionEvent"in window,si=null;yn&&"documentMode"in document&&(si=document.documentMode);var X1=yn&&"TextEvent"in window&&!si,Sg=yn&&(!Sd||si&&8<si&&11>=si),yf=" ",vf=!1;function kg(e,t){switch(e){case"keyup":return Q1.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _g(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jr=!1;function Z1(e,t){switch(e){case"compositionend":return _g(t);case"keypress":return t.which!==32?null:(vf=!0,yf);case"textInput":return e=t.data,e===yf&&vf?null:e;default:return null}}function eb(e,t){if(Jr)return e==="compositionend"||!Sd&&kg(e,t)?(e=bg(),Bo=xd=In=null,Jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sg&&t.locale!=="ko"?null:t.data;default:return null}}var tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tb[e.type]:t==="textarea"}function jg(e,t,n,r){ng(r),t=da(t,"onChange"),0<t.length&&(n=new wd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ii=null,ji=null;function nb(e){Dg(e,0)}function Wa(e){var t=Xr(e);if(J0(t))return e}function rb(e,t){if(e==="change")return t}var Eg=!1;if(yn){var Pl;if(yn){var Al="oninput"in document;if(!Al){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),Al=typeof wf.oninput=="function"}Pl=Al}else Pl=!1;Eg=Pl&&(!document.documentMode||9<document.documentMode)}function bf(){ii&&(ii.detachEvent("onpropertychange",Tg),ji=ii=null)}function Tg(e){if(e.propertyName==="value"&&Wa(ji)){var t=[];jg(t,ji,e,pd(e)),og(nb,t)}}function sb(e,t,n){e==="focusin"?(bf(),ii=t,ji=n,ii.attachEvent("onpropertychange",Tg)):e==="focusout"&&bf()}function ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(ji)}function ob(e,t){if(e==="click")return Wa(t)}function ab(e,t){if(e==="input"||e==="change")return Wa(t)}function lb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:lb;function Ei(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ec.call(t,s)||!Ht(e[s],t[s]))return!1}return!0}function Sf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kf(e,t){var n=Sf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sf(n)}}function Ng(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ng(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cg(){for(var e=window,t=sa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sa(e.document)}return t}function kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cb(e){var t=Cg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ng(n.ownerDocument.documentElement,n)){if(r!==null&&kd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=kf(n,i);var o=kf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ub=yn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Hc=null,oi=null,Kc=!1;function _f(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||Yr==null||Yr!==sa(r)||(r=Yr,"selectionStart"in r&&kd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oi&&Ei(oi,r)||(oi=r,r=da(Hc,"onSelect"),0<r.length&&(t=new wd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yr)))}function yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qr={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},Rl={},Pg={};yn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function Ha(e){if(Rl[e])return Rl[e];if(!Qr[e])return e;var t=Qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pg)return Rl[e]=t[n];return e}var Ag=Ha("animationend"),Rg=Ha("animationiteration"),Og=Ha("animationstart"),zg=Ha("transitionend"),Ig=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(e,t){Ig.set(e,t),Pr(t,[e])}for(var Ol=0;Ol<jf.length;Ol++){var zl=jf[Ol],db=zl.toLowerCase(),hb=zl[0].toUpperCase()+zl.slice(1);Zn(db,"on"+hb)}Zn(Ag,"onAnimationEnd");Zn(Rg,"onAnimationIteration");Zn(Og,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(zg,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function Ef(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,d1(r,t,void 0,e),e.currentTarget=null}function Dg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ef(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ef(s,a,u),i=l}}}if(oa)throw e=Uc,oa=!1,Uc=null,e}function pe(e,t){var n=t[Qc];n===void 0&&(n=t[Qc]=new Set);var r=e+"__bubble";n.has(r)||(Lg(t,e,2,!1),n.add(r))}function Il(e,t,n){var r=0;t&&(r|=4),Lg(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Ti(e){if(!e[vo]){e[vo]=!0,W0.forEach(function(n){n!=="selectionchange"&&(fb.has(n)||Il(n,!1,e),Il(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,Il("selectionchange",!1,t))}}function Lg(e,t,n,r){switch(wg(t)){case 1:var s=T1;break;case 4:s=N1;break;default:s=vd}n=s.bind(null,t,n,e),s=void 0,!Fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Dl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=pr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}og(function(){var u=i,d=pd(n),h=[];e:{var f=Ig.get(e);if(f!==void 0){var p=wd,y=e;switch(e){case"keypress":if(Vo(n)===0)break e;case"keydown":case"keyup":p=V1;break;case"focusin":y="focus",p=Cl;break;case"focusout":y="blur",p=Cl;break;case"beforeblur":case"afterblur":p=Cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=A1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=K1;break;case Ag:case Rg:case Og:p=z1;break;case zg:p=G1;break;case"scroll":p=C1;break;case"wheel":p=Y1;break;case"copy":case"cut":case"paste":p=D1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gf}var x=(t&4)!==0,w=!x&&e==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var g=u,v;g!==null;){v=g;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,m!==null&&(j=bi(g,m),j!=null&&x.push(Ni(g,j,v)))),w)break;g=g.return}0<x.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Mc&&(y=n.relatedTarget||n.fromElement)&&(pr(y)||y[vn]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?pr(y):null,y!==null&&(w=Ar(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(x=pf,j="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=gf,j="onPointerLeave",m="onPointerEnter",g="pointer"),w=p==null?f:Xr(p),v=y==null?f:Xr(y),f=new x(j,g+"leave",p,n,d),f.target=w,f.relatedTarget=v,j=null,pr(d)===u&&(x=new x(m,g+"enter",y,n,d),x.target=v,x.relatedTarget=w,j=x),w=j,p&&y)t:{for(x=p,m=y,g=0,v=x;v;v=Dr(v))g++;for(v=0,j=m;j;j=Dr(j))v++;for(;0<g-v;)x=Dr(x),g--;for(;0<v-g;)m=Dr(m),v--;for(;g--;){if(x===m||m!==null&&x===m.alternate)break t;x=Dr(x),m=Dr(m)}x=null}else x=null;p!==null&&Tf(h,f,p,x,!1),y!==null&&w!==null&&Tf(h,w,y,x,!0)}}e:{if(f=u?Xr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=rb;else if(xf(f))if(Eg)k=ab;else{k=ib;var S=sb}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=ob);if(k&&(k=k(e,u))){jg(h,k,n,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Oc(f,"number",f.value)}switch(S=u?Xr(u):window,e){case"focusin":(xf(S)||S.contentEditable==="true")&&(Yr=S,Hc=u,oi=null);break;case"focusout":oi=Hc=Yr=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,_f(h,n,d);break;case"selectionchange":if(ub)break;case"keydown":case"keyup":_f(h,n,d)}var _;if(Sd)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Jr?kg(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Sg&&n.locale!=="ko"&&(Jr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Jr&&(_=bg()):(In=d,xd="value"in In?In.value:In.textContent,Jr=!0)),S=da(u,E),0<S.length&&(E=new mf(E,e,null,n,d),h.push({event:E,listeners:S}),_?E.data=_:(_=_g(n),_!==null&&(E.data=_)))),(_=X1?Z1(e,n):eb(e,n))&&(u=da(u,"onBeforeInput"),0<u.length&&(d=new mf("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}Dg(h,t)})}function Ni(e,t,n){return{instance:e,listener:t,currentTarget:n}}function da(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bi(e,n),i!=null&&r.unshift(Ni(e,i,s)),i=bi(e,t),i!=null&&r.push(Ni(e,i,s))),e=e.return}return r}function Dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tf(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=bi(n,i),l!=null&&o.unshift(Ni(n,l,a))):s||(l=bi(n,i),l!=null&&o.push(Ni(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function Nf(e){return(typeof e=="string"?e:""+e).replace(pb,`
`).replace(mb,"")}function xo(e,t,n){if(t=Nf(t),Nf(e)!==t&&n)throw Error(O(425))}function ha(){}var qc=null,Gc=null;function Jc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(e){return Cf.resolve(null).then(e).catch(vb)}:Yc;function vb(e){setTimeout(function(){throw e})}function Ll(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),_i(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_i(t)}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Rs,Ci="__reactProps$"+Rs,vn="__reactContainer$"+Rs,Qc="__reactEvents$"+Rs,xb="__reactListeners$"+Rs,wb="__reactHandles$"+Rs;function pr(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pf(e);e!==null;){if(n=e[Qt])return n;e=Pf(e)}return t}e=n,n=e.parentNode}return null}function Zi(e){return e=e[Qt]||e[vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Ka(e){return e[Ci]||null}var Xc=[],Zr=-1;function er(e){return{current:e}}function me(e){0>Zr||(e.current=Xc[Zr],Xc[Zr]=null,Zr--)}function he(e,t){Zr++,Xc[Zr]=e.current,e.current=t}var Jn={},Ze=er(Jn),ct=er(!1),kr=Jn;function xs(e,t){var n=e.type.contextTypes;if(!n)return Jn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ut(e){return e=e.childContextTypes,e!=null}function fa(){me(ct),me(Ze)}function Af(e,t,n){if(Ze.current!==Jn)throw Error(O(168));he(Ze,t),he(ct,n)}function Mg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(O(108,s1(e)||"Unknown",s));return be({},n,r)}function pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jn,kr=Ze.current,he(Ze,e),he(ct,ct.current),!0}function Rf(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=Mg(e,t,kr),r.__reactInternalMemoizedMergedChildContext=e,me(ct),me(Ze),he(Ze,e)):me(ct),he(ct,n)}var dn=null,qa=!1,Ml=!1;function $g(e){dn===null?dn=[e]:dn.push(e)}function bb(e){qa=!0,$g(e)}function tr(){if(!Ml&&dn!==null){Ml=!0;var e=0,t=ce;try{var n=dn;for(ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,qa=!1}catch(s){throw dn!==null&&(dn=dn.slice(e+1)),ug(md,tr),s}finally{ce=t,Ml=!1}}return null}var es=[],ts=0,ma=null,ga=0,jt=[],Et=0,_r=null,hn=1,fn="";function ar(e,t){es[ts++]=ga,es[ts++]=ma,ma=e,ga=t}function Fg(e,t,n){jt[Et++]=hn,jt[Et++]=fn,jt[Et++]=_r,_r=e;var r=hn;e=fn;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,hn=1<<32-Bt(t)+s|n<<s|r,fn=i+e}else hn=1<<i|n<<s|r,fn=e}function _d(e){e.return!==null&&(ar(e,1),Fg(e,1,0))}function jd(e){for(;e===ma;)ma=es[--ts],es[ts]=null,ga=es[--ts],es[ts]=null;for(;e===_r;)_r=jt[--Et],jt[Et]=null,fn=jt[--Et],jt[Et]=null,hn=jt[--Et],jt[Et]=null}var yt=null,gt=null,ge=!1,Ut=null;function Ug(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Of(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,gt=Bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_r!==null?{id:hn,overflow:fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yt=e,gt=null,!0):!1;default:return!1}}function Zc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eu(e){if(ge){var t=gt;if(t){var n=t;if(!Of(e,t)){if(Zc(e))throw Error(O(418));t=Bn(n.nextSibling);var r=yt;t&&Of(e,t)?Ug(r,n):(e.flags=e.flags&-4097|2,ge=!1,yt=e)}}else{if(Zc(e))throw Error(O(418));e.flags=e.flags&-4097|2,ge=!1,yt=e}}}function zf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function wo(e){if(e!==yt)return!1;if(!ge)return zf(e),ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jc(e.type,e.memoizedProps)),t&&(t=gt)){if(Zc(e))throw Bg(),Error(O(418));for(;t;)Ug(e,t),t=Bn(t.nextSibling)}if(zf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gt=Bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=yt?Bn(e.stateNode.nextSibling):null;return!0}function Bg(){for(var e=gt;e;)e=Bn(e.nextSibling)}function ws(){gt=yt=null,ge=!1}function Ed(e){Ut===null?Ut=[e]:Ut.push(e)}var Sb=Sn.ReactCurrentBatchConfig;function Bs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function If(e){var t=e._init;return t(e._payload)}function Vg(e){function t(m,g){if(e){var v=m.deletions;v===null?(m.deletions=[g],m.flags|=16):v.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=Kn(m,g),m.index=0,m.sibling=null,m}function i(m,g,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<g?(m.flags|=2,g):v):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,g,v,j){return g===null||g.tag!==6?(g=Hl(v,m.mode,j),g.return=m,g):(g=s(g,v),g.return=m,g)}function l(m,g,v,j){var k=v.type;return k===Gr?d(m,g,v.props.children,j,v.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cn&&If(k)===g.type)?(j=s(g,v.props),j.ref=Bs(m,g,v),j.return=m,j):(j=Yo(v.type,v.key,v.props,null,m.mode,j),j.ref=Bs(m,g,v),j.return=m,j)}function u(m,g,v,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Kl(v,m.mode,j),g.return=m,g):(g=s(g,v.children||[]),g.return=m,g)}function d(m,g,v,j,k){return g===null||g.tag!==7?(g=wr(v,m.mode,j,k),g.return=m,g):(g=s(g,v),g.return=m,g)}function h(m,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Hl(""+g,m.mode,v),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case co:return v=Yo(g.type,g.key,g.props,null,m.mode,v),v.ref=Bs(m,null,g),v.return=m,v;case qr:return g=Kl(g,m.mode,v),g.return=m,g;case Cn:var j=g._init;return h(m,j(g._payload),v)}if(Js(g)||Ls(g))return g=wr(g,m.mode,v,null),g.return=m,g;bo(m,g)}return null}function f(m,g,v,j){var k=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(m,g,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case co:return v.key===k?l(m,g,v,j):null;case qr:return v.key===k?u(m,g,v,j):null;case Cn:return k=v._init,f(m,g,k(v._payload),j)}if(Js(v)||Ls(v))return k!==null?null:d(m,g,v,j,null);bo(m,v)}return null}function p(m,g,v,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(v)||null,a(g,m,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case co:return m=m.get(j.key===null?v:j.key)||null,l(g,m,j,k);case qr:return m=m.get(j.key===null?v:j.key)||null,u(g,m,j,k);case Cn:var S=j._init;return p(m,g,v,S(j._payload),k)}if(Js(j)||Ls(j))return m=m.get(v)||null,d(g,m,j,k,null);bo(g,j)}return null}function y(m,g,v,j){for(var k=null,S=null,_=g,E=g=0,N=null;_!==null&&E<v.length;E++){_.index>E?(N=_,_=null):N=_.sibling;var T=f(m,_,v[E],j);if(T===null){_===null&&(_=N);break}e&&_&&T.alternate===null&&t(m,_),g=i(T,g,E),S===null?k=T:S.sibling=T,S=T,_=N}if(E===v.length)return n(m,_),ge&&ar(m,E),k;if(_===null){for(;E<v.length;E++)_=h(m,v[E],j),_!==null&&(g=i(_,g,E),S===null?k=_:S.sibling=_,S=_);return ge&&ar(m,E),k}for(_=r(m,_);E<v.length;E++)N=p(_,m,E,v[E],j),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?E:N.key),g=i(N,g,E),S===null?k=N:S.sibling=N,S=N);return e&&_.forEach(function(C){return t(m,C)}),ge&&ar(m,E),k}function x(m,g,v,j){var k=Ls(v);if(typeof k!="function")throw Error(O(150));if(v=k.call(v),v==null)throw Error(O(151));for(var S=k=null,_=g,E=g=0,N=null,T=v.next();_!==null&&!T.done;E++,T=v.next()){_.index>E?(N=_,_=null):N=_.sibling;var C=f(m,_,T.value,j);if(C===null){_===null&&(_=N);break}e&&_&&C.alternate===null&&t(m,_),g=i(C,g,E),S===null?k=C:S.sibling=C,S=C,_=N}if(T.done)return n(m,_),ge&&ar(m,E),k;if(_===null){for(;!T.done;E++,T=v.next())T=h(m,T.value,j),T!==null&&(g=i(T,g,E),S===null?k=T:S.sibling=T,S=T);return ge&&ar(m,E),k}for(_=r(m,_);!T.done;E++,T=v.next())T=p(_,m,E,T.value,j),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?E:T.key),g=i(T,g,E),S===null?k=T:S.sibling=T,S=T);return e&&_.forEach(function(I){return t(m,I)}),ge&&ar(m,E),k}function w(m,g,v,j){if(typeof v=="object"&&v!==null&&v.type===Gr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case co:e:{for(var k=v.key,S=g;S!==null;){if(S.key===k){if(k=v.type,k===Gr){if(S.tag===7){n(m,S.sibling),g=s(S,v.props.children),g.return=m,m=g;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Cn&&If(k)===S.type){n(m,S.sibling),g=s(S,v.props),g.ref=Bs(m,S,v),g.return=m,m=g;break e}n(m,S);break}else t(m,S);S=S.sibling}v.type===Gr?(g=wr(v.props.children,m.mode,j,v.key),g.return=m,m=g):(j=Yo(v.type,v.key,v.props,null,m.mode,j),j.ref=Bs(m,g,v),j.return=m,m=j)}return o(m);case qr:e:{for(S=v.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(m,g.sibling),g=s(g,v.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=Kl(v,m.mode,j),g.return=m,m=g}return o(m);case Cn:return S=v._init,w(m,g,S(v._payload),j)}if(Js(v))return y(m,g,v,j);if(Ls(v))return x(m,g,v,j);bo(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,v),g.return=m,m=g):(n(m,g),g=Hl(v,m.mode,j),g.return=m,m=g),o(m)):n(m,g)}return w}var bs=Vg(!0),Wg=Vg(!1),ya=er(null),va=null,ns=null,Td=null;function Nd(){Td=ns=va=null}function Cd(e){var t=ya.current;me(ya),e._currentValue=t}function tu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ms(e,t){va=e,Td=ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Td!==e)if(e={context:e,memoizedValue:t,next:null},ns===null){if(va===null)throw Error(O(308));ns=e,va.dependencies={lanes:0,firstContext:e}}else ns=ns.next=e;return t}var mr=null;function Pd(e){mr===null?mr=[e]:mr.push(e)}function Hg(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Pd(t)):(n.next=s.next,s.next=n),t.interleaved=n,xn(e,r)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Ad(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,xn(e,n)}return s=r.interleaved,s===null?(t.next=t,Pd(r)):(t.next=s.next,s.next=t),r.interleaved=t,xn(e,n)}function Wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gd(e,n)}}function Df(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xa(e,t,n,r){var s=e.updateQueue;Pn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,x=a;switch(f=t,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=be({},h,f);break e;case 2:Pn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Er|=o,e.lanes=o,e.memoizedState=h}}function Lf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var eo={},en=er(eo),Pi=er(eo),Ai=er(eo);function gr(e){if(e===eo)throw Error(O(174));return e}function Rd(e,t){switch(he(Ai,t),he(Pi,e),he(en,eo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ic(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ic(t,e)}me(en),he(en,t)}function Ss(){me(en),me(Pi),me(Ai)}function qg(e){gr(Ai.current);var t=gr(en.current),n=Ic(t,e.type);t!==n&&(he(Pi,e),he(en,n))}function Od(e){Pi.current===e&&(me(en),me(Pi))}var xe=er(0);function wa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $l=[];function zd(){for(var e=0;e<$l.length;e++)$l[e]._workInProgressVersionPrimary=null;$l.length=0}var Ho=Sn.ReactCurrentDispatcher,Fl=Sn.ReactCurrentBatchConfig,jr=0,we=null,Oe=null,Me=null,ba=!1,ai=!1,Ri=0,kb=0;function Je(){throw Error(O(321))}function Id(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function Dd(e,t,n,r,s,i){if(jr=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ho.current=e===null||e.memoizedState===null?Tb:Nb,e=n(r,s),ai){i=0;do{if(ai=!1,Ri=0,25<=i)throw Error(O(301));i+=1,Me=Oe=null,t.updateQueue=null,Ho.current=Cb,e=n(r,s)}while(ai)}if(Ho.current=Sa,t=Oe!==null&&Oe.next!==null,jr=0,Me=Oe=we=null,ba=!1,t)throw Error(O(300));return e}function Ld(){var e=Ri!==0;return Ri=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?we.memoizedState=Me=e:Me=Me.next=e,Me}function At(){if(Oe===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Me===null?we.memoizedState:Me.next;if(t!==null)Me=t,Oe=e;else{if(e===null)throw Error(O(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Me===null?we.memoizedState=Me=e:Me=Me.next=e}return Me}function Oi(e,t){return typeof t=="function"?t(e):t}function Ul(e){var t=At(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=Oe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((jr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,we.lanes|=d,Er|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Ht(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,we.lanes|=i,Er|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bl(e){var t=At(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ht(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Gg(){}function Jg(e,t){var n=we,r=At(),s=t(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,lt=!0),r=r.queue,Md(Xg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,zi(9,Qg.bind(null,n,r,s,t),void 0,null),$e===null)throw Error(O(349));jr&30||Yg(n,t,s)}return s}function Yg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qg(e,t,n,r){t.value=n,t.getSnapshot=r,Zg(t)&&ey(e)}function Xg(e,t,n){return n(function(){Zg(t)&&ey(e)})}function Zg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function ey(e){var t=xn(e,1);t!==null&&Vt(t,e,1,-1)}function Mf(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:e},t.queue=e,e=e.dispatch=Eb.bind(null,we,e),[t.memoizedState,e]}function zi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ty(){return At().memoizedState}function Ko(e,t,n,r){var s=Yt();we.flags|=e,s.memoizedState=zi(1|t,n,void 0,r===void 0?null:r)}function Ga(e,t,n,r){var s=At();r=r===void 0?null:r;var i=void 0;if(Oe!==null){var o=Oe.memoizedState;if(i=o.destroy,r!==null&&Id(r,o.deps)){s.memoizedState=zi(t,n,i,r);return}}we.flags|=e,s.memoizedState=zi(1|t,n,i,r)}function $f(e,t){return Ko(8390656,8,e,t)}function Md(e,t){return Ga(2048,8,e,t)}function ny(e,t){return Ga(4,2,e,t)}function ry(e,t){return Ga(4,4,e,t)}function sy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iy(e,t,n){return n=n!=null?n.concat([e]):null,Ga(4,4,sy.bind(null,t,e),n)}function $d(){}function oy(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Id(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ay(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Id(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ly(e,t,n){return jr&21?(Ht(n,t)||(n=fg(),we.lanes|=n,Er|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function _b(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var r=Fl.transition;Fl.transition={};try{e(!1),t()}finally{ce=n,Fl.transition=r}}function cy(){return At().memoizedState}function jb(e,t,n){var r=Hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uy(e))dy(t,n);else if(n=Hg(e,t,n,r),n!==null){var s=rt();Vt(n,e,r,s),hy(n,t,r)}}function Eb(e,t,n){var r=Hn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uy(e))dy(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ht(a,o)){var l=t.interleaved;l===null?(s.next=s,Pd(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=Hg(e,t,s,r),n!==null&&(s=rt(),Vt(n,e,r,s),hy(n,t,r))}}function uy(e){var t=e.alternate;return e===we||t!==null&&t===we}function dy(e,t){ai=ba=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gd(e,n)}}var Sa={readContext:Pt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Tb={readContext:Pt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:$f,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ko(4194308,4,sy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=jb.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:Mf,useDebugValue:$d,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=Mf(!1),t=e[0];return e=_b.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,s=Yt();if(ge){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),$e===null)throw Error(O(349));jr&30||Yg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,$f(Xg.bind(null,r,i,e),[e]),r.flags|=2048,zi(9,Qg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Yt(),t=$e.identifierPrefix;if(ge){var n=fn,r=hn;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ri++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nb={readContext:Pt,useCallback:oy,useContext:Pt,useEffect:Md,useImperativeHandle:iy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:Ul,useRef:ty,useState:function(){return Ul(Oi)},useDebugValue:$d,useDeferredValue:function(e){var t=At();return ly(t,Oe.memoizedState,e)},useTransition:function(){var e=Ul(Oi)[0],t=At().memoizedState;return[e,t]},useMutableSource:Gg,useSyncExternalStore:Jg,useId:cy,unstable_isNewReconciler:!1},Cb={readContext:Pt,useCallback:oy,useContext:Pt,useEffect:Md,useImperativeHandle:iy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:Bl,useRef:ty,useState:function(){return Bl(Oi)},useDebugValue:$d,useDeferredValue:function(e){var t=At();return Oe===null?t.memoizedState=e:ly(t,Oe.memoizedState,e)},useTransition:function(){var e=Bl(Oi)[0],t=At().memoizedState;return[e,t]},useMutableSource:Gg,useSyncExternalStore:Jg,useId:cy,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ja={isMounted:function(e){return(e=e._reactInternals)?Ar(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rt(),s=Hn(e),i=pn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Vn(e,i,s),t!==null&&(Vt(t,e,s,r),Wo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rt(),s=Hn(e),i=pn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vn(e,i,s),t!==null&&(Vt(t,e,s,r),Wo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rt(),r=Hn(e),s=pn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Vn(e,s,r),t!==null&&(Vt(t,e,r,n),Wo(t,e,r))}};function Ff(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ei(n,r)||!Ei(s,i):!0}function fy(e,t,n){var r=!1,s=Jn,i=t.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(s=ut(t)?kr:Ze.current,r=t.contextTypes,i=(r=r!=null)?xs(e,s):Jn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ja,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Uf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ja.enqueueReplaceState(t,t.state,null)}function ru(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ad(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Pt(i):(i=ut(t)?kr:Ze.current,s.context=xs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(nu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ja.enqueueReplaceState(s,s.state,null),xa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ks(e,t){try{var n="",r=t;do n+=r1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Vl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function su(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Pb=typeof WeakMap=="function"?WeakMap:Map;function py(e,t,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_a||(_a=!0,pu=r),su(e,t)},n}function my(e,t,n){n=pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){su(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){su(e,t),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Bf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Pb;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Wb.bind(null,e,t,n),t.then(e,e))}function Vf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var Ab=Sn.ReactCurrentOwner,lt=!1;function nt(e,t,n,r){t.child=e===null?Wg(t,null,n,r):bs(t,e.child,n,r)}function Hf(e,t,n,r,s){n=n.render;var i=t.ref;return ms(t,s),r=Dd(e,t,n,r,i,s),n=Ld(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(ge&&n&&_d(t),t.flags|=1,nt(e,t,r,s),t.child)}function Kf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!qd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,gy(e,t,i,r,s)):(e=Yo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ei,n(o,r)&&e.ref===t.ref)return wn(e,t,s)}return t.flags|=1,e=Kn(i,r),e.ref=t.ref,e.return=t,t.child=e}function gy(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ei(i,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,wn(e,t,s)}return iu(e,t,n,r,s)}function yy(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(ss,ft),ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(ss,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,he(ss,ft),ft|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,he(ss,ft),ft|=r;return nt(e,t,s,n),t.child}function vy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iu(e,t,n,r,s){var i=ut(n)?kr:Ze.current;return i=xs(t,i),ms(t,s),n=Dd(e,t,n,r,i,s),r=Ld(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wn(e,t,s)):(ge&&r&&_d(t),t.flags|=1,nt(e,t,n,s),t.child)}function qf(e,t,n,r,s){if(ut(n)){var i=!0;pa(t)}else i=!1;if(ms(t,s),t.stateNode===null)qo(e,t),fy(t,n,r),ru(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=ut(n)?kr:Ze.current,u=xs(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Uf(t,o,r,u),Pn=!1;var f=t.memoizedState;o.state=f,xa(t,r,o,s),l=t.memoizedState,a!==r||f!==l||ct.current||Pn?(typeof d=="function"&&(nu(t,n,d,r),l=t.memoizedState),(a=Pn||Ff(t,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Kg(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Lt(t.type,a),o.props=u,h=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pt(l):(l=ut(n)?kr:Ze.current,l=xs(t,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Uf(t,o,r,l),Pn=!1,f=t.memoizedState,o.state=f,xa(t,r,o,s);var y=t.memoizedState;a!==h||f!==y||ct.current||Pn?(typeof p=="function"&&(nu(t,n,p,r),y=t.memoizedState),(u=Pn||Ff(t,n,u,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ou(e,t,n,r,i,s)}function ou(e,t,n,r,s,i){vy(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Rf(t,n,!1),wn(e,t,i);r=t.stateNode,Ab.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=bs(t,e.child,null,i),t.child=bs(t,null,a,i)):nt(e,t,a,i),t.memoizedState=r.state,s&&Rf(t,n,!0),t.child}function xy(e){var t=e.stateNode;t.pendingContext?Af(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Af(e,t.context,!1),Rd(e,t.containerInfo)}function Gf(e,t,n,r,s){return ws(),Ed(s),t.flags|=256,nt(e,t,n,r),t.child}var au={dehydrated:null,treeContext:null,retryLane:0};function lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function wy(e,t,n){var r=t.pendingProps,s=xe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),he(xe,s&1),e===null)return eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Xa(o,r,0,null),e=wr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=lu(n),t.memoizedState=au,e):Fd(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Rb(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Kn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Kn(a,i):(i=wr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?lu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=au,r}return i=e.child,e=i.sibling,r=Kn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fd(e,t){return t=Xa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function So(e,t,n,r){return r!==null&&Ed(r),bs(t,e.child,null,n),e=Fd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rb(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Vl(Error(O(422))),So(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Xa({mode:"visible",children:r.children},s,0,null),i=wr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&bs(t,e.child,null,o),t.child.memoizedState=lu(o),t.memoizedState=au,i);if(!(t.mode&1))return So(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(O(419)),r=Vl(i,r,void 0),So(e,t,o,r)}if(a=(o&e.childLanes)!==0,lt||a){if(r=$e,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xn(e,s),Vt(r,e,s,-1))}return Kd(),r=Vl(Error(O(421))),So(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Hb.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,gt=Bn(s.nextSibling),yt=t,ge=!0,Ut=null,e!==null&&(jt[Et++]=hn,jt[Et++]=fn,jt[Et++]=_r,hn=e.id,fn=e.overflow,_r=t),t=Fd(t,r.children),t.flags|=4096,t)}function Jf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tu(e.return,t,n)}function Wl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function by(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(nt(e,t,r.children,n),r=xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jf(e,n,t);else if(e.tag===19)Jf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(he(xe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&wa(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&wa(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wl(t,!0,n,null,i);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ob(e,t,n){switch(t.tag){case 3:xy(t),ws();break;case 5:qg(t);break;case 1:ut(t.type)&&pa(t);break;case 4:Rd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;he(ya,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(he(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?wy(e,t,n):(he(xe,xe.current&1),e=wn(e,t,n),e!==null?e.sibling:null);he(xe,xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return by(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(xe,xe.current),r)break;return null;case 22:case 23:return t.lanes=0,yy(e,t,n)}return wn(e,t,n)}var Sy,cu,ky,_y;Sy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};ky=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,gr(en.current);var i=null;switch(n){case"input":s=Ac(e,s),r=Ac(e,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=zc(e,s),r=zc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ha)}Dc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pe("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};_y=function(e,t,n,r){n!==r&&(t.flags|=4)};function Vs(e,t){if(!ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zb(e,t,n){var r=t.pendingProps;switch(jd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ut(t.type)&&fa(),Ye(t),null;case 3:return r=t.stateNode,Ss(),me(ct),me(Ze),zd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(yu(Ut),Ut=null))),cu(e,t),Ye(t),null;case 5:Od(t);var s=gr(Ai.current);if(n=t.type,e!==null&&t.stateNode!=null)ky(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return Ye(t),null}if(e=gr(en.current),wo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Qt]=t,r[Ci]=i,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<Qs.length;s++)pe(Qs[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":rf(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":of(r,i),pe("invalid",r)}Dc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xo(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xo(r.textContent,a,e),s=["children",""+a]):xi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":uo(r),sf(r,i,!0);break;case"textarea":uo(r),af(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ha)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=X0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Qt]=t,e[Ci]=r,Sy(e,t,!1,!1),t.stateNode=e;e:{switch(o=Lc(n,r),n){case"dialog":pe("cancel",e),pe("close",e),s=r;break;case"iframe":case"object":case"embed":pe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qs.length;s++)pe(Qs[s],e);s=r;break;case"source":pe("error",e),s=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=r;break;case"details":pe("toggle",e),s=r;break;case"input":rf(e,r),s=Ac(e,r),pe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),pe("invalid",e);break;case"textarea":of(e,r),s=zc(e,r),pe("invalid",e);break;default:s=r}Dc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?tg(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Z0(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wi(e,l):typeof l=="number"&&wi(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&pe("scroll",e):l!=null&&ud(e,i,l,o))}switch(n){case"input":uo(e),sf(e,r,!1);break;case"textarea":uo(e),af(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ds(e,!!r.multiple,i,!1):r.defaultValue!=null&&ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)_y(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=gr(Ai.current),gr(en.current),wo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qt]=t,(i=r.nodeValue!==n)&&(e=yt,e!==null))switch(e.tag){case 3:xo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=t,t.stateNode=r}return Ye(t),null;case 13:if(me(xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ge&&gt!==null&&t.mode&1&&!(t.flags&128))Bg(),ws(),t.flags|=98560,i=!1;else if(i=wo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Qt]=t}else ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else Ut!==null&&(yu(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?ze===0&&(ze=3):Kd())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return Ss(),cu(e,t),e===null&&Ti(t.stateNode.containerInfo),Ye(t),null;case 10:return Cd(t.type._context),Ye(t),null;case 17:return ut(t.type)&&fa(),Ye(t),null;case 19:if(me(xe),i=t.memoizedState,i===null)return Ye(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Vs(i,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wa(e),o!==null){for(t.flags|=128,Vs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return he(xe,xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Te()>_s&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304)}else{if(!r)if(e=wa(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Ye(t),null}else 2*Te()-i.renderingStartTime>_s&&n!==1073741824&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Te(),t.sibling=null,n=xe.current,he(xe,r?n&1|2:n&1),t):(Ye(t),null);case 22:case 23:return Hd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ft&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Ib(e,t){switch(jd(t),t.tag){case 1:return ut(t.type)&&fa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),me(ct),me(Ze),zd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Od(t),null;case 13:if(me(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(xe),null;case 4:return Ss(),null;case 10:return Cd(t.type._context),null;case 22:case 23:return Hd(),null;case 24:return null;default:return null}}var ko=!1,Xe=!1,Db=typeof WeakSet=="function"?WeakSet:Set,B=null;function rs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function uu(e,t,n){try{n()}catch(r){_e(e,t,r)}}var Yf=!1;function Lb(e,t){if(qc=ca,e=Cg(),kd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gc={focusedElem:e,selectionRange:n},ca=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,w=y.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:Lt(t.type,x),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(j){_e(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return y=Yf,Yf=!1,y}function li(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&uu(t,n,i)}s=s.next}while(s!==r)}}function Ya(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function du(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jy(e){var t=e.alternate;t!==null&&(e.alternate=null,jy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Ci],delete t[Qc],delete t[xb],delete t[wb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ey(e){return e.tag===5||e.tag===3||e.tag===4}function Qf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ha));else if(r!==4&&(e=e.child,e!==null))for(hu(e,t,n),e=e.sibling;e!==null;)hu(e,t,n),e=e.sibling}function fu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}var Ve=null,$t=!1;function jn(e,t,n){for(n=n.child;n!==null;)Ty(e,t,n),n=n.sibling}function Ty(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Ba,n)}catch{}switch(n.tag){case 5:Xe||rs(n,t);case 6:var r=Ve,s=$t;Ve=null,jn(e,t,n),Ve=r,$t=s,Ve!==null&&($t?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&($t?(e=Ve,n=n.stateNode,e.nodeType===8?Ll(e.parentNode,n):e.nodeType===1&&Ll(e,n),_i(e)):Ll(Ve,n.stateNode));break;case 4:r=Ve,s=$t,Ve=n.stateNode.containerInfo,$t=!0,jn(e,t,n),Ve=r,$t=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uu(n,t,o),s=s.next}while(s!==r)}jn(e,t,n);break;case 1:if(!Xe&&(rs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_e(n,t,a)}jn(e,t,n);break;case 21:jn(e,t,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,jn(e,t,n),Xe=r):jn(e,t,n);break;default:jn(e,t,n)}}function Xf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Db),t.forEach(function(r){var s=Kb.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ve=a.stateNode,$t=!1;break e;case 3:Ve=a.stateNode.containerInfo,$t=!0;break e;case 4:Ve=a.stateNode.containerInfo,$t=!0;break e}a=a.return}if(Ve===null)throw Error(O(160));Ty(i,o,s),Ve=null,$t=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){_e(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ny(t,e),t=t.sibling}function Ny(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Jt(e),r&4){try{li(3,e,e.return),Ya(3,e)}catch(x){_e(e,e.return,x)}try{li(5,e,e.return)}catch(x){_e(e,e.return,x)}}break;case 1:Ot(t,e),Jt(e),r&512&&n!==null&&rs(n,n.return);break;case 5:if(Ot(t,e),Jt(e),r&512&&n!==null&&rs(n,n.return),e.flags&32){var s=e.stateNode;try{wi(s,"")}catch(x){_e(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Y0(s,i),Lc(a,o);var u=Lc(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?tg(s,h):d==="dangerouslySetInnerHTML"?Z0(s,h):d==="children"?wi(s,h):ud(s,d,h,u)}switch(a){case"input":Rc(s,i);break;case"textarea":Q0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ds(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ds(s,!!i.multiple,i.defaultValue,!0):ds(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ci]=i}catch(x){_e(e,e.return,x)}}break;case 6:if(Ot(t,e),Jt(e),r&4){if(e.stateNode===null)throw Error(O(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){_e(e,e.return,x)}}break;case 3:if(Ot(t,e),Jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_i(t.containerInfo)}catch(x){_e(e,e.return,x)}break;case 4:Ot(t,e),Jt(e);break;case 13:Ot(t,e),Jt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vd=Te())),r&4&&Xf(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,Ot(t,e),Xe=u):Ot(t,e),Jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(B=e,d=e.child;d!==null;){for(h=B=d;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:li(4,f,f.return);break;case 1:rs(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){_e(r,n,x)}}break;case 5:rs(f,f.return);break;case 22:if(f.memoizedState!==null){ep(h);continue}}p!==null?(p.return=f,B=p):ep(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eg("display",o))}catch(x){_e(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){_e(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ot(t,e),Jt(e),r&4&&Xf(e);break;case 21:break;default:Ot(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ey(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wi(s,""),r.flags&=-33);var i=Qf(e);fu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qf(e);hu(e,a,o);break;default:throw Error(O(161))}}catch(l){_e(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mb(e,t,n){B=e,Cy(e)}function Cy(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ko;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=ko;var u=Xe;if(ko=o,(Xe=l)&&!u)for(B=s;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?tp(s):l!==null?(l.return=o,B=l):tp(s);for(;i!==null;)B=i,Cy(i),i=i.sibling;B=s,ko=a,Xe=u}Zf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):Zf(e)}}function Zf(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Ya(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Lt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Lf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lf(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_i(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Xe||t.flags&512&&du(t)}catch(f){_e(t,t.return,f)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function ep(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function tp(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ya(4,t)}catch(l){_e(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){_e(t,s,l)}}var i=t.return;try{du(t)}catch(l){_e(t,i,l)}break;case 5:var o=t.return;try{du(t)}catch(l){_e(t,o,l)}}}catch(l){_e(t,t.return,l)}if(t===e){B=null;break}var a=t.sibling;if(a!==null){a.return=t.return,B=a;break}B=t.return}}var $b=Math.ceil,ka=Sn.ReactCurrentDispatcher,Ud=Sn.ReactCurrentOwner,Ct=Sn.ReactCurrentBatchConfig,oe=0,$e=null,Ce=null,He=0,ft=0,ss=er(0),ze=0,Ii=null,Er=0,Qa=0,Bd=0,ci=null,at=null,Vd=0,_s=1/0,cn=null,_a=!1,pu=null,Wn=null,_o=!1,Dn=null,ja=0,ui=0,mu=null,Go=-1,Jo=0;function rt(){return oe&6?Te():Go!==-1?Go:Go=Te()}function Hn(e){return e.mode&1?oe&2&&He!==0?He&-He:Sb.transition!==null?(Jo===0&&(Jo=fg()),Jo):(e=ce,e!==0||(e=window.event,e=e===void 0?16:wg(e.type)),e):1}function Vt(e,t,n,r){if(50<ui)throw ui=0,mu=null,Error(O(185));Qi(e,n,r),(!(oe&2)||e!==$e)&&(e===$e&&(!(oe&2)&&(Qa|=n),ze===4&&On(e,He)),dt(e,r),n===1&&oe===0&&!(t.mode&1)&&(_s=Te()+500,qa&&tr()))}function dt(e,t){var n=e.callbackNode;S1(e,t);var r=la(e,e===$e?He:0);if(r===0)n!==null&&uf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uf(n),t===1)e.tag===0?bb(np.bind(null,e)):$g(np.bind(null,e)),yb(function(){!(oe&6)&&tr()}),n=null;else{switch(pg(r)){case 1:n=md;break;case 4:n=dg;break;case 16:n=aa;break;case 536870912:n=hg;break;default:n=aa}n=Ly(n,Py.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Py(e,t){if(Go=-1,Jo=0,oe&6)throw Error(O(327));var n=e.callbackNode;if(gs()&&e.callbackNode!==n)return null;var r=la(e,e===$e?He:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ea(e,r);else{t=r;var s=oe;oe|=2;var i=Ry();($e!==e||He!==t)&&(cn=null,_s=Te()+500,xr(e,t));do try{Bb();break}catch(a){Ay(e,a)}while(!0);Nd(),ka.current=i,oe=s,Ce!==null?t=0:($e=null,He=0,t=ze)}if(t!==0){if(t===2&&(s=Bc(e),s!==0&&(r=s,t=gu(e,s))),t===1)throw n=Ii,xr(e,0),On(e,r),dt(e,Te()),n;if(t===6)On(e,r);else{if(s=e.current.alternate,!(r&30)&&!Fb(s)&&(t=Ea(e,r),t===2&&(i=Bc(e),i!==0&&(r=i,t=gu(e,i))),t===1))throw n=Ii,xr(e,0),On(e,r),dt(e,Te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:lr(e,at,cn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Vd+500-Te(),10<t)){if(la(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){rt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yc(lr.bind(null,e,at,cn),t);break}lr(e,at,cn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Bt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$b(r/1960))-r,10<r){e.timeoutHandle=Yc(lr.bind(null,e,at,cn),r);break}lr(e,at,cn);break;case 5:lr(e,at,cn);break;default:throw Error(O(329))}}}return dt(e,Te()),e.callbackNode===n?Py.bind(null,e):null}function gu(e,t){var n=ci;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=Ea(e,t),e!==2&&(t=at,at=n,t!==null&&yu(t)),e}function yu(e){at===null?at=e:at.push.apply(at,e)}function Fb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Bd,t&=~Qa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function np(e){if(oe&6)throw Error(O(327));gs();var t=la(e,0);if(!(t&1))return dt(e,Te()),null;var n=Ea(e,t);if(e.tag!==0&&n===2){var r=Bc(e);r!==0&&(t=r,n=gu(e,r))}if(n===1)throw n=Ii,xr(e,0),On(e,t),dt(e,Te()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,at,cn),dt(e,Te()),null}function Wd(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(_s=Te()+500,qa&&tr())}}function Tr(e){Dn!==null&&Dn.tag===0&&!(oe&6)&&gs();var t=oe;oe|=1;var n=Ct.transition,r=ce;try{if(Ct.transition=null,ce=1,e)return e()}finally{ce=r,Ct.transition=n,oe=t,!(oe&6)&&tr()}}function Hd(){ft=ss.current,me(ss)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gb(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(jd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fa();break;case 3:Ss(),me(ct),me(Ze),zd();break;case 5:Od(r);break;case 4:Ss();break;case 13:me(xe);break;case 19:me(xe);break;case 10:Cd(r.type._context);break;case 22:case 23:Hd()}n=n.return}if($e=e,Ce=e=Kn(e.current,null),He=ft=t,ze=0,Ii=null,Bd=Qa=Er=0,at=ci=null,mr!==null){for(t=0;t<mr.length;t++)if(n=mr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}mr=null}return e}function Ay(e,t){do{var n=Ce;try{if(Nd(),Ho.current=Sa,ba){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ba=!1}if(jr=0,Me=Oe=we=null,ai=!1,Ri=0,Ud.current=null,n===null||n.return===null){ze=1,Ii=t,Ce=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=He,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Vf(o);if(p!==null){p.flags&=-257,Wf(p,o,a,i,t),p.mode&1&&Bf(i,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var x=new Set;x.add(l),t.updateQueue=x}else y.add(l);break e}else{if(!(t&1)){Bf(i,u,t),Kd();break e}l=Error(O(426))}}else if(ge&&a.mode&1){var w=Vf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Wf(w,o,a,i,t),Ed(ks(l,a));break e}}i=l=ks(l,a),ze!==4&&(ze=2),ci===null?ci=[i]:ci.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=py(i,l,t);Df(i,m);break e;case 1:a=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wn===null||!Wn.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=my(i,a,t);Df(i,j);break e}}i=i.return}while(i!==null)}zy(n)}catch(k){t=k,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function Ry(){var e=ka.current;return ka.current=Sa,e===null?Sa:e}function Kd(){(ze===0||ze===3||ze===2)&&(ze=4),$e===null||!(Er&268435455)&&!(Qa&268435455)||On($e,He)}function Ea(e,t){var n=oe;oe|=2;var r=Ry();($e!==e||He!==t)&&(cn=null,xr(e,t));do try{Ub();break}catch(s){Ay(e,s)}while(!0);if(Nd(),oe=n,ka.current=r,Ce!==null)throw Error(O(261));return $e=null,He=0,ze}function Ub(){for(;Ce!==null;)Oy(Ce)}function Bb(){for(;Ce!==null&&!f1();)Oy(Ce)}function Oy(e){var t=Dy(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?zy(e):Ce=t,Ud.current=null}function zy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ib(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Ce=null;return}}else if(n=zb(n,t,ft),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);ze===0&&(ze=5)}function lr(e,t,n){var r=ce,s=Ct.transition;try{Ct.transition=null,ce=1,Vb(e,t,n,r)}finally{Ct.transition=s,ce=r}return null}function Vb(e,t,n,r){do gs();while(Dn!==null);if(oe&6)throw Error(O(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(k1(e,i),e===$e&&(Ce=$e=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_o||(_o=!0,Ly(aa,function(){return gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ct.transition,Ct.transition=null;var o=ce;ce=1;var a=oe;oe|=4,Ud.current=null,Lb(e,n),Ny(n,e),cb(Gc),ca=!!qc,Gc=qc=null,e.current=n,Mb(n),p1(),oe=a,ce=o,Ct.transition=i}else e.current=n;if(_o&&(_o=!1,Dn=e,ja=s),i=e.pendingLanes,i===0&&(Wn=null),y1(n.stateNode),dt(e,Te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_a)throw _a=!1,e=pu,pu=null,e;return ja&1&&e.tag!==0&&gs(),i=e.pendingLanes,i&1?e===mu?ui++:(ui=0,mu=e):ui=0,tr(),null}function gs(){if(Dn!==null){var e=pg(ja),t=Ct.transition,n=ce;try{if(Ct.transition=null,ce=16>e?16:e,Dn===null)var r=!1;else{if(e=Dn,Dn=null,ja=0,oe&6)throw Error(O(331));var s=oe;for(oe|=4,B=e.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(B=u;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:li(8,d,i)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var f=d.sibling,p=d.return;if(jy(d),d===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:li(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,B=m;break e}B=i.return}}var g=e.current;for(B=g;B!==null;){o=B;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,B=v;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ya(9,a)}}catch(k){_e(a,a.return,k)}if(a===o){B=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,B=j;break e}B=a.return}}if(oe=s,tr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Ba,e)}catch{}r=!0}return r}finally{ce=n,Ct.transition=t}}return!1}function rp(e,t,n){t=ks(n,t),t=py(e,t,1),e=Vn(e,t,1),t=rt(),e!==null&&(Qi(e,1,t),dt(e,t))}function _e(e,t,n){if(e.tag===3)rp(e,e,n);else for(;t!==null;){if(t.tag===3){rp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){e=ks(n,e),e=my(t,e,1),t=Vn(t,e,1),e=rt(),t!==null&&(Qi(t,1,e),dt(t,e));break}}t=t.return}}function Wb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(He&n)===n&&(ze===4||ze===3&&(He&130023424)===He&&500>Te()-Vd?xr(e,0):Bd|=n),dt(e,t)}function Iy(e,t){t===0&&(e.mode&1?(t=po,po<<=1,!(po&130023424)&&(po=4194304)):t=1);var n=rt();e=xn(e,t),e!==null&&(Qi(e,t,n),dt(e,n))}function Hb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Iy(e,n)}function Kb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),Iy(e,n)}var Dy;Dy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,Ob(e,t,n);lt=!!(e.flags&131072)}else lt=!1,ge&&t.flags&1048576&&Fg(t,ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=xs(t,Ze.current);ms(t,n),s=Dd(null,t,r,e,s,n);var i=Ld();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(r)?(i=!0,pa(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ad(t),s.updater=Ja,t.stateNode=s,s._reactInternals=t,ru(t,r,e,n),t=ou(null,t,r,!0,i,n)):(t.tag=0,ge&&i&&_d(t),nt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Gb(r),e=Lt(r,e),s){case 0:t=iu(null,t,r,e,n);break e;case 1:t=qf(null,t,r,e,n);break e;case 11:t=Hf(null,t,r,e,n);break e;case 14:t=Kf(null,t,r,Lt(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Lt(r,s),iu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Lt(r,s),qf(e,t,r,s,n);case 3:e:{if(xy(t),e===null)throw Error(O(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Kg(e,t),xa(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ks(Error(O(423)),t),t=Gf(e,t,r,n,s);break e}else if(r!==s){s=ks(Error(O(424)),t),t=Gf(e,t,r,n,s);break e}else for(gt=Bn(t.stateNode.containerInfo.firstChild),yt=t,ge=!0,Ut=null,n=Wg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),r===s){t=wn(e,t,n);break e}nt(e,t,r,n)}t=t.child}return t;case 5:return qg(t),e===null&&eu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Jc(r,s)?o=null:i!==null&&Jc(r,i)&&(t.flags|=32),vy(e,t),nt(e,t,o,n),t.child;case 6:return e===null&&eu(t),null;case 13:return wy(e,t,n);case 4:return Rd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bs(t,null,r,n):nt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Lt(r,s),Hf(e,t,r,s,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,he(ya,r._currentValue),r._currentValue=o,i!==null)if(Ht(i.value,o)){if(i.children===s.children&&!ct.current){t=wn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=pn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),tu(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ms(t,n),s=Pt(s),r=r(s),t.flags|=1,nt(e,t,r,n),t.child;case 14:return r=t.type,s=Lt(r,t.pendingProps),s=Lt(r.type,s),Kf(e,t,r,s,n);case 15:return gy(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Lt(r,s),qo(e,t),t.tag=1,ut(r)?(e=!0,pa(t)):e=!1,ms(t,n),fy(t,r,s),ru(t,r,s,n),ou(null,t,r,!0,e,n);case 19:return by(e,t,n);case 22:return yy(e,t,n)}throw Error(O(156,t.tag))};function Ly(e,t){return ug(e,t)}function qb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new qb(e,t,n,r)}function qd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gb(e){if(typeof e=="function")return qd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hd)return 11;if(e===fd)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")qd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gr:return wr(n.children,s,i,t);case dd:o=8,s|=8;break;case Tc:return e=Tt(12,n,t,s|2),e.elementType=Tc,e.lanes=i,e;case Nc:return e=Tt(13,n,t,s),e.elementType=Nc,e.lanes=i,e;case Cc:return e=Tt(19,n,t,s),e.elementType=Cc,e.lanes=i,e;case q0:return Xa(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H0:o=10;break e;case K0:o=9;break e;case hd:o=11;break e;case fd:o=14;break e;case Cn:o=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Tt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function wr(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function Xa(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=q0,e.lanes=n,e.stateNode={isHidden:!1},e}function Hl(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function Kl(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jb(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gd(e,t,n,r,s,i,o,a,l){return e=new Jb(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ad(i),e}function Yb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function My(e){if(!e)return Jn;e=e._reactInternals;e:{if(Ar(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(ut(n))return Mg(e,n,t)}return t}function $y(e,t,n,r,s,i,o,a,l){return e=Gd(n,r,!0,e,s,i,o,a,l),e.context=My(null),n=e.current,r=rt(),s=Hn(n),i=pn(r,s),i.callback=t??null,Vn(n,i,s),e.current.lanes=s,Qi(e,s,r),dt(e,r),e}function Za(e,t,n,r){var s=t.current,i=rt(),o=Hn(s);return n=My(n),t.context===null?t.context=n:t.pendingContext=n,t=pn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(s,t,o),e!==null&&(Vt(e,s,o,i),Wo(e,s,o)),o}function Ta(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jd(e,t){sp(e,t),(e=e.alternate)&&sp(e,t)}function Qb(){return null}var Fy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yd(e){this._internalRoot=e}el.prototype.render=Yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Za(e,t,null,null)};el.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){Za(null,e,null,null)}),t[vn]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var t=yg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rn.length&&t!==0&&t<Rn[n].priority;n++);Rn.splice(n,0,e),n===0&&xg(e)}};function Qd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ip(){}function Xb(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ta(o);i.call(u)}}var o=$y(t,r,e,0,null,!1,!1,"",ip);return e._reactRootContainer=o,e[vn]=o.current,Ti(e.nodeType===8?e.parentNode:e),Tr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Ta(l);a.call(u)}}var l=Gd(e,0,!1,null,null,!1,!1,"",ip);return e._reactRootContainer=l,e[vn]=l.current,Ti(e.nodeType===8?e.parentNode:e),Tr(function(){Za(t,l,n,r)}),l}function nl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ta(o);a.call(l)}}Za(t,o,e,s)}else o=Xb(n,t,e,s,r);return Ta(o)}mg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ys(t.pendingLanes);n!==0&&(gd(t,n|1),dt(t,Te()),!(oe&6)&&(_s=Te()+500,tr()))}break;case 13:Tr(function(){var r=xn(e,1);if(r!==null){var s=rt();Vt(r,e,1,s)}}),Jd(e,1)}};yd=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=rt();Vt(t,e,134217728,n)}Jd(e,134217728)}};gg=function(e){if(e.tag===13){var t=Hn(e),n=xn(e,t);if(n!==null){var r=rt();Vt(n,e,t,r)}Jd(e,t)}};yg=function(){return ce};vg=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};$c=function(e,t,n){switch(t){case"input":if(Rc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ka(r);if(!s)throw Error(O(90));J0(r),Rc(r,s)}}}break;case"textarea":Q0(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};sg=Wd;ig=Tr;var Zb={usingClientEntryPoint:!1,Events:[Zi,Xr,Ka,ng,rg,Wd]},Ws={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eS={bundleType:Ws.bundleType,version:Ws.version,rendererPackageName:Ws.rendererPackageName,rendererConfig:Ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lg(e),e===null?null:e.stateNode},findFiberByHostInstance:Ws.findFiberByHostInstance||Qb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jo.isDisabled&&jo.supportsFiber)try{Ba=jo.inject(eS),Zt=jo}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb;wt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(t))throw Error(O(200));return Yb(e,t,null,n)};wt.createRoot=function(e,t){if(!Qd(e))throw Error(O(299));var n=!1,r="",s=Fy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gd(e,1,!1,null,null,n,!1,r,s),e[vn]=t.current,Ti(e.nodeType===8?e.parentNode:e),new Yd(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=lg(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return Tr(e)};wt.hydrate=function(e,t,n){if(!tl(t))throw Error(O(200));return nl(null,e,t,!0,n)};wt.hydrateRoot=function(e,t,n){if(!Qd(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=$y(t,null,e,1,n??null,s,!1,i,o),e[vn]=t.current,Ti(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new el(t)};wt.render=function(e,t,n){if(!tl(t))throw Error(O(200));return nl(null,e,t,!1,n)};wt.unmountComponentAtNode=function(e){if(!tl(e))throw Error(O(40));return e._reactRootContainer?(Tr(function(){nl(null,null,e,!1,function(){e._reactRootContainer=null,e[vn]=null})}),!0):!1};wt.unstable_batchedUpdates=Wd;wt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tl(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return nl(e,t,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function Uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uy)}catch(e){console.error(e)}}Uy(),U0.exports=wt;var By=U0.exports,op=By;jc.createRoot=op.createRoot,jc.hydrateRoot=op.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Di.apply(this,arguments)}var Ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ln||(Ln={}));const ap="popstate";function tS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:a}=r.location;return vu("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Na(s)}return rS(t,n,null,e)}function Pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nS(){return Math.random().toString(36).substr(2,8)}function lp(e,t){return{usr:e.state,key:e.key,idx:t}}function vu(e,t,n,r){return n===void 0&&(n=null),Di({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Os(t):t,{state:n,key:t&&t.key||r||nS()})}function Na(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Os(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function rS(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ln.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Di({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ln.Pop;let w=d(),m=w==null?null:w-u;u=w,l&&l({action:a,location:x.location,delta:m})}function f(w,m){a=Ln.Push;let g=vu(x.location,w,m);u=d()+1;let v=lp(g,u),j=x.createHref(g);try{o.pushState(v,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&l&&l({action:a,location:x.location,delta:1})}function p(w,m){a=Ln.Replace;let g=vu(x.location,w,m);u=d();let v=lp(g,u),j=x.createHref(g);o.replaceState(v,"",j),i&&l&&l({action:a,location:x.location,delta:0})}function y(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:Na(w);return g=g.replace(/ $/,"%20"),Pe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let x={get action(){return a},get location(){return e(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ap,h),l=w,()=>{s.removeEventListener(ap,h),l=null}},createHref(w){return t(s,w)},createURL:y,encodeLocation(w){let m=y(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(w){return o.go(w)}};return x}var cp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cp||(cp={}));function sS(e,t,n){return n===void 0&&(n="/"),iS(e,t,n)}function iS(e,t,n,r){let s=typeof t=="string"?Os(t):t,i=Zd(s.pathname||"/",n);if(i==null)return null;let o=Vy(e);oS(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=vS(i);a=mS(o[l],u)}return a}function Vy(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=qn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Vy(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:fS(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Wy(i.path))s(i,o,l)}),t}function Wy(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Wy(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function oS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:pS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const aS=/^:[\w-]+$/,lS=3,cS=2,uS=1,dS=10,hS=-2,up=e=>e==="*";function fS(e,t){let n=e.split("/"),r=n.length;return n.some(up)&&(r+=hS),t&&(r+=cS),n.filter(s=>!up(s)).reduce((s,i)=>s+(aS.test(i)?lS:i===""?uS:dS),r)}function pS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function mS(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=gS({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:qn([i,h.pathname]),pathnameBase:kS(qn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=qn([i,h.pathnameBase]))}return o}function gS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=yS(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[h];return p&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function yS(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Xd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function vS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const xS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wS=e=>xS.test(e);function bS(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Os(e):e,i;if(n)if(wS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=dp(n.substring(1),"/"):i=dp(n,t)}else i=t;return{pathname:i,search:_S(r),hash:jS(s)}}function dp(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ql(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hy(e,t){let n=SS(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ky(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Os(e):(s=Di({},e),Pe(!s.pathname||!s.pathname.includes("?"),ql("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),ql("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),ql("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=bS(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const qn=e=>e.join("/").replace(/\/\/+/g,"/"),kS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_S=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ES(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qy=["post","put","patch","delete"];new Set(qy);const TS=["get",...qy];new Set(TS);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Li.apply(this,arguments)}const eh=b.createContext(null),NS=b.createContext(null),Rr=b.createContext(null),rl=b.createContext(null),nr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Gy=b.createContext(null);function CS(e,t){let{relative:n}=t===void 0?{}:t;to()||Pe(!1);let{basename:r,navigator:s}=b.useContext(Rr),{hash:i,pathname:o,search:a}=Yy(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qn([r,o])),s.createHref({pathname:l,search:a,hash:i})}function to(){return b.useContext(rl)!=null}function zs(){return to()||Pe(!1),b.useContext(rl).location}function Jy(e){b.useContext(Rr).static||b.useLayoutEffect(e)}function th(){let{isDataRoute:e}=b.useContext(nr);return e?VS():PS()}function PS(){to()||Pe(!1);let e=b.useContext(eh),{basename:t,future:n,navigator:r}=b.useContext(Rr),{matches:s}=b.useContext(nr),{pathname:i}=zs(),o=JSON.stringify(Hy(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return Jy(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Ky(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:qn([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}function AS(){let{matches:e}=b.useContext(nr),t=e[e.length-1];return t?t.params:{}}function Yy(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(Rr),{matches:s}=b.useContext(nr),{pathname:i}=zs(),o=JSON.stringify(Hy(s,r.v7_relativeSplatPath));return b.useMemo(()=>Ky(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function RS(e,t){return OS(e,t)}function OS(e,t,n,r){to()||Pe(!1);let{navigator:s}=b.useContext(Rr),{matches:i}=b.useContext(nr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=zs(),d;if(t){var h;let w=typeof t=="string"?Os(t):t;l==="/"||(h=w.pathname)!=null&&h.startsWith(l)||Pe(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=sS(e,{pathname:p}),x=MS(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:qn([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:qn([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return t&&x?b.createElement(rl.Provider,{value:{location:Li({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ln.Pop}},x):x}function zS(){let e=BS(),t=ES(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:s},n):null,null)}const IS=b.createElement(zS,null);class DS extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(nr.Provider,{value:this.props.routeContext},b.createElement(Gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LS(e){let{routeContext:t,match:n,children:r}=e,s=b.useContext(eh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(nr.Provider,{value:t},r)}function MS(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Pe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,y=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,y=!1,x=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||IS,l&&(u<0&&f===0?(WS("route-fallback"),y=!0,w=null):u===f&&(y=!0,w=h.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),g=()=>{let v;return p?v=x:y?v=w:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(LS,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(DS,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var Qy=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qy||{}),Xy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xy||{});function $S(e){let t=b.useContext(eh);return t||Pe(!1),t}function FS(e){let t=b.useContext(NS);return t||Pe(!1),t}function US(e){let t=b.useContext(nr);return t||Pe(!1),t}function Zy(e){let t=US(),n=t.matches[t.matches.length-1];return n.route.id||Pe(!1),n.route.id}function BS(){var e;let t=b.useContext(Gy),n=FS(),r=Zy();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function VS(){let{router:e}=$S(Qy.UseNavigateStable),t=Zy(Xy.UseNavigateStable),n=b.useRef(!1);return Jy(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Li({fromRouteId:t},i)))},[e,t])}const hp={};function WS(e,t,n){hp[e]||(hp[e]=!0)}function HS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function an(e){Pe(!1)}function KS(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ln.Pop,navigator:i,static:o=!1,future:a}=e;to()&&Pe(!1);let l=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Li({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Os(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=r,x=b.useMemo(()=>{let w=Zd(d,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:y},navigationType:s}},[l,d,h,f,p,y,s]);return x==null?null:b.createElement(Rr.Provider,{value:u},b.createElement(rl.Provider,{children:n,value:x}))}function qS(e){let{children:t,location:n}=e;return RS(xu(t),n)}new Promise(()=>{});function xu(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,s)=>{if(!b.isValidElement(r))return;let i=[...t,s];if(r.type===b.Fragment){n.push.apply(n,xu(r.props.children,i));return}r.type!==an&&Pe(!1),!r.props.index||!r.props.children||Pe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xu(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wu.apply(this,arguments)}function GS(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function JS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function YS(e,t){return e.button===0&&(!t||t==="_self")&&!JS(e)}const QS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XS="6";try{window.__reactRouterVersion=XS}catch{}const ZS="startTransition",fp=Ww[ZS];function ek(e){let{basename:t,children:n,future:r,window:s}=e,i=b.useRef();i.current==null&&(i.current=tS({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&fp?fp(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>HS(r),[r]),b.createElement(KS,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ca=b.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=t,f=GS(t,QS),{basename:p}=b.useContext(Rr),y,x=!1;if(typeof u=="string"&&nk.test(u)&&(y=u,tk))try{let v=new URL(window.location.href),j=u.startsWith("//")?new URL(v.protocol+u):new URL(u),k=Zd(j.pathname,p);j.origin===v.origin&&k!=null?u=k+j.search+j.hash:x=!0}catch{}let w=CS(u,{relative:s}),m=rk(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function g(v){r&&r(v),v.defaultPrevented||m(v)}return b.createElement("a",wu({},f,{href:y||w,onClick:x||i?r:g,ref:n,target:l}))});var pp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pp||(pp={}));var mp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(mp||(mp={}));function rk(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=t===void 0?{}:t,l=th(),u=zs(),d=Yy(e,{relative:o});return b.useCallback(h=>{if(YS(h,n)){h.preventDefault();let f=r!==void 0?r:Na(u)===Na(d);l(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,r,s,n,e,i,o,a])}function sl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function sk(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}const ik=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class nh extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class ok extends nh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gp extends nh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class yp extends nh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bu||(bu={}));class ak{constructor(t,{headers:n={},customFetch:r,region:s=bu.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=ik(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return sk(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const y=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let x;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?x=JSON.stringify(u):x=u;let w=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(w=o.signal,d.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:x,signal:w}).catch(k=>{throw new ok(k)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new gp(m);if(!m.ok)throw new yp(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return v==="application/json"?j=yield m.json():v==="application/octet-stream"||v==="application/pdf"?j=yield m.blob():v==="text/event-stream"?j=m:v==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof yp||a instanceof gp?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var lk=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ck=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var p;const m=await i.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}const x=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&w&&w.length>1&&(l=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var y;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&x===""?(u=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new lk(o)}return{error:o,data:a,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,d,h,f;const y=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",x=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${y}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},uk=class extends ck{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const vp=new RegExp("[,()]");var Wr=class extends uk{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&vp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&vp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},dk=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Wr({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),n||o.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new Wr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);a.searchParams.set("columns",d.join(","))}}return new Wr({method:o,url:a,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Wr({method:r,url:s,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Wr({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},hk=class ev{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new dk(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ev(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),h=r&&Object.values(n).some(d);h?(a="POST",u=n):r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,y])=>y!==void 0).map(([p,y])=>[p,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([p,y])=>{l.searchParams.append(p,y)})):(a="POST",u=n);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Wr({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class fk{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pk="2.90.1",mk=`realtime-js/${pk}`,tv="1.0.0",gk="2.0.0",xp=tv,Su=1e4,yk=1e3,vk=100;var An;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(An||(An={}));var Re;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Re||(Re={}));var Ft;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ft||(Ft={}));var ku;(function(e){e.websocket="websocket"})(ku||(ku={}));var hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hr||(hr={}));class xk{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,n,r){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(p),x=0;y.setUint8(x++,this.KINDS.userBroadcastPush),y.setUint8(x++,l.length),y.setUint8(x++,a.length),y.setUint8(x++,o.length),y.setUint8(x++,u.length),y.setUint8(x++,h.length),y.setUint8(x++,n),Array.from(l,m=>y.setUint8(x++,m.charCodeAt(0))),Array.from(a,m=>y.setUint8(x++,m.charCodeAt(0))),Array.from(o,m=>y.setUint8(x++,m.charCodeAt(0))),Array.from(u,m=>y.setUint8(x++,m.charCodeAt(0))),Array.from(h,m=>y.setUint8(x++,m.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(t.slice(l,l+s));l=l+s;const d=r.decode(t.slice(l,l+i));l=l+i;const h=r.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}let nv=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var de;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(de||(de={}));const wp=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=wk(o,e,t,s),i),{}):{}},wk=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?rv(i,o):_u(o)},rv=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return _k(t,n)}switch(e){case de.bool:return bk(t);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return Sk(t);case de.json:case de.jsonb:return kk(t);case de.timestamp:return jk(t);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return _u(t);default:return _u(t)}},_u=e=>e,bk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Sk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},kk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},_k=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>rv(t,a))}return e},jk=e=>typeof e=="string"?e.replace(" ","T"):e,sv=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Gl{constructor(t,n,r={},s=Su){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bp||(bp={}));class di{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=di.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=di.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=di.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),y=d.filter(w=>p.indexOf(w.presence_ref)<0),x=h.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[u]=y),x.length>0&&(l[u]=x)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const h=t[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sp||(Sp={}));var hi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(hi||(hi={}));var un;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(un||(un={}));class is{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,Ft.join,this.params,this.timeout),this.rejoinTimer=new nv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Re.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ft.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new di(this),this.broadcastEndpointURL=sv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Re.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[hi.PRESENCE]&&this.bindings[hi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(un.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(un.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(un.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,w=(y=x==null?void 0:x.length)!==null&&y!==void 0?y:0,m=[];for(let g=0;g<w;g++){const v=x[g],{filter:{event:j,schema:k,table:S,filter:_}}=v,E=p&&p[g];if(E&&E.event===j&&is.isFilterValueEqual(E.schema,k)&&is.isFilterValueEqual(E.table,S)&&is.isFilterValueEqual(E.filter,_))m.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=Re.errored,t==null||t(un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(un.SUBSCRIBED);return}}).receive("error",p=>{this.state=Re.errored,t==null||t(un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Re.joined&&t===hi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Re.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ft.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Gl(this,Ft.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Re.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gl(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Ft;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,x,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(x=p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,x,w,m,g,v,j,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,_=(y=p.filter)===null||y===void 0?void 0:y.event;return S&&((x=n.ids)===null||x===void 0?void 0:x.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((m=p.filter)===null||m===void 0)&&m.table)||p.filter.table===((g=n.data)===null||g===void 0?void 0:g.table))}else{const S=(j=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return S==="*"||S===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:x,table:w,commit_timestamp:m,type:g,errors:v}=y;f=Object.assign(Object.assign({},{schema:x,table:w,commit_timestamp:m,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(y))}p.callback(f,r)})}_isClosed(){return this.state===Re.closed}_isJoined(){return this.state===Re.joined}_isJoining(){return this.state===Re.joining}_isLeaving(){return this.state===Re.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&is.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ft.close,{},t)}_onError(t){this._on(Ft.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Re.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=wp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=wp(t.columns,t.old_record)),n}}const Jl=()=>{},Eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ek=[1e3,2e3,5e3,1e4],Tk=1e4,Nk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ck{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Su,this.transport=null,this.heartbeatIntervalMs=Eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jl,this.ref=0,this.reconnectTimer=null,this.vsn=xp,this.logger=Jl,this.conn=null,this.sendBuffer=[],this.serializer=new xk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ku.websocket}`,this.httpEndpoint=sv(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case An.connecting:return hr.Connecting;case An.open:return hr.Open;case An.closing:return hr.Closing;default:return hr.Closed}}isConnected(){return this.connectionState()===hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new is(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===An.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===An.open||this.conn.readyState===An.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ft.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Nk],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:mk};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ft.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,o,a,l,u,d,h,f,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Su,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Eo.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Jl,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:xp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>Ek[y-1]||Tk,this.vsn){case tv:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,x)=>x(JSON.stringify(y)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(y,x)=>x(JSON.parse(y));break;case gk:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Mi=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Pk(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function Ak(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Rk(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=Pk(e.baseUrl,r,s),l=await Ak(e.auth),u=await t(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,y=p==null?void 0:p.error;throw new Mi((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function To(e){return e.join("")}var Ok=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:To(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${To(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${To(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${To(e.namespace)}`}),!0}catch(t){if(t instanceof Mi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Mi&&n.status===409)return;throw n}}};function Lr(e){return e.join("")}var zk=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Mi&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Mi&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Ik=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Rk({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Ok(this.client,t),this.tableOps=new zk(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},il=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ve(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Dk=class extends il{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ju=class extends il{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const rh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Lk=()=>Response,Eu=e=>{if(Array.isArray(e))return e.map(n=>Eu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Eu(r)}),t},Mk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$k=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}function Fk(e,t){if($i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uk(e){var t=Fk(e,"string");return $i(t)=="symbol"?t:t+""}function Bk(e,t,n){return(t=Uk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kp(Object(n),!0).forEach(function(r){Bk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Yl=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Vk=async(e,t,n)=>{e instanceof await Lk()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new Dk(Yl(r),s,i))}).catch(r=>{t(new ju(Yl(r),r))}):t(new ju(Yl(e),e))},Wk=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(Mk(r)?(s.headers=G({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),G(G({},s),n))};async function no(e,t,n,r,s,i){return new Promise((o,a)=>{e(n,Wk(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Vk(l,a,r))})}async function Fi(e,t,n,r){return no(e,"GET",t,n,r)}async function Mt(e,t,n,r,s){return no(e,"POST",t,r,s,n)}async function Tu(e,t,n,r,s){return no(e,"PUT",t,r,s,n)}async function Hk(e,t,n,r){return no(e,"HEAD",t,G(G({},n),{},{noResolveJson:!0}),r)}async function sh(e,t,n,r,s){return no(e,"DELETE",t,r,s,n)}var Kk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}}};let iv;iv=Symbol.toStringTag;var qk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[iv]="BlobDownloadBuilder",this.promise=null}asStream(){return new Kk(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ve(t))return{data:null,error:t};throw t}}};const Gk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_p={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Jk=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=rh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const o=G(G({},_p),r);let a=G(G({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=G(G({},a),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?Tu:Mt)(s.fetch,`${s.url}/object/${d}`,i,G({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=G({upsert:_p.upsert},r),d=G(G({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Tu(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ve(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=G({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Mt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new il("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await Mt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await Mt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await Mt(r.fetch,`${r.url}/object/sign/${s}`,G({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await Mt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>G(G({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),o=()=>Fi(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new qk(o,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Eu(await Fi(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Hk(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ve(r)&&r instanceof ju){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(e){var t=this;try{return{data:await sh(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=G(G(G({},Gk),t),{},{prefix:e||""});return{data:await Mt(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=G({},e);return{data:await Mt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const ov="2.90.1",av={"X-Client-Info":`storage-js/${ov}`};var Yk=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=G(G({},av),t),this.fetch=rh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Fi(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Fi(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Mt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Tu(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Mt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await sh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Qk=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=G(G({},av),t),this.fetch=rh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Mt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Fi(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await sh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!$k(e))throw new il("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ik({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const ih={"X-Client-Info":`storage-js/${ov}`,"Content-Type":"application/json"};var lv=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Ql=class extends lv{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Xk=class extends lv{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const oh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},jp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),e_=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new Ql(jp(i),r,o))}).catch(()=>{const i=r+"";t(new Ql(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new Ql(s.statusText||`HTTP ${r} error`,r,i))}}else t(new Xk(jp(e),e))},t_=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Zk(r)?(s.headers=G({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,G(G({},s),n)):s};async function n_(e,t,n,r,s,i){return new Promise((o,a)=>{e(n,t_(t,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>e_(l,a,r))})}async function mt(e,t,n,r,s){return n_(e,"POST",t,r,s,n)}var r_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=G(G({},ih),t),this.fetch=oh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await mt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await mt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}},s_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=G(G({},ih),t),this.fetch=oh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await mt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await mt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await mt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},i_=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=G(G({},ih),t),this.fetch=oh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await mt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await mt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},o_=class extends i_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new a_(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},a_=class extends r_{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new l_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},l_=class extends s_{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,G(G({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},c_=class extends Yk{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Jk(this.url,this.headers,e,this.fetch)}get vectors(){return new o_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Qk(this.url+"/iceberg",this.headers,this.fetch)}};const cv="2.90.1",Hr=30*1e3,Nu=3,Xl=Nu*Hr,u_="http://localhost:9999",d_="supabase.auth.token",h_={"X-Client-Info":`gotrue-js/${cv}`},Cu="X-Supabase-Api-Version",uv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},f_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p_=10*60*1e3;class Ui extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class m_ extends Ui{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function g_(e){return W(e)&&e.name==="AuthApiError"}class fr extends Ui{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class kn extends Ui{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class ht extends kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y_(e){return W(e)&&e.name==="AuthSessionMissingError"}class Mr extends kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class No extends kn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Co extends kn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v_(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ep extends kn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class x_ extends kn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pu extends kn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Zl(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Tp extends kn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Au extends kn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Np=` 	
\r=`.split(""),w_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Np.length;t+=1)e[Np[t].charCodeAt(0)]=-2;for(let t=0;t<Pa.length;t+=1)e[Pa[t].charCodeAt(0)]=t;return e})();function Cp(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Pa[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Pa[r]),t.queuedBits-=6}}function dv(e,t,n){const r=w_[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Pp(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{k_(o,r,n)};for(let o=0;o<e.length;o+=1)dv(e.charCodeAt(o),s,i);return t.join("")}function b_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function S_(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}b_(r,t)}}function k_(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ys(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)dv(e.charCodeAt(s),n,r);return new Uint8Array(t)}function __(e){const t=[];return S_(e,n=>t.push(n)),new Uint8Array(t)}function yr(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Cp(s,n,r)),Cp(null,n,r),t.join("")}function j_(e){return Math.round(Date.now()/1e3)+e}function E_(){return Symbol("auth-callback")}const Be=()=>typeof window<"u"&&typeof document<"u",sr={tested:!1,writable:!1},hv=()=>{if(!Be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sr.tested)return sr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sr.tested=!0,sr.writable=!0}catch{sr.tested=!0,sr.writable=!1}return sr.writable};function T_(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const fv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Kr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ir=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ue=async(e,t)=>{await e.removeItem(t)};class ol{constructor(){this.promise=new ol.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}ol.promiseConstructor=Promise;function ec(e){const t=e.split(".");if(t.length!==3)throw new Au("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!f_.test(t[r]))throw new Au("JWT not in base64url format");return{header:JSON.parse(Pp(t[0])),payload:JSON.parse(Pp(t[1])),signature:ys(t[2]),raw:{header:t[0],payload:t[1]}}}async function C_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function P_(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function A_(e){return("0"+e.toString(16)).substr(-2)}function R_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,A_).join("")}async function O_(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function z_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await O_(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $r(e,t,n=!1){const r=R_();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Kr(e,`${t}-code-verifier`,s);const i=await z_(r);return[i,r===i?"plain":"s256"]}const I_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D_(e){const t=e.headers.get(Cu);if(!t||!t.match(I_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function L_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function M_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fr(e){if(!$_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function F_(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Ap(e){return JSON.parse(JSON.stringify(e))}const cr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U_=[502,503,504];async function Rp(e){var t;if(!N_(e))throw new Pu(cr(e),0);if(U_.includes(e.status))throw new Pu(cr(e),e.status);let n;try{n=await e.json()}catch(i){throw new fr(cr(i),i)}let r;const s=D_(e);if(s&&s.getTime()>=uv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Tp(cr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ht}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Tp(cr(n),e.status,n.weak_password.reasons);throw new m_(cr(n),e.status||500,r)}const B_=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function K(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Cu]||(i[Cu]=uv["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await V_(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function V_(e,t,n,r,s,i){const o=B_(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Pu(cr(l),0)}if(a.ok||await Rp(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Rp(l)}}function zt(e){var t;let n=null;K_(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=j_(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Op(e){const t=zt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function W_(e){return{data:e,error:null}}function H_(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=sl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zp(e){return e}function K_(e){return e.access_token&&e.refresh_token&&e.expires_in}const nc=["global","local","others"];class q_{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=fv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=nc[0]){if(nc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nc.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=sl(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:H_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zp});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(W(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fr(t);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zn})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Fr(t);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:zn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Fr(t);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:zn})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Fr(t.userId);try{const{data:n,error:r}=await K(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Fr(t.userId),Fr(t.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await K(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zp});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(W(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await K(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await K(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await K(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}}function Ip(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ur={debug:!!(globalThis&&hv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class G_ extends pv{}async function J_(e,t,n){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ur.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new G_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ur.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Y_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mv(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Q_(e){return parseInt(e,16)}function X_(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Z_(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=mv(e.address),y=d?`${d}://${r}`:r,x=e.statement?`${e.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${p}

${x}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);g+=`
- ${v}`}m+=g}return`${w}
${m}`}class Ne extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Aa extends Ne{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function ej({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(gv(o)){if(i.rp.id!==o)return new Ne({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function tj({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(gv(r)){if(n.rpId!==r)return new Ne({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class nj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const rj=new nj;function sj(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=sl(e,["challenge","user","excludeCredentials"]),i=ys(t).buffer,o=Object.assign(Object.assign({},n),{id:ys(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ys(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function ij(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=sl(e,["challenge","allowCredentials"]),s=ys(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ys(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function oj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:yr(new Uint8Array(e.response.attestationObject)),clientDataJSON:yr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:yr(new Uint8Array(s.authenticatorData)),clientDataJSON:yr(new Uint8Array(s.clientDataJSON)),signature:yr(new Uint8Array(s.signature)),userHandle:s.userHandle?yr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gv(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Dp(){var e,t;return!!(Be()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function lj(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",t)}:{data:null,error:new Aa("Empty credential response",t)}}catch(t){return{data:null,error:ej({error:t,options:e})}}}async function cj(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",t)}:{data:null,error:new Aa("Empty credential response",t)}}catch(t){return{data:null,error:tj({error:t,options:e})}}}const uj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ra(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const a=r[i];t(a)?r[i]=Ra(a,o):r[i]=Ra(o)}else r[i]=o}return r}function hj(e,t){return Ra(uj,e,t||{})}function fj(e,t){return Ra(dj,e,t||{})}class pj{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:a};const l=s??rj.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=hj(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await lj({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=fj(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await cj(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new fr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Ui("rpId is required for WebAuthn authentication")};try{if(!Dp())return{data:null,error:new fr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new fr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Ui("rpId is required for WebAuthn registration")};try{if(!Dp())return{data:null,error:new fr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new fr("Unexpected error in register",o)}}}}Y_();const mj={url:u_,storageKey:d_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:h_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Lp(e,t,n){return await n()}const Br={};class Bi{get jwks(){var t,n;return(n=(t=Br[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Br[this.storageKey]=Object.assign(Object.assign({},Br[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Br[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Br[this.storageKey]=Object.assign(Object.assign({},Br[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},mj),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Bi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Bi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Be()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new q_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=fv(i.fetch),this.lock=i.lock||Lp,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Be()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=J_:this.lock=Lp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:hv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ip(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ip(this.memoryStorage)),Be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cv}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Be()&&(n=T_(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Be()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),v_(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?this._returnResult({error:n}):this._returnResult({error:new fr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:zt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(W(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await $r(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:zt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zt})}else throw new No("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Ue(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Op})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Op})}else throw new No("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Mr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,o,a,l,u,d,h,f;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:x,wallet:w,statement:m,options:g}=t;let v;if(Be())if(typeof w=="object")v=w;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")v=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const j=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=mv(k[0]);let _=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!_){const N=await v.request({method:"eth_chainId"});_=Q_(N)}const E={domain:j.host,address:S,statement:m,uri:j.href,version:"1",chainId:_,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=Z_(E),y=await v.request({method:"personal_sign",params:[X_(p),S]})}try{const{data:x,error:w}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:zt});if(w)throw w;if(!x||!x.session||!x.user){const m=new Mr;return this._returnResult({data:{user:null,session:null},error:m})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(W(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var n,r,s,i,o,a,l,u,d,h,f,p;let y,x;if("message"in t)y=t.message,x=t.signature;else{const{chain:w,wallet:m,statement:g,options:v}=t;let j;if(Be())if(typeof m=="object")j=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=m}const k=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),g?{statement:g}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)y=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),x=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:w,error:m}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:yr(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:zt});if(m)throw m;if(!w||!w.session||!w.user){const g=new Mr;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(W(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await ir(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new x_;const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:zt});if(await Ue(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Mr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zt}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new Mr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $r(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new No("You must provide either an email or phone number.")}catch(a){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:zt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await $r(this.storage,this.storageKey));const u=await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:W_});return!((i=u.data)===null||i===void 0)&&i.url&&Be()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ht;const{error:s}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(W(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await K(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await K(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new No("You must provide either an email or phone number and a type")}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ir(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Xl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ir(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=tc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=F_(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zn})})}catch(n){if(W(n))return y_(n)&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ht;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await $r(this.storage,this.storageKey));const{data:u,error:d}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:zn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ht;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ec(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(W(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ht;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Be())throw new Co("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Co(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ep("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Co("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ep("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new Co("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:x,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(r){if(W(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ir(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(g_(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=E_(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await $r(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Be()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(W(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:d}=t,h=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Mr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Ue(this.storage,`${this.storageKey}-code-verifier`),W(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await P_(async s=>(s>0&&await C_(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Zl(i)&&Date.now()+o-r<Hr})}catch(r){if(this._debug(n,"error",r),W(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Be()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ir(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ir(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Kr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:tc()}else if(s&&!s.user&&!s.user){const o=await ir(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ue(this.storage,this.storageKey+"-user"),await Kr(this.storage,this.storageKey,s)):s.user=tc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Xl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Zl(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ol;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),W(i)){const o={data:null,error:i};return Zl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ue(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Kr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Ap(s);await Kr(this.storage,this.storageKey,i)}else{const s=Ap(n);await Kr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ue(this.storage,this.storageKey),await Ue(this.storage,this.storageKey+"-code-verifier"),await Ue(this.storage,this.storageKey+"-user"),this.userStorage&&await Ue(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Be()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hr}ms, refresh threshold is ${Nu} ticks`),s<=Nu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Be()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await $r(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await K(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await K(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?oj(t.webauthn.credential_response):aj(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await K(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:sj(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ij(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ec(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await K(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ht})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ht});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Be()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ht});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Be()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await K(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ht})})}catch(t){if(W(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await K(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ht})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+p_>s)return r;const{data:i,error:o}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ec(r);n!=null&&n.allowExpired||L_(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=M_(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,__(`${a}.${l}`)))throw new Au("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}}Bi.nextInstanceID={};const gj=Bi,yj="2.90.1";let Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";const vj={"X-Client-Info":`supabase-js-${Xs}/${yj}`},xj={headers:vj},wj={schema:"public"},bj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sj={};function Vi(e){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}function kj(e,t){if(Vi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _j(e){var t=kj(e,"string");return Vi(t)=="symbol"?t:t+""}function jj(e,t,n){return(t=_j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mp(Object(n),!0).forEach(function(r){jj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Ej=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Tj=()=>Headers,Nj=(e,t,n)=>{const r=Ej(n),s=Tj();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Se(Se({},o),{},{headers:u}))}};function Cj(e){return e.endsWith("/")?e:e+"/"}function Pj(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:d,global:h}=t,f={db:Se(Se({},l),s),auth:Se(Se({},u),i),realtime:Se(Se({},d),o),storage:{},global:Se(Se(Se({},h),a),{},{headers:Se(Se({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Aj(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Cj(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Rj=class extends gj{constructor(e){super(e)}},Oj=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Aj(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:wj,realtime:Sj,auth:Se(Se({},bj),{},{storageKey:o}),global:xj},l=Pj(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=Nj(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Se({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new hk(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new c_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new ak(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rj({url:this.authUrl.href,headers:Se(Se({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ck(this.realtimeUrl.href,Se(Se({},e),{},{params:Se(Se({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const zj=(e,t,n)=>new Oj(e,t,n);function Ij(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Ij()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Dj="https://ididcipzvtzdsqxhwljj.supabase.co",Lj="sb_publishable_gXt5buGl8UAHTfUZbVi33w_oemTkaF7",De=zj(Dj,Lj,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),It={async getTrips(){const{data:e,error:t}=await De.from("trips").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getTrip(e){const{data:t,error:n}=await De.from("trips").select("*").eq("id",e).single();if(n&&n.code!=="PGRST116")throw n;return t},async createTrip(e){const{data:t,error:n}=await De.from("trips").insert(e).select().single();if(n)throw n;return t},async updateTrip(e,t){const{data:n,error:r}=await De.from("trips").update(t).eq("id",e).select().single();if(r)throw r;return n},async deleteTrip(e){const{error:t}=await De.from("trips").delete().eq("id",e);if(t)throw t},async getEvents(e){const{data:t,error:n}=await De.from("events").select("*").eq("trip_id",e).order("day_offset",{ascending:!0}).order("sort_order",{ascending:!0});if(n)throw n;return t||[]},async createEvent(e){const{data:t,error:n}=await De.from("events").insert(e).select().single();if(n)throw n;return t},async updateEvent(e,t){const{data:n,error:r}=await De.from("events").update(t).eq("id",e).select().single();if(r)throw r;return n},async upsertEvents(e){const{data:t,error:n}=await De.from("events").upsert(e,{onConflict:"id"}).select();if(n)throw n;return t||[]},async deleteEvent(e){const{error:t}=await De.from("events").delete().eq("id",e);if(t)throw t},async getDocuments(e){const{data:t,error:n}=await De.from("documents").select("*").eq("trip_id",e).order("created_at",{ascending:!1});if(n)throw n;return t||[]},async createDocument(e){const{data:t,error:n}=await De.from("documents").insert(e).select().single();if(n)throw n;return t},async deleteDocument(e){const{error:t}=await De.from("documents").delete().eq("id",e);if(t)throw t}};function Mj(e){return De.channel("trips-channel").on("postgres_changes",{event:"*",schema:"public",table:"trips"},t=>{e({eventType:t.eventType,new:t.new,old:t.old})}).subscribe()}function $j(e,t){return De.channel(`events-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"events",filter:`trip_id=eq.${e}`},n=>{t({eventType:n.eventType,new:n.new,old:n.old})}).subscribe()}async function Fj(){try{const{error:e}=await De.from("trips").select("id").limit(1);return!e}catch{return!1}}const Ru=(e,t)=>t.some(n=>e instanceof n);let $p,Fp;function Uj(){return $p||($p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bj(){return Fp||(Fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ou=new WeakMap,rc=new WeakMap,al=new WeakMap;function Vj(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(br(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return al.set(t,e),t}function Wj(e){if(Ou.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Ou.set(e,t)}let zu={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ou.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function yv(e){zu=e(zu)}function Hj(e){return Bj().includes(e)?function(...t){return e.apply(Iu(this),t),br(this.request)}:function(...t){return br(e.apply(Iu(this),t))}}function Kj(e){return typeof e=="function"?Hj(e):(e instanceof IDBTransaction&&Wj(e),Ru(e,Uj())?new Proxy(e,zu):e)}function br(e){if(e instanceof IDBRequest)return Vj(e);if(rc.has(e))return rc.get(e);const t=Kj(e);return t!==e&&(rc.set(e,t),al.set(t,e)),t}const Iu=e=>al.get(e);function qj(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=br(o);return r&&o.addEventListener("upgradeneeded",l=>{r(br(o.result),l.oldVersion,l.newVersion,br(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Gj=["get","getKey","getAll","getAllKeys","count"],Jj=["put","add","delete","clear"],sc=new Map;function Up(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(sc.get(t))return sc.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Jj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gj.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return sc.set(t,i),i}yv(e=>({...e,get:(t,n,r)=>Up(t,n)||e.get(t,n,r),has:(t,n)=>!!Up(t,n)||e.has(t,n)}));const Yj=["continue","continuePrimaryKey","advance"],Bp={},Du=new WeakMap,vv=new WeakMap,Qj={get(e,t){if(!Yj.includes(t))return e[t];let n=Bp[t];return n||(n=Bp[t]=function(...r){Du.set(this,vv.get(this)[t](...r))}),n}};async function*Xj(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Qj);for(vv.set(n,t),al.set(n,Iu(t));t;)yield n,t=await(Du.get(n)||t.continue()),Du.delete(n)}function Vp(e,t){return t===Symbol.asyncIterator&&Ru(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Ru(e,[IDBIndex,IDBObjectStore])}yv(e=>({...e,get(t,n,r){return Vp(t,n)?Xj:e.get(t,n,r)},has(t,n){return Vp(t,n)||e.has(t,n)}}));const Zj="escher-travel-db",e2=1;let Po=null;async function Ge(){return Po||(Po=await qj(Zj,e2,{upgrade(e){if(e.objectStoreNames.contains("trips")||e.createObjectStore("trips",{keyPath:"id"}),!e.objectStoreNames.contains("events")){const t=e.createObjectStore("events",{keyPath:"id"});t.createIndex("by-trip","tripId"),t.createIndex("by-day",["tripId","dayOffset"])}if(!e.objectStoreNames.contains("documents")){const t=e.createObjectStore("documents",{keyPath:"id"});t.createIndex("by-trip","tripId"),t.createIndex("by-category","category")}e.objectStoreNames.contains("syncQueue")||e.createObjectStore("syncQueue",{keyPath:"id",autoIncrement:!0}).createIndex("by-synced","synced"),e.objectStoreNames.contains("meta")||e.createObjectStore("meta",{keyPath:"key"})}}),Po)}async function xv(){return(await Ge()).getAll("trips")}async function Wp(e){return(await Ge()).get("trips",e)}async function Lu(e){await(await Ge()).put("trips",e)}async function t2(e){const n=(await Ge()).transaction(["trips","events","documents"],"readwrite");await n.objectStore("trips").delete(e);let s=await n.objectStore("events").index("by-trip").openCursor(e);for(;s;)await s.delete(),s=await s.continue();let o=await n.objectStore("documents").index("by-trip").openCursor(e);for(;o;)await o.delete(),o=await o.continue();await n.done}async function Hp(e){return(await Ge()).getAllFromIndex("events","by-trip",e)}async function Kp(e){await(await Ge()).put("events",e)}async function wv(e){const n=(await Ge()).transaction("events","readwrite");await Promise.all(e.map(r=>n.store.put(r))),await n.done}async function n2(e){await(await Ge()).delete("events",e)}async function r2(e){return(await Ge()).getAllFromIndex("documents","by-trip",e)}async function s2(e){await(await Ge()).put("documents",e)}async function i2(e){await(await Ge()).delete("documents",e)}async function on(e){await(await Ge()).add("syncQueue",e)}async function o2(){return(await Ge()).getAllFromIndex("syncQueue","by-synced",0)}async function a2(e){const t=await Ge(),n=await t.get("syncQueue",e);n&&(n.synced=!0,await t.put("syncQueue",n))}async function l2(){const t=(await Ge()).transaction("syncQueue","readwrite");let r=await t.store.index("by-synced").openCursor(1);for(;r;)await r.delete(),r=await r.continue();await t.done}async function qp(e){const n=await(await Ge()).get("meta",e);return n==null?void 0:n.value}async function Mu(e,t){await(await Ge()).put("meta",{key:e,value:t})}function ic(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Ae(){return new Date().toISOString()}function c2(){return navigator.onLine}function u2(e){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}const kt={async getTrips(){return xv()},async getTrip(e){return Wp(e)},async createTrip(e){const t={...e,id:ic(),createdAt:Ae(),updatedAt:Ae()};return await Lu(t),await on({type:"create",entity:"trip",entityId:t.id,data:t,timestamp:Ae(),synced:!1}),t},async updateTrip(e,t){const n=await Wp(e);if(!n)return;const r={...n,...t,id:e,updatedAt:Ae()};return await Lu(r),await on({type:"update",entity:"trip",entityId:e,data:r,timestamp:Ae(),synced:!1}),r},async deleteTrip(e){await t2(e),await on({type:"delete",entity:"trip",entityId:e,timestamp:Ae(),synced:!1})},async getEvents(e){return Hp(e)},async createEvent(e){const t={...e,id:ic(),createdAt:Ae(),updatedAt:Ae()};return await Kp(t),await on({type:"create",entity:"event",entityId:t.id,data:t,timestamp:Ae(),synced:!1}),t},async updateEvent(e,t,n){const s=(await Hp(t)).find(o=>o.id===e);if(!s)return;const i={...s,...n,id:e,tripId:t,updatedAt:Ae()};return await Kp(i),await on({type:"update",entity:"event",entityId:e,data:i,timestamp:Ae(),synced:!1}),i},async updateEvents(e,t){const n=t.map(r=>({...r,tripId:e,updatedAt:Ae()}));await wv(n),await on({type:"update",entity:"event",entityId:`batch-${e}`,data:n,timestamp:Ae(),synced:!1})},async deleteEvent(e){await n2(e),await on({type:"delete",entity:"event",entityId:e,timestamp:Ae(),synced:!1})},async getDocuments(e){return r2(e)},async createDocument(e){const t={...e,id:ic(),createdAt:Ae(),updatedAt:Ae()};return await s2(t),await on({type:"create",entity:"document",entityId:t.id,data:t,timestamp:Ae(),synced:!1}),t},async deleteDocument(e){await i2(e),await on({type:"delete",entity:"document",entityId:e,timestamp:Ae(),synced:!1})},async getCurrentTripId(){return qp("currentTripId")||null},async setCurrentTripId(e){await Mu("currentTripId",e)},async getLastSyncTime(){return qp("lastSyncTime")||null},async setLastSyncTime(e){await Mu("lastSyncTime",e)}},Gp={id:"default-trip",name:"Bali Trip",startDate:"2024-08-21",duration:9,coverImage:"https://images.unsplash.com/photo-1555400038-63f5ba517a47?auto=format&fit=crop&w=1000&q=80",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},d2=[{id:"1",tripId:"default-trip",type:"Transport",title:"Arrive at Zurich International Airport",time:"03:00 PM",description:"Terminal 1, Flight LX180",dayOffset:0,duration:"45m"},{id:"2",tripId:"default-trip",type:"Eat",title:"Elfrentes Roasting",time:"04:00 PM",endTime:"11:00 PM",status:"Open now",rating:4.7,reviews:2735,description:"Specialty coffee roaster with light bites.",dayOffset:0,travelTime:"30m",travelMode:"drive",duration:"1h 30m"},{id:"3",tripId:"default-trip",type:"Play",title:"Spend the day exploring Zurich",time:"05:00 PM",description:"Old Town, Lake Zurich, and Bahnhofstrasse.",dayOffset:0,travelTime:"15m",travelMode:"walk",duration:"3h"},{id:"4",tripId:"default-trip",type:"Eat",title:"Elmira fine dining",time:"07:00 PM",rating:4.9,reviews:854,description:"Modern Swiss cuisine.",dayOffset:0,travelTime:"20m",travelMode:"transit",duration:"2h"},{id:"5",tripId:"default-trip",type:"Stay",title:"BVLGARI Hotel",time:"07:45 PM",description:"Check-in confirmed.",dayOffset:0,travelTime:"10m",travelMode:"drive"},{id:"6",tripId:"default-trip",type:"Eat",title:"Cafe Odeon",time:"09:00 AM",description:"Historic Art Nouveau caf.",dayOffset:1,duration:"1h"},{id:"7",tripId:"default-trip",type:"Play",title:"Kunsthaus Zrich",time:"11:00 AM",description:"Visit the art museum.",dayOffset:1,duration:"2h 15m"}];async function h2(){if((await xv()).length===0){await Lu(Gp);const t=Ae(),n=d2.map(r=>({...r,createdAt:t,updatedAt:t}));await wv(n),await Mu("currentTripId",Gp.id),console.log("[Storage] Initialized with default trip data")}}function Wi(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const f2="a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",bv=b.createContext(void 0);function Jp(e){return{id:e.id,type:e.type,title:e.title,time:e.time,endTime:e.end_time||void 0,description:e.description||void 0,rating:e.rating||void 0,reviews:e.reviews||void 0,image:e.image||void 0,status:e.status||void 0,duration:e.duration||void 0,googleMapsLink:e.google_maps_link||void 0,travelTime:e.travel_time||void 0,travelDistance:e.travel_distance||void 0,travelMode:e.travel_mode||void 0,dayOffset:e.day_offset,congestion:e.congestion||void 0,openingHours:e.opening_hours||void 0,placeId:e.place_id||void 0,lat:e.lat||void 0,lng:e.lng||void 0,address:e.address||void 0,isStart:e.is_start||!1,isEnd:e.is_end||!1}}function p2(e,t,n){return{id:e.id,trip_id:t,type:e.type,title:e.title,time:e.time,end_time:e.endTime||null,description:e.description||null,rating:e.rating||null,reviews:e.reviews||null,image:e.image||null,status:e.status||null,duration:e.duration||null,google_maps_link:e.googleMapsLink||null,travel_time:e.travelTime||null,travel_distance:e.travelDistance||null,travel_mode:e.travelMode||null,day_offset:e.dayOffset??0,sort_order:n,congestion:e.congestion||null,place_id:e.placeId||null,lat:e.lat||null,lng:e.lng||null,address:e.address||null,opening_hours:e.openingHours||null,is_start:e.isStart||null,is_end:e.isEnd||null}}function m2({children:e}){const[t,n]=b.useState(!0),[r,s]=b.useState(!0),[i,o]=b.useState(null),[a,l]=b.useState([]),[u,d]=b.useState(""),[h,f]=b.useState(new Date),[p,y]=b.useState(9),[x,w]=b.useState(""),[m,g]=b.useState([]),v=Yi.useRef([]),j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=async(P,R)=>{try{let A=R;if(A||(r?A=await It.getTrip(P)||void 0:A=await kt.getTrip(P)),A){d(A.name),f(new Date(A.start_date)),y(A.duration),w(A.cover_image||""),o(A.id);let L=[];r?L=await It.getEvents(P):L=await kt.getEvents(P),g(L.map(Jp)),console.log(`[TripContext] Loaded trip: ${A.name} (${A.id})`)}}catch(A){console.error("[TripContext] Failed to load trip details",A)}},_=b.useCallback(async()=>{try{const P=await Fj();s(P);let R=[];if(P)console.log("[TripContext] Loading ALL trips from Supabase..."),R=await It.getTrips(),l(R);else{console.log("[TripContext] Supabase unavailable, using IndexedDB..."),await h2();const L=await kt.getCurrentTripId();if(L){const M=await kt.getTrip(L);M&&(R=[M])}}let A=i;if(!A){const L=await kt.getCurrentTripId();if(L&&R.find(M=>M.id===L))A=L;else if(R.length>0)A=R[0].id;else{const M=f2;if(console.log("[TripContext] No trips found, creating default..."),P){const ee=await It.createTrip({id:M,name:"My Trip to Bali",start_date:new Date().toISOString().split("T")[0],duration:9,cover_image:null});R=[ee],l(R),A=ee.id}}}A&&await S(A)}catch(P){console.error("[TripContext] Load error:",P)}finally{n(!1)}},[i]),E=async()=>{const P=Wi(),R=new Date().toISOString().split("T")[0];try{const A={id:P,name:"New Trip",start_date:R,duration:5,cover_image:null};if(r){const L=await It.createTrip(A);l(M=>[L,...M]),await N(L.id)}else alert("Offline trip creation not fully supported in this demo yet.")}catch(A){console.error("Failed to create trip",A)}},N=async P=>{n(!0);const R=a.find(A=>A.id===P);R?(d(R.name),o(P),await kt.setCurrentTripId(P),await S(P,R)):(await kt.setCurrentTripId(P),await S(P)),n(!1)};b.useEffect(()=>{v.current=m},[m]),b.useEffect(()=>{_()},[]),b.useEffect(()=>{if(!r)return;console.log("[TripContext] Setting up global real-time subscriptions...");const P=Mj(A=>{if(A.eventType==="INSERT"&&A.new)l(L=>[A.new,...L]);else if(A.eventType==="DELETE"&&A.old)l(L=>L.filter(M=>M.id!==A.old.id));else if(A.eventType==="UPDATE"&&A.new){const L=A.new;l(M=>M.map(ee=>ee.id===L.id?L:ee)),i===L.id&&(d(L.name),f(new Date(L.start_date)),y(L.duration),w(L.cover_image||""))}});let R;return i&&(R=$j(i,A=>{console.log("[TripContext] Real-time event update:",A.eventType),It.getEvents(i).then(L=>{g(L.map(Jp))})})),()=>{P.unsubscribe(),R&&R.unsubscribe()}},[r,i]);const T=async(P,R)=>{if(!(!R||R.length<3||R==="New Trip"))try{console.log(`[TripContext] Auto-fetching image for: ${R}`);const A=await fetch("/api/parse-place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:`https://www.google.com/maps/search/${encodeURIComponent(R)}`})});if(A.ok){const L=await A.json();if(L.photos&&L.photos.length>0){const M=L.photos[0];console.log(`[TripContext] Found image for ${R}:`,M.substring(0,50)+"..."),P===i&&w(M),r?await It.updateTrip(P,{cover_image:M}):await kt.updateTrip(P,{coverImage:M}),l(ee=>ee.map(je=>je.id===P?{...je,cover_image:M}:je))}}}catch(A){console.error("[TripContext] Failed to fetch trip image:",A)}},C=async P=>{if(!i)return;const R={};if(P.name!==void 0&&(d(P.name),l(A=>A.map(L=>L.id===i?{...L,name:P.name}:L)),R.name=P.name),P.startDate!==void 0){f(P.startDate);const A=P.startDate.toISOString().split("T")[0];l(L=>L.map(M=>M.id===i?{...M,start_date:A}:M)),R.start_date=A}if(P.duration!==void 0&&(y(P.duration),l(A=>A.map(L=>L.id===i?{...L,duration:P.duration}:L)),R.duration=P.duration),P.coverImage!==void 0&&(w(P.coverImage),l(A=>A.map(L=>L.id===i?{...L,cover_image:P.coverImage}:L)),R.cover_image=P.coverImage),Object.keys(R).length>0)if(r)await It.updateTrip(i,R);else{const A={name:R.name,startDate:R.start_date,duration:R.duration,coverImage:R.cover_image};Object.keys(A).forEach(L=>A[L]===void 0&&delete A[L]),await kt.updateTrip(i,A)}P.name&&T(i,P.name)},I=async P=>C({name:P}),H=async P=>C({startDate:P}),Q=async P=>C({duration:P}),se=async P=>C({coverImage:P}),fe=async P=>{const R=v.current;let A;if(typeof P=="function"?A=P(R):A=P,v.current=A,g(A),i)try{if(r){const L=A.map((M,ee)=>p2(M,i,ee));await It.upsertEvents(L)}else{const L=A.map(M=>({...M,tripId:i,dayOffset:M.dayOffset??0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));await kt.updateEvents(i,L)}}catch(L){console.error("[TripContext] Failed to persist events. Details:",JSON.stringify(L,null,2)),alert(`Failed to save changes. Server says: ${L.message||"Unknown error"}`)}},ne=async P=>{const R=v.current,A=R.filter(L=>L.id!==P);if(v.current=A,g(A),i)try{r?await It.deleteEvent(P):await kt.deleteEvent(P)}catch(L){console.error("[TripContext] Failed to delete event:",L),v.current=R,g(R)}},D=b.useMemo(()=>Array.from({length:p},(P,R)=>{const A=new Date(h);return A.setUTCDate(A.getUTCDate()+R),{dateObj:A,dayName:j[A.getUTCDay()],dateNum:A.getUTCDate(),fullDate:`${j[A.getUTCDay()]}, ${A.getUTCDate()} ${k[A.getUTCMonth()]}`,offset:R}}),[h,p]);return c.jsx(bv.Provider,{value:{isLoading:t,isOnline:r,tripName:u,setTripName:I,startDate:h,setStartDate:H,tripDuration:p,setTripDuration:Q,placesCoverImage:x,setPlacesCoverImage:se,events:m,setEvents:fe,deleteEvent:ne,tripDates:D,currentTripId:i,trips:a,createNewTrip:E,switchTrip:N,refreshData:_,updateTripDetails:C},children:e})}function sn(){const e=b.useContext(bv);if(e===void 0)throw new Error("useTrip must be used within a TripProvider");return e}/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sv=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...y2,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Sv("lucide",s),...a},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(v2,{ref:i,iconNode:t,className:Sv(`lucide-${g2(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=J("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=J("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=J("CarFront",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=J("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=J("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=J("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=J("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=J("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=J("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=J("Hotel",[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=J("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=J("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=J("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=J("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=J("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=J("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=J("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=J("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=J("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=J("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=J("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=J("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=J("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=J("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=J("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=J("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Zp(){const e=zs(),t=n=>e.pathname===n;return c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-xl border-t border-zinc-200 px-6 py-2 pb-6 shadow-[0_-4px_20px_rgba(0,0,0,0.03)]",children:c.jsxs("div",{className:"flex justify-between items-center max-w-sm mx-auto h-12",children:[c.jsx(Hs,{to:"/summary",icon:c.jsx(C2,{size:20,strokeWidth:2.5}),active:t("/summary"),label:"Summary"}),c.jsx(Hs,{to:"/places",icon:c.jsx(Ie,{size:20,strokeWidth:2.5}),active:t("/places"),label:"Places"}),c.jsx(Hs,{to:"/",icon:c.jsx(js,{size:20,strokeWidth:2.5}),active:t("/"),label:"Itinerary"}),c.jsx(Hs,{to:"/map",icon:c.jsx(Cv,{size:20,strokeWidth:2.5}),active:t("/map"),label:"Route"}),c.jsx(Hs,{to:"/documents",icon:c.jsx(Qo,{size:20,strokeWidth:2.5}),active:t("/documents"),label:"Documents"})]})})}function Hs({to:e,icon:t,active:n,label:r}){return c.jsxs(Ca,{to:e,className:`
                relative flex flex-col items-center justify-center transition-all duration-200 mt-2
                ${n?"text-[#007AFF] scale-100":"text-zinc-400 hover:text-zinc-600 active:scale-95"}
            `,children:[c.jsx("div",{className:`p-1.5 rounded-xl transition-colors ${n?"bg-blue-50":"bg-transparent"}`,children:t}),n&&c.jsx("div",{className:"w-1 h-1 bg-[#007AFF] rounded-full mt-1"})]})}const Rv="/api";let Ro=!1;const Fu=new Set;let Xo={isSyncing:!1,lastSyncTime:null,pendingActions:0,error:null};function Vr(e){Xo={...Xo,...e},Fu.forEach(t=>t(Xo))}function B2(e){return Fu.add(e),e(Xo),()=>Fu.delete(e)}async function V2(){if(Ro)return console.log("[Sync] Already syncing, skipping"),!1;if(!navigator.onLine)return console.log("[Sync] Offline, skipping"),Vr({error:"Offline - changes saved locally"}),!1;Ro=!0,Vr({isSyncing:!0,error:null});try{const e=await o2();if(Vr({pendingActions:e.length}),e.length===0)return console.log("[Sync] No pending actions"),Vr({isSyncing:!1}),Ro=!1,!0;console.log(`[Sync] Processing ${e.length} actions`);for(const n of e)try{await W2(n),await a2(n.id)}catch(r){console.error(`[Sync] Failed to sync action ${n.id}:`,r)}await l2();const t=new Date().toISOString();return await kt.setLastSyncTime(t),Vr({isSyncing:!1,lastSyncTime:t,pendingActions:0}),console.log("[Sync] Completed successfully"),!0}catch(e){return console.error("[Sync] Error:",e),Vr({isSyncing:!1,error:e instanceof Error?e.message:"Sync failed"}),!1}finally{Ro=!1}}async function W2(e){const t=H2(e.entity,e.entityId);switch(e.type){case"create":await fetch(`${Rv}/${e.entity}s`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"update":await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"delete":await fetch(t,{method:"DELETE"});break}}function H2(e,t){return`${Rv}/${e}s/${t}`}function K2(){const[e,t]=b.useState(c2()),[n,r]=b.useState({isSyncing:!1,lastSyncTime:null,pendingActions:0,error:null});b.useEffect(()=>{const i=u2(t),o=B2(r);return()=>{i(),o()}},[]);const s=b.useCallback(async()=>{await V2()},[]);return{isOnline:e,syncStatus:n,manualSync:s}}const uh=b.createContext({});function _n(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}const cl=b.createContext(null),ul=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class q2 extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function G2({children:e,isPresent:t}){const n=b.useId(),r=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=b.useContext(ul);return b.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=s.current;if(t||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),c.jsx(q2,{isPresent:t,childRef:r,sizeRef:s,children:b.cloneElement(e,{ref:r})})}const J2=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=_n(Y2),l=b.useId(),u=b.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),d=b.useMemo(()=>({id:l,initial:t,isPresent:n,custom:s,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),u]:[n,u]);return b.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=c.jsx(G2,{isPresent:n,children:e})),c.jsx(cl.Provider,{value:d,children:e})};function Y2(){return new Map}function Ov(e=!0){const t=b.useContext(cl);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=b.useId();b.useEffect(()=>{e&&s(i)},[e]);const o=b.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Oo=e=>e.key||"";function em(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const dh=typeof window<"u",dl=dh?b.useLayoutEffect:b.useEffect,Ke=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=Ov(o),u=b.useMemo(()=>em(e),[e]),d=o&&!a?[]:u.map(Oo),h=b.useRef(!0),f=b.useRef(u),p=_n(()=>new Map),[y,x]=b.useState(u),[w,m]=b.useState(u);dl(()=>{h.current=!1,f.current=u;for(let j=0;j<w.length;j++){const k=Oo(w[j]);d.includes(k)?p.delete(k):p.get(k)!==!0&&p.set(k,!1)}},[w,d.length,d.join("-")]);const g=[];if(u!==y){let j=[...u];for(let k=0;k<w.length;k++){const S=w[k],_=Oo(S);d.includes(_)||(j.splice(k,0,S),g.push(S))}i==="wait"&&g.length&&(j=g),m(em(j)),x(u);return}const{forceRender:v}=b.useContext(uh);return c.jsx(c.Fragment,{children:w.map(j=>{const k=Oo(j),S=o&&!a?!1:u===w||d.includes(k),_=()=>{if(p.has(k))p.set(k,!0);else return;let E=!0;p.forEach(N=>{N||(E=!1)}),E&&(v==null||v(),m(f.current),o&&(l==null||l()),r&&r())};return c.jsx(J2,{isPresent:S,initial:!h.current||n?void 0:!1,custom:S?void 0:t,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:_,children:j},k)})})},st=e=>e;let Q2=st,zv=st;function hh(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cr=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},mn=e=>e*1e3,gn=e=>e/1e3,X2={useManualTiming:!1};function Z2(e){let t=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){i.has(u)&&(l.schedule(u),e()),u(o)}const l={schedule:(u,d=!1,h=!1)=>{const p=h&&r?t:n;return d&&i.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(o=u,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(a),t.clear(),r=!1,s&&(s=!1,l.process(u))}};return l}const zo=["read","resolveKeyframes","update","preRender","render","postRender"],eE=40;function Iv(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=zo.reduce((m,g)=>(m[g]=Z2(i),m),{}),{read:a,resolveKeyframes:l,update:u,preRender:d,render:h,postRender:f}=o,p=()=>{const m=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(m-s.timestamp,eE),1),s.timestamp=m,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(p))},y=()=>{n=!0,r=!0,s.isProcessing||e(p)};return{schedule:zo.reduce((m,g)=>{const v=o[g];return m[g]=(j,k=!1,S=!1)=>(n||y(),v.schedule(j,k,S)),m},{}),cancel:m=>{for(let g=0;g<zo.length;g++)o[zo[g]].cancel(m)},state:s,steps:o}}const{schedule:le,cancel:Kt,state:Le,steps:oc}=Iv(typeof requestAnimationFrame<"u"?requestAnimationFrame:st,!0),Dv=b.createContext({strict:!1}),tm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ns={};for(const e in tm)Ns[e]={isEnabled:t=>tm[e].some(n=>!!t[n])};function tE(e){for(const t in e)Ns[t]={...Ns[t],...e[t]}}const nE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Oa(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nE.has(e)}let Lv=e=>!Oa(e);function rE(e){e&&(Lv=t=>t.startsWith("on")?!Oa(t):e(t))}try{rE(require("@emotion/is-prop-valid").default)}catch{}function sE(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Lv(s)||n===!0&&Oa(s)||!t&&!Oa(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function iE(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const hl=b.createContext({});function Hi(e){return typeof e=="string"||Array.isArray(e)}function fl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const fh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ph=["initial",...fh];function pl(e){return fl(e.animate)||ph.some(t=>Hi(e[t]))}function Mv(e){return!!(pl(e)||e.variants)}function oE(e,t){if(pl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Hi(n)?n:void 0,animate:Hi(r)?r:void 0}}return e.inherit!==!1?t:{}}function aE(e){const{initial:t,animate:n}=oE(e,b.useContext(hl));return b.useMemo(()=>({initial:t,animate:n}),[nm(t),nm(n)])}function nm(e){return Array.isArray(e)?e.join(" "):e}const lE=Symbol.for("motionComponentSymbol");function os(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function cE(e,t,n){return b.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):os(n)&&(n.current=r))},[t])}const mh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uE="framerAppearId",$v="data-"+mh(uE),{schedule:gh}=Iv(queueMicrotask,!1),Fv=b.createContext({});function dE(e,t,n,r,s){var i,o;const{visualElement:a}=b.useContext(hl),l=b.useContext(Dv),u=b.useContext(cl),d=b.useContext(ul).reducedMotion,h=b.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,p=b.useContext(Fv);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&hE(h.current,n,s,p);const y=b.useRef(!1);b.useInsertionEffect(()=>{f&&y.current&&f.update(n,u)});const x=n[$v],w=b.useRef(!!x&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return dl(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),gh.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,x)}),w.current=!1))}),f}function hE(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Uv(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&os(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function Uv(e){if(e)return e.options.allowProjection!==!1?e.projection:Uv(e.parent)}function fE({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){var i,o;e&&tE(e);function a(u,d){let h;const f={...b.useContext(ul),...u,layoutId:pE(u)},{isStatic:p}=f,y=aE(u),x=r(u,p);if(!p&&dh){mE();const w=gE(f);h=w.MeasureLayout,y.visualElement=dE(s,x,f,t,w.ProjectionNode)}return c.jsxs(hl.Provider,{value:y,children:[h&&y.visualElement?c.jsx(h,{visualElement:y.visualElement,...f}):null,n(s,u,cE(x,y.visualElement,d),x,p,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=b.forwardRef(a);return l[lE]=s,l}function pE({layoutId:e}){const t=b.useContext(uh).id;return t&&e!==void 0?t+"-"+e:e}function mE(e,t){b.useContext(Dv).strict}function gE(e){const{drag:t,layout:n}=Ns;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const yE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yh(e){return typeof e!="string"||e.includes("-")?!1:!!(yE.indexOf(e)>-1||/[A-Z]/u.test(e))}function rm(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vh(e,t,n,r){if(typeof t=="function"){const[s,i]=rm(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=rm(r);t=t(n!==void 0?n:e.custom,s,i)}return t}const Uu=e=>Array.isArray(e),vE=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),xE=e=>Uu(e)?e[e.length-1]||0:e,We=e=>!!(e&&e.getVelocity);function Zo(e){const t=We(e)?e.get():e;return vE(t)?t.toValue():t}function wE({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,s,i){const o={latestValues:bE(r,s,i,e),renderState:t()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Bv=e=>(t,n)=>{const r=b.useContext(hl),s=b.useContext(cl),i=()=>wE(e,t,r,s);return n?i():_n(i)};function bE(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=Zo(i[f]);let{initial:o,animate:a}=e;const l=pl(e),u=Mv(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!fl(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const y=vh(e,f[p]);if(y){const{transitionEnd:x,transition:w,...m}=y;for(const g in m){let v=m[g];if(Array.isArray(v)){const j=d?v.length-1:0;v=v[j]}v!==null&&(s[g]=v)}for(const g in x)s[g]=x[g]}}}return s}const Is=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Or=new Set(Is),Vv=e=>t=>typeof t=="string"&&t.startsWith(e),Wv=Vv("--"),SE=Vv("var(--"),xh=e=>SE(e)?kE.test(e.split("/*")[0].trim()):!1,kE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,rn=(e,t,n)=>n>t?t:n<e?e:n,Ds={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ki={...Ds,transform:e=>rn(0,1,e)},Io={...Ds,default:1},ro=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),En=ro("deg"),tn=ro("%"),q=ro("px"),_E=ro("vh"),jE=ro("vw"),sm={...tn,parse:e=>tn.parse(e)/100,transform:e=>tn.transform(e*100)},EE={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q},TE={rotate:En,rotateX:En,rotateY:En,rotateZ:En,scale:Io,scaleX:Io,scaleY:Io,scaleZ:Io,skew:En,skewX:En,skewY:En,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Ki,originX:sm,originY:sm,originZ:q},im={...Ds,transform:Math.round},wh={...EE,...TE,zIndex:im,size:q,fillOpacity:Ki,strokeOpacity:Ki,numOctaves:im},NE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},CE=Is.length;function PE(e,t,n){let r="",s=!0;for(let i=0;i<CE;i++){const o=Is[i],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Hv(a,wh[o]);if(!l){s=!1;const d=NE[o]||o;r+=`${d}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function bh(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Or.has(l)){o=!0;continue}else if(Wv(l)){s[l]=u;continue}else{const d=Hv(u,wh[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(t.transform||(o||n?r.transform=PE(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const AE={offset:"stroke-dashoffset",array:"stroke-dasharray"},RE={offset:"strokeDashoffset",array:"strokeDasharray"};function OE(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?AE:RE;e[i.offset]=q.transform(-r);const o=q.transform(t),a=q.transform(n);e[i.array]=`${o} ${a}`}function om(e,t,n){return typeof e=="string"?e:q.transform(t+n*e)}function zE(e,t,n){const r=om(t,e.x,e.width),s=om(n,e.y,e.height);return`${r} ${s}`}function Sh(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h){if(bh(e,u,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:y}=e;f.transform&&(y&&(p.transform=f.transform),delete f.transform),y&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=zE(y,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&OE(f,o,a,l,!1)}const kh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Kv=()=>({...kh(),attrs:{}}),_h=e=>typeof e=="string"&&e.toLowerCase()==="svg";function qv(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const Gv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jv(e,t,n,r){qv(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Gv.has(s)?s:mh(s),t.attrs[s])}const za={};function IE(e){Object.assign(za,e)}function Yv(e,{layout:t,layoutId:n}){return Or.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!za[e]||e==="opacity")}function jh(e,t,n){var r;const{style:s}=e,i={};for(const o in s)(We(s[o])||t.style&&We(t.style[o])||Yv(o,e)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Qv(e,t,n){const r=jh(e,t,n);for(const s in e)if(We(e[s])||We(t[s])){const i=Is.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}function DE(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const am=["x","y","width","height","cx","cy","r"],LE={useVisualState:Bv({scrapeMotionValuesFromProps:Qv,createRenderState:Kv,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!e.drag;if(!i){for(const a in s)if(Or.has(a)){i=!0;break}}if(!i)return;let o=!t;if(t)for(let a=0;a<am.length;a++){const l=am[a];e[l]!==t[l]&&(o=!0)}o&&le.read(()=>{DE(n,r),le.render(()=>{Sh(r,s,_h(n.tagName),e.transformTemplate),Jv(n,r)})})}})},ME={useVisualState:Bv({scrapeMotionValuesFromProps:jh,createRenderState:kh})};function Xv(e,t,n){for(const r in t)!We(t[r])&&!Yv(r,n)&&(e[r]=t[r])}function $E({transformTemplate:e},t){return b.useMemo(()=>{const n=kh();return bh(n,t,e),Object.assign({},n.vars,n.style)},[t])}function FE(e,t){const n=e.style||{},r={};return Xv(r,n,e),Object.assign(r,$E(e,t)),r}function UE(e,t){const n={},r=FE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function BE(e,t,n,r){const s=b.useMemo(()=>{const i=Kv();return Sh(i,t,_h(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Xv(i,e.style,e),s.style={...i,...s.style}}return s}function VE(e=!1){return(n,r,s,{latestValues:i},o)=>{const l=(yh(n)?BE:UE)(r,i,o,n),u=sE(r,typeof n=="string",e),d=n!==b.Fragment?{...u,...l,ref:s}:{},{children:h}=r,f=b.useMemo(()=>We(h)?h.get():h,[h]);return b.createElement(n,{...d,children:f})}}function WE(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...yh(r)?LE:ME,preloadedFeatures:e,useRender:VE(s),createVisualElement:t,Component:r};return fE(o)}}function Zv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ml(e,t,n){const r=e.getProps();return vh(r,t,n!==void 0?n:r.custom,e)}const ex=hh(()=>window.ScrollTimeline!==void 0);class HE{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(s=>{if(ex()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class KE extends HE{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Eh(e,t){return e?e[t]||e.default||e:void 0}const Bu=2e4;function tx(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Bu;)t+=n,r=e.next(t);return t>=Bu?1/0:t}function Th(e){return typeof e=="function"}function lm(e,t){e.timeline=t,e.onfinish=null}const Nh=e=>Array.isArray(e)&&typeof e[0]=="number",qE={linearEasing:void 0};function GE(e,t){const n=hh(e);return()=>{var r;return(r=qE[t])!==null&&r!==void 0?r:n()}}const Ia=GE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nx=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=e(Cr(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function rx(e){return!!(typeof e=="function"&&Ia()||!e||typeof e=="string"&&(e in Vu||Ia())||Nh(e)||Array.isArray(e)&&e.every(rx))}const Zs=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Vu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zs([0,.65,.55,1]),circOut:Zs([.55,0,1,.45]),backIn:Zs([.31,.01,.66,-.59]),backOut:Zs([.33,1.53,.69,.99])};function sx(e,t){if(e)return typeof e=="function"&&Ia()?nx(e,t):Nh(e)?Zs(e):Array.isArray(e)?e.map(n=>sx(n,t)||Vu.easeOut):Vu[e]}const Dt={x:!1,y:!1};function ix(){return Dt.x||Dt.y}function ox(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function ax(e,t){const n=ox(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function cm(e){return t=>{t.pointerType==="touch"||ix()||e(t)}}function JE(e,t,n={}){const[r,s,i]=ax(e,n),o=cm(a=>{const{target:l}=a,u=t(a);if(typeof u!="function"||!l)return;const d=cm(h=>{u(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const lx=(e,t)=>t?e===t?!0:lx(e,t.parentElement):!1,Ch=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,YE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QE(e){return YE.has(e.tagName)||e.tabIndex!==-1}const ei=new WeakSet;function um(e){return t=>{t.key==="Enter"&&e(t)}}function ac(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const XE=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=um(()=>{if(ei.has(n))return;ac(n,"down");const s=um(()=>{ac(n,"up")}),i=()=>ac(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function dm(e){return Ch(e)&&!ix()}function ZE(e,t,n={}){const[r,s,i]=ax(e,n),o=a=>{const l=a.currentTarget;if(!dm(a)||ei.has(l))return;ei.add(l);const u=t(a),d=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!dm(p)||!ei.has(l))&&(ei.delete(l),typeof u=="function"&&u(p,{success:y}))},h=p=>{d(p,n.useGlobalTarget||lx(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{!QE(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",u=>XE(u,s),s)}),i}function eT(e){return e==="x"||e==="y"?Dt[e]?null:(Dt[e]=!0,()=>{Dt[e]=!1}):Dt.x||Dt.y?null:(Dt.x=Dt.y=!0,()=>{Dt.x=Dt.y=!1})}const cx=new Set(["width","height","top","left","right","bottom",...Is]);let ea;function tT(){ea=void 0}const nn={now:()=>(ea===void 0&&nn.set(Le.isProcessing||X2.useManualTiming?Le.timestamp:performance.now()),ea),set:e=>{ea=e,queueMicrotask(tT)}};function Ph(e,t){e.indexOf(t)===-1&&e.push(t)}function Ah(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function nT([...e],t,n){const r=t<0?e.length+t:t;if(r>=0&&r<e.length){const s=n<0?e.length+n:n,[i]=e.splice(t,1);e.splice(s,0,i)}return e}class Rh{constructor(){this.subscriptions=[]}add(t){return Ph(this.subscriptions,t),()=>Ah(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Oh(e,t){return t?e*(1e3/t):0}const hm=30,rT=e=>!isNaN(parseFloat(e)),fi={current:void 0};class sT{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=nn.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=nn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=rT(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Rh);const r=this.events[t].add(n);return t==="change"?()=>{r(),le.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return fi.current&&fi.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=nn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>hm)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,hm);return Oh(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xt(e,t){return new sT(e,t)}function iT(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Xt(n))}function oT(e,t){const n=ml(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=xE(i[o]);iT(e,o,a)}}function aT(e){return!!(We(e)&&e.add)}function Wu(e,t){const n=e.getValue("willChange");if(aT(n))return n.add(t)}function ux(e){return e.props[$v]}const dx=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,lT=1e-7,cT=12;function uT(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=dx(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>lT&&++a<cT);return o}function so(e,t,n,r){if(e===t&&n===r)return st;const s=i=>uT(i,0,1,e,n);return i=>i===0||i===1?i:dx(s(i),t,r)}const hx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fx=e=>t=>1-e(1-t),px=so(.33,1.53,.69,.99),zh=fx(px),mx=hx(zh),gx=e=>(e*=2)<1?.5*zh(e):.5*(2-Math.pow(2,-10*(e-1))),Ih=e=>1-Math.sin(Math.acos(e)),yx=fx(Ih),vx=hx(Ih),xx=e=>/^0[^.\s]+$/u.test(e);function dT(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||xx(e):!0}const pi=e=>Math.round(e*1e5)/1e5,Dh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hT(e){return e==null}const fT=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lh=(e,t)=>n=>!!(typeof n=="string"&&fT.test(n)&&n.startsWith(e)||t&&!hT(n)&&Object.prototype.hasOwnProperty.call(n,t)),wx=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Dh);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pT=e=>rn(0,255,e),lc={...Ds,transform:e=>Math.round(pT(e))},vr={test:Lh("rgb","red"),parse:wx("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+lc.transform(e)+", "+lc.transform(t)+", "+lc.transform(n)+", "+pi(Ki.transform(r))+")"};function mT(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Hu={test:Lh("#"),parse:mT,transform:vr.transform},as={test:Lh("hsl","hue"),parse:wx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+tn.transform(pi(t))+", "+tn.transform(pi(n))+", "+pi(Ki.transform(r))+")"},Qe={test:e=>vr.test(e)||Hu.test(e)||as.test(e),parse:e=>vr.test(e)?vr.parse(e):as.test(e)?as.parse(e):Hu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?vr.transform(e):as.transform(e)},gT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yT(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Dh))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(gT))===null||n===void 0?void 0:n.length)||0)>0}const bx="number",Sx="color",vT="var",xT="var(",fm="${}",wT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qi(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(wT,l=>(Qe.test(l)?(r.color.push(i),s.push(Sx),n.push(Qe.parse(l))):l.startsWith(xT)?(r.var.push(i),s.push(vT),n.push(l)):(r.number.push(i),s.push(bx),n.push(parseFloat(l))),++i,fm)).split(fm);return{values:n,split:a,indexes:r,types:s}}function kx(e){return qi(e).values}function _x(e){const{split:t,types:n}=qi(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===bx?i+=pi(s[o]):a===Sx?i+=Qe.transform(s[o]):i+=s[o]}return i}}const bT=e=>typeof e=="number"?0:e;function ST(e){const t=kx(e);return _x(e)(t.map(bT))}const Qn={test:yT,parse:kx,createTransformer:_x,getAnimatableNone:ST},kT=new Set(["brightness","contrast","saturate","opacity"]);function _T(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Dh)||[];if(!r)return e;const s=n.replace(r,"");let i=kT.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const jT=/\b([a-z-]*)\(.*?\)/gu,Ku={...Qn,getAnimatableNone:e=>{const t=e.match(jT);return t?t.map(_T).join(" "):e}},ET={...wh,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:Ku,WebkitFilter:Ku},Mh=e=>ET[e];function jx(e,t){let n=Mh(e);return n!==Ku&&(n=Qn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const TT=new Set(["auto","none","0"]);function NT(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!TT.has(i)&&qi(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=jx(n,s)}const pm=e=>e===Ds||e===q,mm=(e,t)=>parseFloat(e.split(", ")[t]),gm=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return mm(s[1],t);{const i=r.match(/^matrix\((.+)\)$/u);return i?mm(i[1],e):0}},CT=new Set(["x","y","z"]),PT=Is.filter(e=>!CT.has(e));function AT(e){const t=[];return PT.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Cs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:gm(4,13),y:gm(5,14)};Cs.translateX=Cs.x;Cs.translateY=Cs.y;const Sr=new Set;let qu=!1,Gu=!1;function Ex(){if(Gu){const e=Array.from(Sr).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=AT(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gu=!1,qu=!1,Sr.forEach(e=>e.complete()),Sr.clear()}function Tx(){Sr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gu=!0)})}function RT(){Tx(),Ex()}class $h{constructor(t,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sr.add(this),qu||(qu=!0,le.read(Tx),le.resolveKeyframes(Ex))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&o===void 0&&s.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Nx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),OT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zT(e){const t=OT.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Cx(e,t,n=1){const[r,s]=zT(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Nx(o)?parseFloat(o):o}return xh(s)?Cx(s,t,n+1):s}const Px=e=>t=>t.test(e),IT={test:e=>e==="auto",parse:e=>e},Ax=[Ds,q,tn,En,jE,_E,IT],ym=e=>Ax.find(Px(e));class Rx extends $h{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),xh(u))){const d=Cx(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!cx.has(r)||t.length!==2)return;const[s,i]=t,o=ym(s),a=ym(i);if(o!==a)if(pm(o)&&pm(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)dT(t[s])&&r.push(s);r.length&&NT(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Cs[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const vm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qn.test(e)||e==="0")&&!e.startsWith("url("));function DT(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function LT(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=vm(s,t),a=vm(i,t);return!o||!a?!1:DT(e)||(n==="spring"||Th(n))&&r}const MT=e=>e!==null;function gl(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(MT),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const $T=40;class Ox{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nn.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$T?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&RT(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=nn.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!LT(t,r,s,i))if(o)this.options.duration=0;else{l&&l(gl(t,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ye=(e,t,n)=>e+(t-e)*n;function cc(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FT({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=cc(l,a,e+1/3),i=cc(l,a,e),o=cc(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Da(e,t){return n=>n>0?t:e}const uc=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},UT=[Hu,vr,as],BT=e=>UT.find(t=>t.test(e));function xm(e){const t=BT(e);if(!t)return!1;let n=t.parse(e);return t===as&&(n=FT(n)),n}const wm=(e,t)=>{const n=xm(e),r=xm(t);if(!n||!r)return Da(e,t);const s={...n};return i=>(s.red=uc(n.red,r.red,i),s.green=uc(n.green,r.green,i),s.blue=uc(n.blue,r.blue,i),s.alpha=ye(n.alpha,r.alpha,i),vr.transform(s))},VT=(e,t)=>n=>t(e(n)),io=(...e)=>e.reduce(VT),Ju=new Set(["none","hidden"]);function WT(e,t){return Ju.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function HT(e,t){return n=>ye(e,t,n)}function Fh(e){return typeof e=="number"?HT:typeof e=="string"?xh(e)?Da:Qe.test(e)?wm:GT:Array.isArray(e)?zx:typeof e=="object"?Qe.test(e)?wm:KT:Da}function zx(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>Fh(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function KT(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Fh(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function qT(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],a=e.indexes[o][s[o]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const GT=(e,t)=>{const n=Qn.createTransformer(t),r=qi(e),s=qi(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Ju.has(e)&&!s.values.length||Ju.has(t)&&!r.values.length?WT(e,t):io(zx(qT(r,s),s.values),n):Da(e,t)};function Ix(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ye(e,t,n):Fh(e)(e,t)}const JT=5;function Dx(e,t,n){const r=Math.max(t-JT,0);return Oh(n-e(r),t-r)}const ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dc=.001;function YT({duration:e=ke.duration,bounce:t=ke.bounce,velocity:n=ke.velocity,mass:r=ke.mass}){let s,i,o=1-t;o=rn(ke.minDamping,ke.maxDamping,o),e=rn(ke.minDuration,ke.maxDuration,gn(e)),o<1?(s=u=>{const d=u*o,h=d*e,f=d-n,p=Yu(u,o),y=Math.exp(-h);return dc-f/p*y},i=u=>{const h=u*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*e,y=Math.exp(-h),x=Yu(Math.pow(u,2),o);return(-s(u)+dc>0?-1:1)*((f-p)*y)/x}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-dc+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const a=5/e,l=XT(s,i,a);if(e=mn(e),isNaN(l))return{stiffness:ke.stiffness,damping:ke.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const QT=12;function XT(e,t,n){let r=n;for(let s=1;s<QT;s++)r=r-e(r)/t(r);return r}function Yu(e,t){return e*Math.sqrt(1-t*t)}const ZT=["duration","bounce"],eN=["stiffness","damping","mass"];function bm(e,t){return t.some(n=>e[n]!==void 0)}function tN(e){let t={velocity:ke.velocity,stiffness:ke.stiffness,damping:ke.damping,mass:ke.mass,isResolvedFromDuration:!1,...e};if(!bm(e,eN)&&bm(e,ZT))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*rn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ke.mass,stiffness:s,damping:i}}else{const n=YT(e);t={...t,...n,mass:ke.mass},t.isResolvedFromDuration=!0}return t}function Lx(e=ke.visualDuration,t=ke.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=tN({...n,velocity:-gn(n.velocity||0)}),y=f||0,x=u/(2*Math.sqrt(l*d)),w=o-i,m=gn(Math.sqrt(l/d)),g=Math.abs(w)<5;r||(r=g?ke.restSpeed.granular:ke.restSpeed.default),s||(s=g?ke.restDelta.granular:ke.restDelta.default);let v;if(x<1){const k=Yu(m,x);v=S=>{const _=Math.exp(-x*m*S);return o-_*((y+x*m*w)/k*Math.sin(k*S)+w*Math.cos(k*S))}}else if(x===1)v=k=>o-Math.exp(-m*k)*(w+(y+m*w)*k);else{const k=m*Math.sqrt(x*x-1);v=S=>{const _=Math.exp(-x*m*S),E=Math.min(k*S,300);return o-_*((y+x*m*w)*Math.sinh(E)+k*w*Math.cosh(E))/k}}const j={calculatedDuration:p&&h||null,next:k=>{const S=v(k);if(p)a.done=k>=h;else{let _=0;x<1&&(_=k===0?mn(y):Dx(v,k,S));const E=Math.abs(_)<=r,N=Math.abs(o-S)<=s;a.done=E&&N}return a.value=a.done?o:S,a},toString:()=>{const k=Math.min(tx(j),Bu),S=nx(_=>j.next(k*_).value,k,30);return k+"ms "+S}};return j}function Sm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,y=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let x=n*t;const w=h+x,m=o===void 0?w:o(w);m!==w&&(x=m-h);const g=E=>-x*Math.exp(-E/r),v=E=>m+g(E),j=E=>{const N=g(E),T=v(E);f.done=Math.abs(N)<=u,f.value=f.done?m:T};let k,S;const _=E=>{p(f.value)&&(k=E,S=Lx({keyframes:[f.value,y(f.value)],velocity:Dx(v,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:E=>{let N=!1;return!S&&k===void 0&&(N=!0,j(E),_(E)),k!==void 0&&E>=k?S.next(E-k):(!N&&j(E),f)}}}const nN=so(.42,0,1,1),rN=so(0,0,.58,1),Mx=so(.42,0,.58,1),sN=e=>Array.isArray(e)&&typeof e[0]!="number",iN={linear:st,easeIn:nN,easeInOut:Mx,easeOut:rN,circIn:Ih,circInOut:vx,circOut:yx,backIn:zh,backInOut:mx,backOut:px,anticipate:gx},km=e=>{if(Nh(e)){zv(e.length===4);const[t,n,r,s]=e;return so(t,n,r,s)}else if(typeof e=="string")return iN[e];return e};function oN(e,t,n){const r=[],s=n||Ix,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||st:t;a=io(l,a)}r.push(a)}return r}function Uh(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(zv(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=oN(t,r,s),l=a.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Cr(e[h],e[h+1],d);return a[h](f)};return n?d=>u(rn(e[0],e[i-1],d)):u}function aN(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Cr(0,t,r);e.push(ye(n,1,s))}}function $x(e){const t=[0];return aN(t,e.length-1),t}function lN(e,t){return e.map(n=>n*t)}function cN(e,t){return e.map(()=>t||Mx).splice(0,e.length-1)}function La({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=sN(r)?r.map(km):km(r),i={done:!1,value:t[0]},o=lN(n&&n.length===t.length?n:$x(t),e),a=Uh(o,t,{ease:Array.isArray(s)?s:cN(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}const uN=e=>{const t=({timestamp:n})=>e(n);return{start:()=>le.update(t,!0),stop:()=>Kt(t),now:()=>Le.isProcessing?Le.timestamp:nn.now()}},dN={decay:Sm,inertia:Sm,tween:La,keyframes:La,spring:Lx},hN=e=>e/100;class Bh extends Ox{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||$h,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Th(n)?n:dN[n]||La;let l,u;a!==La&&typeof t[0]!="number"&&(l=io(hN,Ix(t[0],t[1])),t=[0,100]);const d=a({...this.options,keyframes:t});i==="mirror"&&(u=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=tx(d));const{calculatedDuration:h}=d,f=h+s,p=f*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:y,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?m<0:m>d;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let v=this.currentTime,j=i;if(p){const E=Math.min(this.currentTime,d)/h;let N=Math.floor(E),T=E%1;!T&&E>=1&&(T=1),T===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(y==="reverse"?(T=1-T,x&&(T-=x/h)):y==="mirror"&&(j=o)),v=rn(0,1,T)*h}const k=g?{done:!1,value:l[0]}:j.next(v);a&&(k.value=a(k.value));let{done:S}=k;!g&&u!==null&&(S=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return _&&s!==void 0&&(k.value=gl(l,this.options,s)),w&&w(k.value),_&&this.finish(),k}get duration(){const{resolved:t}=this;return t?gn(t.calculatedDuration):0}get time(){return gn(this.currentTime)}set time(t){t=mn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=gn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=uN,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const fN=new Set(["opacity","clipPath","filter","transform"]);function pN(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const d=sx(a,s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const mN=hh(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ma=10,gN=2e4;function yN(e){return Th(e.type)||e.type==="spring"||!rx(e.ease)}function vN(e,t){const n=new Bh({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let i=0;for(;!r.done&&i<gN;)r=n.sample(i),s.push(r.value),i+=Ma;return{times:void 0,keyframes:s,duration:i-Ma,ease:"linear"}}const Fx={anticipate:gx,backInOut:mx,circInOut:vx};function xN(e){return e in Fx}class _m extends Ox{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new Rx(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Ia()&&xN(i)&&(i=Fx[i]),yN(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:y,...x}=this.options,w=vN(t,x);t=w.keyframes,t.length===1&&(t[1]=t[0]),r=w.duration,s=w.times,i=w.ease,o="keyframes"}const d=pN(a.owner.current,l,t,{...this.options,duration:r,times:s,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(lm(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(gl(t,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return gn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return gn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=mn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return st;const{animation:r}=n;lm(r,t)}return st}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...p}=this.options,y=new Bh({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),x=mn(this.time);u.setWithVelocity(y.sample(x-Ma).value,y.sample(x).value,Ma)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return mN()&&r&&fN.has(r)&&!l&&!u&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const wN={type:"spring",stiffness:500,damping:25,restSpeed:10},bN=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),SN={type:"keyframes",duration:.8},kN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_N=(e,{keyframes:t})=>t.length>2?SN:Or.has(e)?e.startsWith("scale")?bN(t[1]):wN:kN;function jN({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const Vh=(e,t,n,r={},s,i)=>o=>{const a=Eh(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-mn(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};jN(a)||(d={...d,..._N(e,d)}),d.duration&&(d.duration=mn(d.duration)),d.repeatDelay&&(d.repeatDelay=mn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&t.get()!==void 0){const f=gl(d.keyframes,a);if(f!==void 0)return le.update(()=>{d.onUpdate(f),d.onComplete()}),new KE([])}return!i&&_m.supports(d)?new _m(d):new Bh(d)};function EN({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Ux(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(o=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h,(i=e.latestValues[h])!==null&&i!==void 0?i:null),p=l[h];if(p===void 0||d&&EN(d,h))continue;const y={delay:n,...Eh(o||{},h)};let x=!1;if(window.MotionHandoffAnimation){const m=ux(e);if(m){const g=window.MotionHandoffAnimation(m,h,le);g!==null&&(y.startTime=g,x=!0)}}Wu(e,h),f.start(Vh(h,f,p,e.shouldReduceMotion&&cx.has(h)?{type:!1}:y,e,x));const w=f.animation;w&&u.push(w)}return a&&Promise.all(u).then(()=>{le.update(()=>{a&&oT(e,a)})}),u}function Qu(e,t,n={}){var r;const s=ml(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(Ux(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return TN(e,t,d+u,h,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function TN(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(NN).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(Qu(u,t,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function NN(e,t){return e.sortNodePosition(t)}function CN(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Qu(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Qu(e,t,n);else{const s=typeof t=="function"?ml(e,t,n.custom):t;r=Promise.all(Ux(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const PN=ph.length;function Bx(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Bx(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<PN;n++){const r=ph[n],s=e.props[r];(Hi(s)||s===!1)&&(t[r]=s)}return t}const AN=[...fh].reverse(),RN=fh.length;function ON(e){return t=>Promise.all(t.map(({animation:n,options:r})=>CN(e,n,r)))}function zN(e){let t=ON(e),n=jm(),r=!0;const s=l=>(u,d)=>{var h;const f=ml(e,d,l==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:y,...x}=f;u={...u,...x,...y}}return u};function i(l){t=l(e)}function o(l){const{props:u}=e,d=Bx(e.parent)||{},h=[],f=new Set;let p={},y=1/0;for(let w=0;w<RN;w++){const m=AN[w],g=n[m],v=u[m]!==void 0?u[m]:d[m],j=Hi(v),k=m===l?g.isActive:null;k===!1&&(y=w);let S=v===d[m]&&v!==u[m]&&j;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),g.protectedKeys={...p},!g.isActive&&k===null||!v&&!g.prevProp||fl(v)||typeof v=="boolean")continue;const _=IN(g.prevProp,v);let E=_||m===l&&g.isActive&&!S&&j||w>y&&j,N=!1;const T=Array.isArray(v)?v:[v];let C=T.reduce(s(m),{});k===!1&&(C={});const{prevResolvedValues:I={}}=g,H={...I,...C},Q=ne=>{E=!0,f.has(ne)&&(N=!0,f.delete(ne)),g.needsAnimating[ne]=!0;const D=e.getValue(ne);D&&(D.liveStyle=!1)};for(const ne in H){const D=C[ne],P=I[ne];if(p.hasOwnProperty(ne))continue;let R=!1;Uu(D)&&Uu(P)?R=!Zv(D,P):R=D!==P,R?D!=null?Q(ne):f.add(ne):D!==void 0&&f.has(ne)?Q(ne):g.protectedKeys[ne]=!0}g.prevProp=v,g.prevResolvedValues=C,g.isActive&&(p={...p,...C}),r&&e.blockInitialAnimation&&(E=!1),E&&(!(S&&_)||N)&&h.push(...T.map(ne=>({animation:ne,options:{type:m}})))}if(f.size){const w={};f.forEach(m=>{const g=e.getBaseTarget(m),v=e.getValue(m);v&&(v.liveStyle=!0),w[m]=g??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(h):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=jm(),r=!0}}}function IN(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Zv(t,e):!1}function or(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jm(){return{animate:or(!0),whileInView:or(),whileHover:or(),whileTap:or(),whileDrag:or(),whileFocus:or(),exit:or()}}class rr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class DN extends rr{constructor(t){super(t),t.animationState||(t.animationState=zN(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();fl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let LN=0;class MN extends rr{constructor(){super(...arguments),this.id=LN++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const $N={animation:{Feature:DN},exit:{Feature:MN}};function Gi(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function oo(e){return{point:{x:e.pageX,y:e.pageY}}}const FN=e=>t=>Ch(t)&&e(t,oo(t));function mi(e,t,n,r){return Gi(e,t,FN(n),r)}const Em=(e,t)=>Math.abs(e-t);function UN(e,t){const n=Em(e.x,t.x),r=Em(e.y,t.y);return Math.sqrt(n**2+r**2)}class Vx{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=fc(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=UN(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=h,{timestamp:x}=Le;this.history.push({...y,timestamp:x});const{onStart:w,onMove:m}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=hc(f,this.transformPagePoint),le.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=fc(h.type==="pointercancel"?this.lastMoveEventInfo:hc(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),y&&y(h,w)},!Ch(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=oo(t),a=hc(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Le;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,fc(a,this.history)),this.removeListeners=io(mi(this.contextWindow,"pointermove",this.handlePointerMove),mi(this.contextWindow,"pointerup",this.handlePointerUp),mi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kt(this.updatePoint)}}function hc(e,t){return t?{point:t(e.point)}:e}function Tm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fc({point:e},t){return{point:e,delta:Tm(e,Wx(t)),offset:Tm(e,BN(t)),velocity:VN(t,.1)}}function BN(e){return e[0]}function Wx(e){return e[e.length-1]}function VN(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Wx(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>mn(t)));)n--;if(!r)return{x:0,y:0};const i=gn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Hx=1e-4,WN=1-Hx,HN=1+Hx,Kx=.01,KN=0-Kx,qN=0+Kx;function xt(e){return e.max-e.min}function GN(e,t,n){return Math.abs(e-t)<=n}function Nm(e,t,n,r=.5){e.origin=r,e.originPoint=ye(t.min,t.max,e.origin),e.scale=xt(n)/xt(t),e.translate=ye(n.min,n.max,e.origin)-e.originPoint,(e.scale>=WN&&e.scale<=HN||isNaN(e.scale))&&(e.scale=1),(e.translate>=KN&&e.translate<=qN||isNaN(e.translate))&&(e.translate=0)}function gi(e,t,n,r){Nm(e.x,t.x,n.x,r?r.originX:void 0),Nm(e.y,t.y,n.y,r?r.originY:void 0)}function Cm(e,t,n){e.min=n.min+t.min,e.max=e.min+xt(t)}function JN(e,t,n){Cm(e.x,t.x,n.x),Cm(e.y,t.y,n.y)}function Pm(e,t,n){e.min=t.min-n.min,e.max=e.min+xt(t)}function yi(e,t,n){Pm(e.x,t.x,n.x),Pm(e.y,t.y,n.y)}function YN(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ye(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ye(n,e,r.max):Math.min(e,n)),e}function Am(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function QN(e,{top:t,left:n,bottom:r,right:s}){return{x:Am(e.x,n,s),y:Am(e.y,t,r)}}function Rm(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function XN(e,t){return{x:Rm(e.x,t.x),y:Rm(e.y,t.y)}}function ZN(e,t){let n=.5;const r=xt(e),s=xt(t);return s>r?n=Cr(t.min,t.max-r,e.min):r>s&&(n=Cr(e.min,e.max-s,t.min)),rn(0,1,n)}function eC(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Xu=.35;function tC(e=Xu){return e===!1?e=0:e===!0&&(e=Xu),{x:Om(e,"left","right"),y:Om(e,"top","bottom")}}function Om(e,t,n){return{min:zm(e,t),max:zm(e,n)}}function zm(e,t){return typeof e=="number"?e:e[t]||0}const Im=()=>({translate:0,scale:1,origin:0,originPoint:0}),ls=()=>({x:Im(),y:Im()}),Dm=()=>({min:0,max:0}),Ee=()=>({x:Dm(),y:Dm()});function _t(e){return[e("x"),e("y")]}function qx({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function nC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rC(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pc(e){return e===void 0||e===1}function Zu({scale:e,scaleX:t,scaleY:n}){return!pc(e)||!pc(t)||!pc(n)}function ur(e){return Zu(e)||Gx(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Gx(e){return Lm(e.x)||Lm(e.y)}function Lm(e){return e&&e!=="0%"}function $a(e,t,n){const r=e-n,s=t*r;return n+s}function Mm(e,t,n,r,s){return s!==void 0&&(e=$a(e,s,r)),$a(e,n,r)+t}function ed(e,t=0,n=1,r,s){e.min=Mm(e.min,t,n,r,s),e.max=Mm(e.max,t,n,r,s)}function Jx(e,{x:t,y:n}){ed(e.x,t.translate,t.scale,t.originPoint),ed(e.y,n.translate,n.scale,n.originPoint)}const $m=.999999999999,Fm=1.0000000000001;function sC(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&us(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Jx(e,o)),r&&ur(i.latestValues)&&us(e,i.latestValues))}t.x<Fm&&t.x>$m&&(t.x=1),t.y<Fm&&t.y>$m&&(t.y=1)}function cs(e,t){e.min=e.min+t,e.max=e.max+t}function Um(e,t,n,r,s=.5){const i=ye(e.min,e.max,s);ed(e,t,n,i,r)}function us(e,t){Um(e.x,t.x,t.scaleX,t.scale,t.originX),Um(e.y,t.y,t.scaleY,t.scale,t.originY)}function Yx(e,t){return qx(rC(e.getBoundingClientRect(),t))}function iC(e,t,n){const r=Yx(e,n),{scroll:s}=t;return s&&(cs(r.x,s.offset.x),cs(r.y,s.offset.y)),r}const Qx=({current:e})=>e?e.ownerDocument.defaultView:null,oC=new WeakMap;class aC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ee(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(oo(d).point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eT(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_t(w=>{let m=this.getAxisMotionValue(w).get()||0;if(tn.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const v=g.layout.layoutBox[w];v&&(m=xt(v)*(parseFloat(m)/100))}}this.originPoint[w]=m}),y&&le.postRender(()=>y(d,h)),Wu(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=lC(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),x&&x(d,h)},a=(d,h)=>this.stop(d,h),l=()=>_t(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Vx(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Qx(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&le.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Do(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=YN(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&os(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=QN(s.layoutBox,n):this.constraints=!1,this.elastic=tC(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_t(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=eC(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!os(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=iC(r,s.root,this.visualElement.getTransformPagePoint());let o=XN(s.layout.layoutBox,i);if(n){const a=n(nC(o));this.hasMutatedConstraints=!!a,a&&(o=qx(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=_t(d=>{if(!Do(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Wu(this.visualElement,t),r.start(Vh(t,r,0,n,this.visualElement,!1))}stopAnimation(){_t(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_t(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){_t(n=>{const{drag:r}=this.getProps();if(!Do(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!os(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_t(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=ZN({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_t(o=>{if(!Do(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ye(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;oC.set(this.visualElement,this);const t=this.visualElement.current,n=mi(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();os(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),le.read(r);const o=Gi(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(_t(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Xu,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Do(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function lC(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class cC extends rr{constructor(t){super(t),this.removeGroupControls=st,this.removeListeners=st,this.controls=new aC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||st}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bm=e=>(t,n)=>{e&&le.postRender(()=>e(t,n))};class uC extends rr{constructor(){super(...arguments),this.removePointerDownListener=st}onPointerDown(t){this.session=new Vx(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qx(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Bm(t),onStart:Bm(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&le.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=mi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ta={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Vm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ks={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(q.test(e))e=parseFloat(e);else return e;const n=Vm(e,t.target.x),r=Vm(e,t.target.y);return`${n}% ${r}%`}},dC={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Qn.parse(e);if(s.length>5)return r;const i=Qn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=ye(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class hC extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;IE(fC),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ta.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||le.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Xx(e){const[t,n]=Ov(),r=b.useContext(uh);return c.jsx(hC,{...e,layoutGroup:r,switchLayoutGroup:b.useContext(Fv),isPresent:t,safeToRemove:n})}const fC={borderRadius:{...Ks,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ks,borderTopRightRadius:Ks,borderBottomLeftRadius:Ks,borderBottomRightRadius:Ks,boxShadow:dC};function pC(e,t,n){const r=We(e)?e:Xt(e);return r.start(Vh("",r,t,n)),r.animation}function mC(e){return e instanceof SVGElement&&e.tagName!=="svg"}const gC=(e,t)=>e.depth-t.depth;class yC{constructor(){this.children=[],this.isDirty=!1}add(t){Ph(this.children,t),this.isDirty=!0}remove(t){Ah(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gC),this.isDirty=!1,this.children.forEach(t)}}function vC(e,t){const n=nn.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Kt(r),e(i-t))};return le.read(r,!0),()=>Kt(r)}const Zx=["TopLeft","TopRight","BottomLeft","BottomRight"],xC=Zx.length,Wm=e=>typeof e=="string"?parseFloat(e):e,Hm=e=>typeof e=="number"||q.test(e);function wC(e,t,n,r,s,i){s?(e.opacity=ye(0,n.opacity!==void 0?n.opacity:1,bC(r)),e.opacityExit=ye(t.opacity!==void 0?t.opacity:1,0,SC(r))):i&&(e.opacity=ye(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<xC;o++){const a=`border${Zx[o]}Radius`;let l=Km(t,a),u=Km(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Hm(l)===Hm(u)?(e[a]=Math.max(ye(Wm(l),Wm(u),r),0),(tn.test(u)||tn.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=ye(t.rotate||0,n.rotate||0,r))}function Km(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const bC=ew(0,.5,yx),SC=ew(.5,.95,st);function ew(e,t,n){return r=>r<e?0:r>t?1:n(Cr(e,t,r))}function qm(e,t){e.min=t.min,e.max=t.max}function St(e,t){qm(e.x,t.x),qm(e.y,t.y)}function Gm(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Jm(e,t,n,r,s){return e-=t,e=$a(e,1/n,r),s!==void 0&&(e=$a(e,1/s,r)),e}function kC(e,t=0,n=1,r=.5,s,i=e,o=e){if(tn.test(t)&&(t=parseFloat(t),t=ye(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ye(i.min,i.max,r);e===i&&(a-=t),e.min=Jm(e.min,t,n,a,s),e.max=Jm(e.max,t,n,a,s)}function Ym(e,t,[n,r,s],i,o){kC(e,t[n],t[r],t[s],t.scale,i,o)}const _C=["x","scaleX","originX"],jC=["y","scaleY","originY"];function Qm(e,t,n,r){Ym(e.x,t,_C,n?n.x:void 0,r?r.x:void 0),Ym(e.y,t,jC,n?n.y:void 0,r?r.y:void 0)}function Xm(e){return e.translate===0&&e.scale===1}function tw(e){return Xm(e.x)&&Xm(e.y)}function Zm(e,t){return e.min===t.min&&e.max===t.max}function EC(e,t){return Zm(e.x,t.x)&&Zm(e.y,t.y)}function e0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function nw(e,t){return e0(e.x,t.x)&&e0(e.y,t.y)}function t0(e){return xt(e.x)/xt(e.y)}function n0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class TC{constructor(){this.members=[]}add(t){Ph(this.members,t),t.scheduleRender()}remove(t){if(Ah(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NC(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const dr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ti=typeof window<"u"&&window.MotionDebug!==void 0,mc=["","X","Y","Z"],CC={visibility:"hidden"},r0=1e3;let PC=0;function gc(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function rw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ux(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",le,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&rw(r)}function sw({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=PC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ti&&(dr.totalNodes=dr.resolvedTargetDeltas=dr.recalculatedProjection=0),this.nodes.forEach(OC),this.nodes.forEach(MC),this.nodes.forEach($C),this.nodes.forEach(zC),ti&&window.MotionDebug.record(dr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yC)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Rh),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mC(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=vC(f,250),ta.hasAnimatedSinceResize&&(ta.hasAnimatedSinceResize=!1,this.nodes.forEach(i0))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||WC,{onLayoutAnimationStart:w,onLayoutAnimationComplete:m}=d.getProps(),g=!this.targetLayout||!nw(this.targetLayout,y)||p,v=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const j={...Eh(x,"layout"),onPlay:w,onComplete:m};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else f||i0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Kt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FC),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s0);return}this.isUpdating||this.nodes.forEach(DC),this.isUpdating=!1,this.nodes.forEach(LC),this.nodes.forEach(AC),this.nodes.forEach(RC),this.clearAllSnapshots();const a=nn.now();Le.delta=rn(0,1e3/60,a-Le.timestamp),Le.timestamp=a,Le.isProcessing=!0,oc.update.process(Le),oc.preRender.process(Le),oc.render.process(Le),Le.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IC),this.sharedNodes.forEach(UC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ee(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!tw(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||ur(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),HC(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ee();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(KC))){const{scroll:d}=this.root;d&&(cs(l.x,d.offset.x),cs(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=Ee();if(St(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&St(l,o),cs(l.x,h.offset.x),cs(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Ee();St(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&us(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ur(d.latestValues)&&us(l,d.latestValues)}return ur(this.latestValues)&&us(l,this.latestValues),l}removeTransform(o){const a=Ee();St(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ur(u.latestValues))continue;Zu(u.latestValues)&&u.updateSnapshot();const d=Ee(),h=u.measurePageBox();St(d,h),Qm(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ur(this.latestValues)&&Qm(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Le.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Le.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),yi(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ee(),this.targetWithTransforms=Ee()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):St(this.target,this.layout.layoutBox),Jx(this.target,this.targetDelta)):St(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),yi(this.relativeTargetOrigin,this.target,p.target),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ti&&dr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Zu(this.parent.latestValues)||Gx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Le.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;St(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;sC(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ee());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Gm(this.prevProjectionDelta.x,this.projectionDelta.x),Gm(this.prevProjectionDelta.y,this.projectionDelta.y)),gi(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!n0(this.projectionDelta.x,this.prevProjectionDelta.x)||!n0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),ti&&dr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ls(),this.projectionDelta=ls(),this.projectionDeltaWithTransform=ls()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=ls();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ee(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,w=this.getStack(),m=!w||w.members.length<=1,g=!!(x&&!m&&this.options.crossfade===!0&&!this.path.some(VC));this.animationProgress=0;let v;this.mixTargetDelta=j=>{const k=j/1e3;o0(h.x,o.x,k),o0(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BC(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&EC(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Ee()),St(v,this.relativeTarget)),x&&(this.animationValues=d,wC(d,u,this.latestValues,k,g,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Kt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=le.update(()=>{ta.hasAnimatedSinceResize=!0,this.currentAnimation=pC(0,r0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&iw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ee();const h=xt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=xt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}St(a,l),us(a,d),gi(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new TC),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&gc("z",o,u,this.animationValues);for(let d=0;d<mc.length;d++)gc(`rotate${mc[d]}`,o,u,this.animationValues),gc(`skew${mc[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return CC;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Zo(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Zo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ur(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=NC(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in za){if(f[x]===void 0)continue;const{correct:w,applyTo:m}=za[x],g=u.transform==="none"?f[x]:w(f[x],h);if(m){const v=m.length;for(let j=0;j<v;j++)u[m[j]]=g}else u[x]=g}return this.options.layoutId&&(u.pointerEvents=h===this?Zo(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(s0),this.root.sharedNodes.clear()}}}function AC(e){e.updateLayout()}function RC(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?_t(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=xt(f);f.min=r[h].min,f.max=f.min+p}):iw(i,n.layoutBox,r)&&_t(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=xt(r[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=ls();gi(a,r,n.layoutBox);const l=ls();o?gi(l,e.applyTransform(s,!0),n.measuredBox):gi(l,r,n.layoutBox);const u=!tw(a);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const y=Ee();yi(y,n.layoutBox,f.layoutBox);const x=Ee();yi(x,r,p.layoutBox),nw(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function OC(e){ti&&dr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function IC(e){e.clearSnapshot()}function s0(e){e.clearMeasurements()}function DC(e){e.isLayoutDirty=!1}function LC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function i0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function MC(e){e.resolveTargetDelta()}function $C(e){e.calcProjection()}function FC(e){e.resetSkewAndRotation()}function UC(e){e.removeLeadSnapshot()}function o0(e,t,n){e.translate=ye(t.translate,0,n),e.scale=ye(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function a0(e,t,n,r){e.min=ye(t.min,n.min,r),e.max=ye(t.max,n.max,r)}function BC(e,t,n,r){a0(e.x,t.x,n.x,r),a0(e.y,t.y,n.y,r)}function VC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const WC={duration:.45,ease:[.4,0,.1,1]},l0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),c0=l0("applewebkit/")&&!l0("chrome/")?Math.round:st;function u0(e){e.min=c0(e.min),e.max=c0(e.max)}function HC(e){u0(e.x),u0(e.y)}function iw(e,t,n){return e==="position"||e==="preserve-aspect"&&!GN(t0(t),t0(n),.2)}function KC(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const qC=sw({attachResizeListener:(e,t)=>Gi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yc={current:void 0},ow=sw({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yc.current){const e=new qC({});e.mount(window),e.setOptions({layoutScroll:!0}),yc.current=e}return yc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),GC={pan:{Feature:uC},drag:{Feature:cC,ProjectionNode:ow,MeasureLayout:Xx}};function d0(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&le.postRender(()=>i(t,oo(t)))}class JC extends rr{mount(){const{current:t}=this.node;t&&(this.unmount=JE(t,n=>(d0(this.node,n,"Start"),r=>d0(this.node,r,"End"))))}unmount(){}}class YC extends rr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=io(Gi(this.node.current,"focus",()=>this.onFocus()),Gi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function h0(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&le.postRender(()=>i(t,oo(t)))}class QC extends rr{mount(){const{current:t}=this.node;t&&(this.unmount=ZE(t,n=>(h0(this.node,n,"Start"),(r,{success:s})=>h0(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const td=new WeakMap,vc=new WeakMap,XC=e=>{const t=td.get(e.target);t&&t(e)},ZC=e=>{e.forEach(XC)};function eP({root:e,...t}){const n=e||document;vc.has(n)||vc.set(n,{});const r=vc.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(ZC,{root:e,...t})),r[s]}function tP(e,t,n){const r=eP(t);return td.set(e,n),r.observe(e),()=>{td.delete(e),r.unobserve(e)}}const nP={some:0,all:1};class rP extends rr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:nP[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return tP(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(sP(t,n))&&this.startObserver()}unmount(){}}function sP({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const iP={inView:{Feature:rP},tap:{Feature:QC},focus:{Feature:YC},hover:{Feature:JC}},oP={layout:{ProjectionNode:ow,MeasureLayout:Xx}},nd={current:null},aw={current:!1};function aP(){if(aw.current=!0,!!dh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nd.current=e.matches;e.addListener(t),t()}else nd.current=!1}const lP=[...Ax,Qe,Qn],cP=e=>lP.find(Px(e)),f0=new WeakMap;function uP(e,t,n){for(const r in t){const s=t[r],i=n[r];if(We(s))e.addValue(r,s);else if(We(i))e.addValue(r,Xt(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,Xt(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const p0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dP{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$h,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=nn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,le.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=pl(n),this.isVariantNode=Mv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const y=f[p];l[p]!==void 0&&We(y)&&y.set(l[p],!1)}}mount(t){this.current=t,f0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),aw.current||aP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){f0.delete(this.current),this.projection&&this.projection.unmount(),Kt(this.notifyUpdate),Kt(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Or.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&le.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ns){const n=Ns[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ee()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<p0.length;r++){const s=p0[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=uP(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Xt(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Nx(s)||xx(s))?s=parseFloat(s):!cP(s)&&Qn.test(n)&&(s=jx(t,n)),this.setBaseTarget(t,We(s)?s.get():s)),We(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=vh(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[t])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!We(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Rh),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class lw extends dP{constructor(){super(...arguments),this.KeyframeResolver=Rx}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;We(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hP(e){return window.getComputedStyle(e)}class fP extends lw{constructor(){super(...arguments),this.type="html",this.renderInstance=qv}readValueFromInstance(t,n){if(Or.has(n)){const r=Mh(n);return r&&r.default||0}else{const r=hP(t),s=(Wv(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Yx(t,n)}build(t,n,r){bh(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return jh(t,n,r)}}class pP extends lw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ee}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Or.has(n)){const r=Mh(n);return r&&r.default||0}return n=Gv.has(n)?n:mh(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Qv(t,n,r)}build(t,n,r){Sh(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){Jv(t,n,r,s)}mount(t){this.isSVGTag=_h(t.tagName),super.mount(t)}}const mP=(e,t)=>yh(e)?new pP(t):new fP(t,{allowProjection:e!==b.Fragment}),gP=WE({...$N,...iP,...GC,...oP},mP),Z=iE(gP);function yP(e,t,n){b.useInsertionEffect(()=>e.on(t,n),[e,t,n])}function cw(e,t){let n;const r=()=>{const{currentTime:s}=t,o=(s===null?0:s.value)/100;n!==o&&e(o),n=o};return le.update(r,!0),()=>Kt(r)}const na=new WeakMap;let Tn;function vP(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function xP({target:e,contentRect:t,borderBoxSize:n}){var r;(r=na.get(e))===null||r===void 0||r.forEach(s=>{s({target:e,contentSize:t,get size(){return vP(e,n)}})})}function wP(e){e.forEach(xP)}function bP(){typeof ResizeObserver>"u"||(Tn=new ResizeObserver(wP))}function SP(e,t){Tn||bP();const n=ox(e);return n.forEach(r=>{let s=na.get(r);s||(s=new Set,na.set(r,s)),s.add(t),Tn==null||Tn.observe(r)}),()=>{n.forEach(r=>{const s=na.get(r);s==null||s.delete(t),s!=null&&s.size||Tn==null||Tn.unobserve(r)})}}const ra=new Set;let vi;function kP(){vi=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};ra.forEach(n=>n(t))},window.addEventListener("resize",vi)}function _P(e){return ra.add(e),vi||kP(),()=>{ra.delete(e),!ra.size&&vi&&(vi=void 0)}}function jP(e,t){return typeof e=="function"?_P(e):SP(e,t)}const EP=50,m0=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),TP=()=>({time:0,x:m0(),y:m0()}),NP={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function g0(e,t,n,r){const s=n[t],{length:i,position:o}=NP[t],a=s.current,l=n.time;s.current=e[`scroll${o}`],s.scrollLength=e[`scroll${i}`]-e[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Cr(0,s.scrollLength,s.current);const u=r-l;s.velocity=u>EP?0:Oh(s.current-a,u)}function CP(e,t,n){g0(e,"x",t,n),g0(e,"y",t,n),t.time=n}function PP(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const s=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();n.x+=s.left-i.left,n.y+=s.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:s,y:i}=r.getBBox();n.x+=s,n.y+=i;let o=null,a=r.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=r.parentNode;r=o}else break;return n}const rd={start:0,center:.5,end:1};function y0(e,t,n=0){let r=0;if(e in rd&&(e=rd[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?r=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?r=s/100*document.documentElement.clientWidth:e.endsWith("vh")?r=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(r=t*e),n+r}const AP=[0,0];function RP(e,t,n,r){let s=Array.isArray(e)?e:AP,i=0,o=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,rd[e]?e:"0"]),i=y0(s[0],n,r),o=y0(s[1],t),i-o}const OP={All:[[0,0],[1,1]]},zP={x:0,y:0};function IP(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function DP(e,t,n){const{offset:r=OP.All}=n,{target:s=e,axis:i="y"}=n,o=i==="y"?"height":"width",a=s!==e?PP(s,e):zP,l=s===e?{width:e.scrollWidth,height:e.scrollHeight}:IP(s),u={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let d=!t[i].interpolate;const h=r.length;for(let f=0;f<h;f++){const p=RP(r[f],u[o],l[o],a[i]);!d&&p!==t[i].interpolatorOffsets[f]&&(d=!0),t[i].offset[f]=p}d&&(t[i].interpolate=Uh(t[i].offset,$x(r),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=rn(0,1,t[i].interpolate(t[i].current))}function LP(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function MP(e,t,n,r={}){return{measure:()=>LP(e,r.target,n),update:s=>{CP(e,n,s),(r.offset||r.target)&&DP(e,n,r)},notify:()=>t(n)}}const qs=new WeakMap,v0=new WeakMap,xc=new WeakMap,x0=e=>e===document.documentElement?window:e;function Wh(e,{container:t=document.documentElement,...n}={}){let r=xc.get(t);r||(r=new Set,xc.set(t,r));const s=TP(),i=MP(t,e,s,n);if(r.add(i),!qs.has(t)){const a=()=>{for(const f of r)f.measure()},l=()=>{for(const f of r)f.update(Le.timestamp)},u=()=>{for(const f of r)f.notify()},d=()=>{le.read(a,!1,!0),le.read(l,!1,!0),le.update(u,!1,!0)};qs.set(t,d);const h=x0(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&v0.set(t,jP(t,d)),h.addEventListener("scroll",d,{passive:!0})}const o=qs.get(t);return le.read(o,!1,!0),()=>{var a;Kt(o);const l=xc.get(t);if(!l||(l.delete(i),l.size))return;const u=qs.get(t);qs.delete(t),u&&(x0(t).removeEventListener("scroll",u),(a=v0.get(t))===null||a===void 0||a(),window.removeEventListener("resize",u))}}function $P({source:e,container:t,axis:n="y"}){e&&(t=e);const r={value:0},s=Wh(i=>{r.value=i[n].progress*100},{container:t,axis:n});return{currentTime:r,cancel:s}}const wc=new Map;function uw({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),wc.has(t)||wc.set(t,{});const r=wc.get(t);return r[n]||(r[n]=ex()?new ScrollTimeline({source:t,axis:n}):$P({source:t,axis:n})),r[n]}function FP(e){return e.length===2}function dw(e){return e&&(e.target||e.offset)}function UP(e,t){return FP(e)||dw(t)?Wh(n=>{e(n[t.axis].progress,n)},t):cw(e,uw(t))}function BP(e,t){if(e.flatten(),dw(t))return e.pause(),Wh(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=uw(t);return e.attachTimeline?e.attachTimeline(n,r=>(r.pause(),cw(s=>{r.time=r.duration*s},n))):st}}function VP(e,{axis:t="y",...n}={}){const r={axis:t,...n};return typeof e=="function"?UP(e,r):BP(e,r)}function w0(e,t){Q2(!!(!t||t.current))}const WP=()=>({scrollX:Xt(0),scrollY:Xt(0),scrollXProgress:Xt(0),scrollYProgress:Xt(0)});function yl({container:e,target:t,layoutEffect:n=!0,...r}={}){const s=_n(WP);return(n?dl:b.useEffect)(()=>(w0("target",t),w0("container",e),VP((o,{x:a,y:l})=>{s.scrollX.set(a.current),s.scrollXProgress.set(a.progress),s.scrollY.set(l.current),s.scrollYProgress.set(l.progress)},{...r,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(r.offset)]),s}function hw(e){const t=_n(()=>Xt(e)),{isStatic:n}=b.useContext(ul);if(n){const[,r]=b.useState(e);b.useEffect(()=>t.on("change",r),[])}return t}function fw(e,t){const n=hw(t()),r=()=>n.set(t());return r(),dl(()=>{const s=()=>le.preRender(r,!1,!0),i=e.map(o=>o.on("change",s));return()=>{i.forEach(o=>o()),Kt(r)}}),n}const HP=e=>e&&typeof e=="object"&&e.mix,KP=e=>HP(e)?e.mix:void 0;function qP(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],i=e[2+n],o=e[3+n],a=Uh(s,i,{mixer:KP(i[0]),...o});return t?a(r):a}function GP(e){fi.current=[],e();const t=fw(fi.current,e);return fi.current=void 0,t}function bn(e,t,n,r){if(typeof e=="function")return GP(e);const s=typeof t=="function"?t:qP(t,n,r);return Array.isArray(e)?b0(e,s):b0([e],([i])=>s(i))}function b0(e,t){const n=_n(()=>[]);return fw(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}class JP{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,n){this.componentControls.forEach(r=>{r.start(t.nativeEvent||t,n)})}}const YP=()=>new JP;function QP(){return _n(YP)}const pw=b.createContext(null);function XP(e,t,n,r){if(!r)return e;const s=e.findIndex(d=>d.value===t);if(s===-1)return e;const i=r>0?1:-1,o=e[s+i];if(!o)return e;const a=e[s],l=o.layout,u=ye(l.min,l.max,.5);return i===1&&a.layout.max+n>u||i===-1&&a.layout.min+n<u?nT(e,s,s+i):e}function ZP({children:e,as:t="ul",axis:n="y",onReorder:r,values:s,...i},o){const a=_n(()=>Z[t]),l=[],u=b.useRef(!1),d={axis:n,registerItem:(h,f)=>{const p=l.findIndex(y=>h===y.value);p!==-1?l[p].layout=f[n]:l.push({value:h,layout:f[n]}),l.sort(nA)},updateOrder:(h,f,p)=>{if(u.current)return;const y=XP(l,h,f,p);l!==y&&(u.current=!0,r(y.map(tA).filter(x=>s.indexOf(x)!==-1)))}};return b.useEffect(()=>{u.current=!1}),c.jsx(a,{...i,ref:o,ignoreStrict:!0,children:c.jsx(pw.Provider,{value:d,children:e})})}const eA=b.forwardRef(ZP);function tA(e){return e.value}function nA(e,t){return e.layout.min-t.layout.min}function S0(e,t=0){return We(e)?e:hw(t)}function rA({children:e,style:t={},value:n,as:r="li",onDrag:s,layout:i=!0,...o},a){const l=_n(()=>Z[r]),u=b.useContext(pw),d={x:S0(t.x),y:S0(t.y)},h=bn([d.x,d.y],([x,w])=>x||w?1:"unset"),{axis:f,registerItem:p,updateOrder:y}=u;return c.jsx(l,{drag:f,...o,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:h},layout:i,onDrag:(x,w)=>{const{velocity:m}=w;m[f]&&y(n,d[f].get(),m[f]),s&&s(x,w)},onLayoutMeasure:x=>p(n,x),ref:a,ignoreStrict:!0,children:e})}const sA=b.forwardRef(rA);function k0(){const{isOnline:e,syncStatus:t,manualSync:n}=K2(),s=e?t.isSyncing?{icon:c.jsx(z2,{size:14,className:"animate-spin"}),text:"Syncing...",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"}:t.error?{icon:c.jsx(Tv,{size:14}),text:"Sync error",color:"bg-red-500/20 text-red-400 border-red-500/30"}:t.pendingActions>0?{icon:c.jsx(_2,{size:14}),text:`${t.pendingActions} pending`,color:"bg-zinc-800 text-zinc-400 border-zinc-700"}:{icon:c.jsx(ll,{size:14}),text:"Synced",color:"bg-green-500/20 text-green-400 border-green-500/30"}:{icon:c.jsx(k2,{size:14}),text:"Offline",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"};return s.text==="Synced"?null:c.jsx(Ke,{mode:"wait",children:c.jsxs(Z.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},onClick:()=>e&&n(),disabled:!e||t.isSyncing,className:`
                    flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold
                    border transition-all cursor-pointer
                    hover:scale-105 active:scale-95
                    disabled:cursor-not-allowed disabled:hover:scale-100
                    ${s.color}
                `,title:t.lastSyncTime?`Last synced: ${new Date(t.lastSyncTime).toLocaleTimeString()}`:"Click to sync",children:[s.icon,c.jsx("span",{className:"uppercase tracking-wider",children:s.text})]},s.text)})}function iA({isOpen:e,onClose:t,onSave:n,initialSettings:r}){const[s,i]=b.useState(r.tripName),[o,a]=b.useState(r.startDate),[l,u]=b.useState("");b.useEffect(()=>{if(e){i(r.tripName),a(r.startDate);const p=new Date(r.startDate),y=new Date(p);y.setUTCDate(y.getUTCDate()+(r.duration-1)),u(y.toISOString().split("T")[0])}},[e,r]);const d=p=>{const y=p.target.value;a(y),y>l&&u(y)},h=p=>{const y=p.target.value;y<o?u(o):u(y)},f=()=>{const p=new Date(o),x=new Date(l).getTime()-p.getTime(),w=Math.ceil(x/(1e3*60*60*24)),m=Math.max(1,w+1);n({tripName:s,startDate:o,duration:m})};return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-[#121212] border border-zinc-800 w-full max-w-md rounded-3xl shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[c.jsx("button",{onClick:t,className:"absolute right-4 top-4 w-8 h-8 rounded-full bg-zinc-900 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:c.jsx(Yn,{size:18})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:"Trip Settings"}),c.jsx("p",{className:"text-zinc-500 text-xs",children:"Update your trip details"})]}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider ml-1",children:"Trip Name"}),c.jsxs("div",{className:"relative group",children:[c.jsx(Ie,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-[#007AFF] transition-colors",size:18}),c.jsx("input",{type:"text",value:s,onChange:p=>i(p.target.value),className:"w-full bg-zinc-900 border border-zinc-800 text-white pl-12 pr-4 py-2.5 rounded-xl focus:outline-none focus:border-[#007AFF] focus:ring-1 focus:ring-[#007AFF] transition-all font-medium text-sm",placeholder:"e.g. Bali Summer Trip"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider ml-1",children:"Start Date"}),c.jsxs("div",{className:"relative group",children:[c.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-[#007AFF] transition-colors",size:18}),c.jsx("input",{type:"date",value:o,onChange:d,className:"w-full bg-zinc-900 border border-zinc-800 text-white pl-12 pr-4 py-2.5 rounded-xl focus:outline-none focus:border-[#007AFF] focus:ring-1 focus:ring-[#007AFF] transition-all font-medium text-xs [color-scheme:dark]"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider ml-1",children:"End Date"}),c.jsxs("div",{className:"relative group",children:[c.jsx(js,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 group-focus-within:text-[#007AFF] transition-colors",size:18}),c.jsx("input",{type:"date",value:l,min:o,onChange:h,className:"w-full bg-zinc-900 border border-zinc-800 text-white pl-12 pr-4 py-2.5 rounded-xl focus:outline-none focus:border-[#007AFF] focus:ring-1 focus:ring-[#007AFF] transition-all font-medium text-xs [color-scheme:dark]"})]})]})]})]}),c.jsxs("div",{className:"mt-8 pt-4 border-t border-zinc-800 flex justify-end gap-3",children:[c.jsx("button",{onClick:t,className:"px-5 py-2.5 rounded-xl text-sm font-bold text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:f,className:"px-6 py-2.5 rounded-xl text-sm font-bold bg-[#007AFF] text-white hover:bg-[#0069d9] shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:"Save Changes"})]})]})}):null}function _0({isOpen:e,onClose:t}){const{trips:n,currentTripId:r,switchTrip:s,createNewTrip:i,tripName:o,startDate:a,tripDuration:l,updateTripDetails:u}=sn(),[d,h]=b.useState(!1),f=[...n].sort((p,y)=>p.id===r?-1:y.id===r?1:0);return c.jsx(Ke,{children:e&&c.jsxs(c.Fragment,{children:[c.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[60]"}),c.jsxs(Z.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 left-0 bottom-0 w-[85vw] max-w-[320px] bg-white text-zinc-900 z-[70] flex flex-col shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-32 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),c.jsx("div",{className:"absolute bottom-0 left-0 p-24 bg-purple-500/5 rounded-full blur-3xl translate-y-1/3 -translate-x-1/3 pointer-events-none"}),c.jsxs("div",{className:"p-8 pt-12 relative z-10",children:[c.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-2 text-zinc-400 hover:text-zinc-900 transition-colors bg-zinc-100/50 rounded-full hover:bg-zinc-100",children:c.jsx(Yn,{size:20})}),c.jsx("div",{className:"mb-2",children:c.jsx("span",{className:"text-[10px] font-bold tracking-[0.2em] text-blue-600 uppercase",children:"Escher"})}),c.jsxs("h2",{className:"text-3xl font-['Playfair_Display'] font-black text-zinc-900 leading-tight",children:["Travel",c.jsx("br",{}),"Manager"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-4 relative z-10",children:[c.jsx("div",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest mb-2 px-1",children:"Your Trips"}),f.map(p=>{const y=p.id===r;return c.jsx("div",{onClick:()=>{y||(s(p.id),t())},className:`group relative rounded-2xl transition-all cursor-pointer overflow-hidden ${y?"bg-gradient-to-br from-blue-600 to-blue-700 shadow-lg shadow-blue-900/30":"bg-zinc-100 border border-zinc-200 hover:bg-white hover:border-zinc-300 hover:shadow-md"}`,children:c.jsxs("div",{className:"flex items-stretch h-full",children:[c.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between relative z-10",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${y?"bg-white text-blue-600 shadow-lg":"bg-white text-zinc-400"}`,children:c.jsx(Cv,{size:18,strokeWidth:2.5})}),y&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:x=>{x.stopPropagation(),h(!0)},className:"w-6 h-6 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center text-white transition-colors backdrop-blur-md",children:c.jsx(I2,{size:12})}),c.jsx("div",{className:"bg-white/20 backdrop-blur-md px-2 py-1 rounded-full border border-white/20 h-6 flex items-center",children:c.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse shadow-[0_0_8px_white]"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold text-lg mb-1 leading-tight line-clamp-1 ${y?"text-white":"text-zinc-900"}`,children:p.name}),c.jsxs("div",{className:`flex items-center gap-2 text-[11px] font-medium ${y?"text-blue-100":"text-zinc-400"}`,children:[c.jsx(js,{size:11}),c.jsx("span",{children:new Date(p.start_date).toLocaleDateString(void 0,{month:"short"})}),c.jsx("span",{className:"w-1 h-1 bg-current rounded-full opacity-50"}),c.jsxs("span",{children:[p.duration,"d"]})]})]})]}),y&&c.jsx("div",{className:"w-1/4 min-w-[80px] relative h-auto",children:c.jsx(oA,{defaultImage:p.cover_image})})]})},p.id)})]}),c.jsx("div",{className:"p-6 border-t border-zinc-100 bg-white/80 backdrop-blur-xl relative z-20",children:c.jsxs("button",{onClick:async()=>{await i(),h(!0)},className:"w-full flex items-center justify-center gap-2 py-4 bg-zinc-900 text-white hover:bg-zinc-800 active:scale-[0.98] rounded-2xl font-black text-sm transition-all shadow-xl shadow-zinc-900/10",children:[c.jsx(Wt,{size:20,strokeWidth:3}),"Create New Trip"]})}),c.jsx(iA,{isOpen:d,onClose:()=>h(!1),onSave:p=>{u({name:p.tripName,startDate:new Date(p.startDate),duration:p.duration}),h(!1)},initialSettings:{tripName:o,startDate:a.toISOString().split("T")[0],duration:l}})]})]})})}function oA({defaultImage:e}){const{events:t}=sn(),n=t.map(s=>s.image).filter(s=>!!s),r=n.length>0?n[0]:e||"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=600&q=80";return c.jsx(Z.img,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},src:r,alt:"Active Trip Slide",className:"w-full h-full object-cover absolute inset-0"},r)}function Xn({children:e,showNav:t=!0,fullScreen:n=!1}){const[r,s]=Yi.useState(!1);return n?c.jsxs("div",{className:"fixed inset-0 w-screen h-[100dvh] overflow-hidden overscroll-none bg-zinc-50 z-0 touch-none",children:[c.jsx("main",{className:"relative w-full h-full md:max-w-5xl mx-auto bg-zinc-50 shadow-2xl shadow-zinc-200",children:e}),t&&c.jsx(Zp,{}),c.jsx("div",{className:"absolute top-4 right-4 z-50 pointer-events-none",children:c.jsx(k0,{})}),c.jsx(_0,{isOpen:r,onClose:()=>s(!1)})]}):c.jsxs("div",{className:"min-h-screen pb-24 relative overflow-hidden bg-zinc-50 font-sans",children:[c.jsx(_0,{isOpen:r,onClose:()=>s(!1)}),c.jsxs("div",{className:"fixed top-0 left-0 z-[1] px-6 py-4 flex items-center gap-4",children:[c.jsx("button",{onClick:()=>s(!0),className:"p-2 -ml-2 text-white rounded-full hover:bg-white/10 transition-colors z-50 relative",children:c.jsx(A2,{size:24,strokeWidth:2})}),c.jsx(k0,{})]}),c.jsxs("div",{className:"fixed top-0 right-0 z-[1] px-6 py-4 flex flex-col items-end pointer-events-none",children:[c.jsx("h1",{className:"font-['Playfair_Display'] font-black text-2xl tracking-tight text-white leading-none drop-shadow-md",children:"ESCHER"}),c.jsx("span",{className:"text-[10px] font-bold tracking-widest text-white/80 uppercase drop-shadow-sm",children:"Travel Manager"})]}),c.jsx("main",{className:"relative w-full md:max-w-5xl mx-auto min-h-screen",children:e}),t&&c.jsx(Zp,{})]})}function mw({selected:e,onSelect:t}){const n=[{id:"All",icon:c.jsx(Ie,{size:16}),label:"All"},{id:"Transport",icon:c.jsx(ch,{size:16}),label:"GO"},{id:"Stay",icon:c.jsx(_v,{size:16}),label:"Stay"},{id:"Eat",icon:c.jsx(ah,{size:16}),label:"Eat"},{id:"Play",icon:c.jsx($u,{size:16}),label:"Play"}];return c.jsx("div",{className:"flex justify-between items-center gap-2 px-6 w-full pt-2",children:n.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:`
                        flex-1 flex flex-col items-center justify-center gap-1.5 py-2.5 rounded-2xl transition-all border min-w-0
                        ${e===r.id?"bg-[#007AFF] text-white border-[#007AFF] shadow-lg shadow-blue-500/30":"bg-white text-zinc-500 border-zinc-100/50 hover:bg-zinc-50 hover:border-zinc-200"}
                    `,children:[Yi.cloneElement(r.icon,{size:18}),c.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider",children:r.label})]},r.id))})}const aA=Array.from({length:12},(e,t)=>(t+1).toString()),lA=Array.from({length:12},(e,t)=>(t*5).toString().padStart(2,"0")),cA=["AM","PM"],bc=({items:e,selected:t,onSelect:n})=>{const r=b.useRef(null);return b.useEffect(()=>{if(r.current){const s=e.indexOf(t);s!==-1&&(r.current.scrollTop=s*32)}},[]),c.jsx("div",{ref:r,className:"h-32 overflow-y-scroll snap-y snap-mandatory no-scrollbar w-16 py-[48px] relative z-20",onScroll:s=>{const i=s.currentTarget,o=Math.round(i.scrollTop/32);e[o]&&e[o]!==t&&n(e[o])},children:c.jsx("div",{className:"flex flex-col items-center",children:e.map(s=>c.jsx("button",{onClick:()=>n(s),className:`
                            snap-center h-8 w-full flex items-center justify-center text-sm font-bold transition-all shrink-0 select-none
                            ${t===s?"text-[#007AFF] scale-125":"text-zinc-400 hover:text-zinc-600"}
                        `,children:s},s))})})};function uA({initialTime:e,onSave:t,onClose:n}){const r=y=>{try{if(!y||y.startsWith("NaN"))return{hour:"12",minute:"00",period:"AM"};const[x,w]=y.split(" "),[m,g]=x.split(":");return{hour:m||"12",minute:g||"00",period:w||"AM"}}catch{return{hour:"12",minute:"00",period:"AM"}}},{hour:s,minute:i,period:o}=r(e),[a,l]=b.useState(s),[u,d]=b.useState(i),[h,f]=b.useState(o),p=()=>{t(`${a}:${u} ${h}`),n()};return By.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center isolate",onClick:y=>y.stopPropagation(),children:[c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm",onClick:n}),c.jsxs(Z.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl shadow-2xl border border-zinc-200 w-auto p-6 select-none relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-4 h-32 relative",children:[c.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-0 right-0 h-8 bg-zinc-100 rounded-lg -z-10"}),c.jsx(bc,{items:aA,selected:a,onSelect:l}),c.jsx("div",{className:"font-bold text-zinc-300 pb-1 -mx-2",children:":"}),c.jsx(bc,{items:lA,selected:u,onSelect:d}),c.jsx("div",{className:"w-px h-12 bg-zinc-200 mx-1"}),c.jsx(bc,{items:cA,selected:h,onSelect:f})]}),c.jsx("div",{className:"mt-6 pt-4 border-t border-zinc-100 grid grid-cols-1",children:c.jsxs("button",{onClick:p,className:"bg-[#007AFF] text-white text-sm font-bold py-2.5 rounded-xl hover:bg-[#0061C2] transition-colors flex items-center justify-center gap-2",children:[c.jsx(ll,{size:16,strokeWidth:3}),"Set Time"]})})]})]}),document.body)}const dA=e=>{if(!e)return 60;const t=e.match(/(\d+)h/),n=e.match(/(\d+)m/);let r=0;return t&&(r+=parseInt(t[1])*60),n&&(r+=parseInt(n[1])),r||60},Lo=e=>{if(e<=0)return"0m";const t=Math.floor(e/60),n=e%60;return t>0?`${t}h${n>0?` ${n}m`:""}`:`${n}m`};function hA({durationStr:e,onSave:t,onClose:n}){const r=dA(e),s=i=>{const o=Math.max(15,r+i);t(Lo(o))};return c.jsxs(Z.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-2 shadow-2xl z-50 min-w-[120px]",onClick:i=>i.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("button",{onClick:()=>s(-15),className:"w-8 h-8 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors",children:c.jsx(lh,{size:14,strokeWidth:3})}),c.jsx("div",{className:"text-sm font-bold text-white min-w-[3rem] text-center",children:Lo(r)}),c.jsx("button",{onClick:()=>s(15),className:"w-8 h-8 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors",children:c.jsx(Wt,{size:14,strokeWidth:3})})]}),c.jsx("div",{className:"grid grid-cols-3 gap-1 mt-2 pt-2 border-t border-white/10",children:[30,60,90].map(i=>c.jsx("button",{onClick:()=>t(Lo(i)),className:`text-[10px] font-bold py-1 rounded hover:bg-white/10 transition-colors ${r===i?"bg-white/20 text-white":"text-slate-400"}`,children:Lo(i)},i))}),c.jsx("button",{onClick:n,className:"w-full mt-2 py-1.5 bg-[#007AFF] hover:bg-[#007AFF]/90 text-white text-[10px] font-black uppercase tracking-wider rounded-lg transition-colors",children:"Done"}),c.jsx("div",{className:"fixed inset-0 z-[-1]",onClick:n})]})}const Mn=(e,t)=>{const n=e||t;if(!n)return"Unspecified Location";const r=n.split(",").map(s=>s.trim());return r.length>=3?r[Math.max(0,r.length-3)]:r[0]||"Unspecified Location"},Fa=e=>{try{if(!e||e.startsWith("NaN"))return 9*60;const t=e.trim().split(/\s+/),n=t[0],r=t.length>1?t[1]:null;let[s,i]=n.split(":").map(Number);return isNaN(s)||isNaN(i)?9*60:(r&&(r.toUpperCase()==="PM"&&s!==12&&(s+=12),r.toUpperCase()==="AM"&&s===12&&(s=0)),s*60+i)}catch{return 9*60}},fA=e=>{let t=Math.floor(e/60);const n=e%60,r=t>=12?"PM":"AM";return t>12&&(t-=12),(t===0||t===24)&&(t=12),t>24&&(t-=24),`${t}:${n.toString().padStart(2,"0")} ${r}`},pA=e=>{if(!e)return 60;try{const t=e.match(/(\d+)h/),n=e.match(/(\d+)m/);let r=0;return t&&(r+=parseInt(t[1])*60),n&&(r+=parseInt(n[1])),r||60}catch{return 60}},mA=(e,t)=>{if(!e||!Array.isArray(e)||e.length===0)return null;let n;if(t){const o={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"}[t]||t;n=e.find(a=>a.startsWith(o))}if(n||(n=e.find(i=>!i.includes("Closed"))||e[0]),!n)return null;if(n.toLowerCase().includes("24 hours"))return{text:n,open:0,close:24*60};const r=/(\d{1,2}:\d{2}\s*[AP]M)\s*[\-]\s*(\d{1,2}:\d{2}\s*[AP]M)/i,s=n.match(r);return s?{text:n,open:Fa(s[1]),close:Fa(s[2])}:{text:n,open:0,close:24*60}},gA=(e,t,n)=>{if(!e)return"text-white/90";const r=Fa(e);if(!r)return"text-white/90";if(r<t||r>=n)return"text-red-400";const s=60;return Math.abs(r-t)<=s||Math.abs(n-r)<=s?"text-yellow-400":"text-white/90"};function yA({event:e,isLast:t,isFirst:n,isCompact:r=!1,icon:s,onClick:i,onCheckIn:o,onSkip:a,nextCongestion:l,onTimeChange:u,onBufferChange:d,onDurationChange:h,onDescriptionChange:f,onDescriptionSave:p,selectedDayName:y}){var R,A,L;const[x,w]=b.useState(e.description||"");b.useEffect(()=>{w(e.description||"")},[e.description]);const m=b.useRef(null),[g,v]=b.useState(!1),[j,k]=b.useState(!1),[S,_]=b.useState(!1),E=!!e.travelTime&&!r,N=e.status==="Skipped",T=e.status==="Checked In",C=n;let I="bg-blue-200",H="border-zinc-200",Q="text-zinc-500",se="bg-zinc-100",fe="bg-blue-200";l==="high"?fe="bg-red-500":l==="moderate"?fe="bg-amber-400":l==="low"&&(fe="bg-emerald-400"),E&&(e.congestion==="high"?(I="bg-red-500",H="border-red-200",Q="text-red-600",se="bg-red-50"):e.congestion==="moderate"?(I="bg-amber-400",H="border-amber-200",Q="text-amber-600",se="bg-amber-50"):e.congestion==="low"&&(I="bg-emerald-400",H="border-emerald-200",Q="text-emerald-600",se="bg-emerald-50"));const ne=mA(e.openingHours,y),D=ne?gA(e.time,ne.open,ne.close):"text-white/90";let P=e.time;if(e.duration&&e.time&&!r&&!N){const M=Fa(e.time),ee=pA(e.duration),je=M+ee,Rt=fA(je);P=`${e.time}  ${Rt}`}return c.jsxs("div",{className:"flex flex-col items-center relative group pb-4 w-full",children:[c.jsx("div",{className:`absolute top-0 w-[5px] left-1/2 -translate-x-1/2 ${C?"bg-blue-200":I} transition-colors duration-500 z-0`,style:{height:E?"64px":"0px"}}),!t&&c.jsx("div",{className:`absolute bottom-0 w-[5px] left-1/2 -translate-x-1/2 ${fe} transition-colors duration-500 z-0`,style:{top:E||C?"64px":"0px"}}),(E||C)&&c.jsx("div",{className:"h-16 w-full flex items-center justify-center relative z-10",children:c.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${C?"items-start pt-2":""} ${N?"opacity-30":""}`,children:C?c.jsx("div",{className:"flex items-center justify-center relative z-30 group/start",children:c.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-full flex items-center shadow-xl z-20 overflow-hidden",children:[c.jsxs("div",{className:"relative flex items-center gap-2 pl-4 pr-3 py-1.5 border-r border-blue-100 hover:bg-blue-50 transition-colors active:bg-blue-100 cursor-pointer",onClick:()=>k(!0),children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#007AFF] shadow-[0_0_10px_rgba(0,122,255,0.4)] animate-pulse"}),c.jsxs("span",{className:`text-[12px] ${D==="text-white/90"?"text-[#007AFF]":D} font-black uppercase tracking-widest flex items-center gap-1.5`,children:[e.time,c.jsx(Pv,{size:10,className:"opacity-40"})]}),c.jsx(Ke,{children:j&&c.jsx(uA,{initialTime:e.time,onSave:M=>{u==null||u(e.id,M),k(!1)},onClose:()=>k(!1)})})]}),c.jsxs("button",{onClick:M=>{M.stopPropagation();const ee=new Date,je=`${ee.getHours().toString().padStart(2,"0")}:${ee.getMinutes().toString().padStart(2,"0")}`;u==null||u(e.id,je)},className:"flex items-center gap-1.5 text-[#007AFF] hover:bg-blue-50 px-4 py-1.5 transition-colors active:bg-blue-100 h-full",children:[c.jsx(M2,{size:13,strokeWidth:2.5}),c.jsx("span",{className:"text-[10px] font-black tracking-tighter uppercase whitespace-nowrap",children:"Now"})]})]})}):c.jsx("div",{className:`${se} border-2 ${H} rounded-full px-5 py-2 flex items-center gap-2.5 shadow-xl whitespace-nowrap transition-all duration-500 z-20 hover:scale-105 backdrop-blur-sm`,children:c.jsxs("span",{className:`text-[11px] ${Q} font-black uppercase tracking-widest flex items-center gap-2.5`,children:[c.jsx(Nt,{size:14,strokeWidth:3,className:Q}),e.travelTime]})})})}),c.jsx("div",{className:`w-full max-w-[500px] px-2 relative z-10 transition-all duration-300 ${N?"opacity-50":""}`,children:e.id==="1"&&e.type==="Transport"?c.jsxs("div",{className:"rounded-[1.75rem] overflow-hidden shadow-2xl shadow-blue-900/20 mb-2 group/card cursor-pointer transition-transform hover:scale-[1.01]",onClick:i,children:[c.jsx("div",{className:"bg-[#0B1221] p-6 relative",children:c.jsxs("div",{className:"flex justify-between items-start text-white relative z-10",children:[c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsxs("div",{className:"flex items-center bg-white/5 backdrop-blur-md rounded-full border border-white/10 overflow-hidden shadow-sm",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-300 px-2.5 py-1 border-r border-white/5",children:e.time}),c.jsxs("button",{onClick:M=>{M.stopPropagation();const ee=e.parkingBuffer??10,je=ee>=30?0:ee+10;d==null||d(e.id,je)},className:"flex items-center gap-1.5 px-2.5 py-1 text-[9px] text-slate-400 hover:bg-white/5 hover:text-[#007AFF] transition-all font-bold group/park",title:"Adjust airport buffer/parking time",children:[c.jsx(Ao,{size:10,className:"text-[#007AFF] opacity-70 group-hover/park:opacity-100"}),c.jsxs("span",{children:[e.parkingBuffer??10," ",(e.parkingBuffer??10)===1?"min":"mins"," parking"]})]})]})}),c.jsx("div",{className:"text-3xl font-bold tracking-wider mb-1",children:"CGK"}),c.jsx("div",{className:"text-xs text-slate-400 font-medium",children:"Jakarta"})]}),c.jsxs("div",{className:"flex-grow mx-4 relative h-12 flex flex-col items-center justify-center",children:[c.jsx("div",{className:"absolute top-3 w-full h-8 border-t-2 border-dashed border-slate-600 rounded-[50%] opacity-30",style:{transform:"scaleY(0.5)"}}),c.jsx(ch,{size:16,className:"text-slate-400 rotate-90 absolute -top-0.5",fill:"currentColor"}),c.jsx("span",{className:"text-[10px] text-slate-500 font-bold mt-5",children:((A=(R=e.description)==null?void 0:R.match(/(\d+h \d+m)/))==null?void 0:A[0])||"2h 15m"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-slate-400 font-bold mb-1 opacity-80",children:e.endTime||"11:15"}),c.jsx("div",{className:"text-3xl font-bold tracking-wider mb-1",children:"DPS"}),c.jsx("div",{className:"text-xs text-slate-400 font-medium",children:"Bali"})]})]})}),c.jsxs("div",{className:"bg-[#007AFF] p-5 flex justify-between items-center text-white relative",children:[c.jsx("div",{className:"absolute -top-3 -left-3 w-6 h-6 bg-zinc-50 rounded-full"}),c.jsx("div",{className:"absolute -top-3 -right-3 w-6 h-6 bg-zinc-50 rounded-full"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] opacity-70 font-bold uppercase tracking-wider mb-0.5",children:"Flight number"}),c.jsx("div",{className:"text-lg font-bold tracking-wide",children:"AK 5798"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-[10px] opacity-70 font-bold uppercase tracking-wider mb-0.5",children:"Gate no."}),c.jsx("div",{className:"text-lg font-bold tracking-wide",children:"B2"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[10px] opacity-70 font-bold uppercase tracking-wider mb-0.5",children:"Seat no."}),c.jsx("div",{className:"text-lg font-bold tracking-wide",children:"24F"})]})]})]}):N?c.jsxs("div",{onClick:i,className:`p-6 rounded-[1.75rem] relative group/card cursor-pointer flex flex-col gap-3 
                                bg-zinc-100 border border-zinc-200 opacity-60 grayscale hover:opacity-80 transition-all`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center bg-zinc-200/50 rounded-full border border-zinc-300/50 overflow-hidden shadow-sm",children:[c.jsx("span",{className:"text-[11px] font-bold text-zinc-400 px-3 py-1 border-r border-zinc-300/30",children:P}),c.jsxs("button",{onClick:M=>{M.stopPropagation();const ee=e.parkingBuffer??10,je=ee>=30?0:ee+10;d==null||d(e.id,je)},className:"flex items-center gap-1.5 px-3 py-1 text-[10px] text-zinc-400 font-bold hover:bg-zinc-300/50 hover:text-[#007AFF] transition-all",children:[c.jsx(Ao,{size:10}),c.jsxs("span",{children:[e.parkingBuffer??10," ",(e.parkingBuffer??10)===1?"min":"mins"," parking"]})]})]})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("span",{className:"text-[10px] text-zinc-500 bg-zinc-200 px-2 py-0.5 rounded-full font-bold border border-zinc-300",children:"Skipped"})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-zinc-500 mb-1.5 leading-tight line-through decoration-zinc-400",children:e.title}),e.description&&c.jsx("p",{className:"text-sm text-zinc-400 mb-2 leading-relaxed font-medium",children:e.description})]}),(e.duration||e.rating)&&c.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-500 font-bold",children:[e.rating&&c.jsxs("div",{className:"flex items-center gap-1 text-[#007AFF]",children:[c.jsx(Ts,{size:14,fill:"currentColor"}),c.jsx("span",{className:"text-zinc-200",children:e.rating}),c.jsxs("span",{className:"text-zinc-500 font-medium",children:["(",e.reviews,")"]})]}),e.duration&&c.jsxs("div",{className:"flex items-center gap-1.5 bg-zinc-800 px-2.5 py-1.5 rounded-lg border border-zinc-700 text-zinc-300",children:[c.jsx(Nt,{size:13}),c.jsx("span",{children:e.duration})]})]}),c.jsx("div",{className:"grid gap-2.5 mt-2",children:c.jsxs("button",{onClick:M=>{M.stopPropagation(),a==null||a(e.id)},className:"flex items-center justify-center gap-2 py-3 px-3 rounded-xl bg-white border border-zinc-200 text-zinc-500 hover:bg-zinc-50 transition-all text-xs font-bold w-full shadow-sm",children:[c.jsx(U2,{size:15}),"Restore Activity"]})})]}):r?c.jsxs("div",{onClick:i,className:"bg-white border border-zinc-200 rounded-2xl p-4 shadow-sm flex items-center gap-4 cursor-pointer hover:border-blue-300 transition-all",children:[c.jsxs("div",{className:"flex items-center bg-zinc-100 rounded-lg border border-zinc-200 overflow-hidden shadow-sm",children:[c.jsx("span",{className:`text-xs font-bold ${D==="text-white/90"?"text-zinc-500":D} whitespace-nowrap bg-zinc-100 px-3 py-1.5 border-r border-zinc-200/50 min-w-[3.5rem] text-center`,children:P}),c.jsxs("button",{onClick:M=>{M.stopPropagation();const ee=e.parkingBuffer??10,je=ee>=30?0:ee+10;d==null||d(e.id,je)},className:"flex items-center gap-1.5 text-[10px] text-zinc-400 font-bold hover:bg-zinc-200/30 hover:text-[#007AFF] transition-colors px-3 py-1.5 whitespace-nowrap",children:[c.jsx(Ao,{size:10}),c.jsxs("span",{children:[e.parkingBuffer??10," ",(e.parkingBuffer??10)===1?"min":"mins"," parking"]})]})]}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("h3",{className:"text-sm font-bold text-zinc-900 truncate",children:e.title}),e.duration&&c.jsxs("p",{className:"text-[10px] text-zinc-400 font-medium flex items-center gap-1",children:[c.jsx(Nt,{size:10})," ",e.duration]})]}),c.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-50 flex items-center justify-center text-zinc-400",children:c.jsx("div",{className:"scale-75",children:s})})]}):c.jsxs("div",{className:"rounded-[1.75rem] overflow-hidden shadow-2xl shadow-blue-900/20 mb-2 group/card cursor-pointer transition-transform hover:scale-[1.005] bg-[#0B1221]",onClick:i,children:[c.jsxs("div",{className:"p-6 pb-6 relative overflow-hidden h-full min-h-[160px] flex flex-col justify-between",children:[e.image&&c.jsx(c.Fragment,{children:c.jsxs("div",{className:"absolute inset-0 z-0",children:[c.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover/card:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0B1221]/90 via-[#0B1221]/50 to-[#0B1221]/30"})]})}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex items-center bg-[#0B1221]/60 backdrop-blur-md rounded-full border border-white/10 overflow-hidden shadow-lg",children:[c.jsx("span",{className:`text-sm font-bold ${D} px-3.5 py-1.5 border-r border-white/5`,children:P}),n?c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-1.5 text-white/90",children:[c.jsx(Ie,{size:14,className:"text-[#007AFF]"}),c.jsx("span",{className:"text-sm font-bold",children:"Start"})]}):e.isEnd?c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-1.5 text-white/90",children:[c.jsx(Ie,{size:14,className:"text-red-400"}),c.jsx("span",{className:"text-sm font-bold",children:"End"})]}):c.jsxs("button",{onClick:M=>{M.stopPropagation();const ee=e.parkingBuffer??10,je=ee>=30?0:ee+10;d==null||d(e.id,je)},className:"flex items-center gap-2 px-3 py-1.5 text-slate-300 hover:bg-white/5 hover:text-white transition-all group/park",title:"Adjust parking/buffer time",children:[c.jsx(Ao,{size:13,className:"text-[#007AFF] opacity-80 group-hover/park:opacity-100 transition-opacity"}),c.jsxs("span",{className:"text-[11px] font-bold",children:[e.parkingBuffer??10," ",(e.parkingBuffer??10)===1?"min":"mins"," parking"]})]})]})}),e.status&&e.status!=="Scheduled"&&c.jsx("span",{className:"text-[10px] text-zinc-400 bg-zinc-800/50 px-2.5 py-1 rounded-full font-bold border border-zinc-700/50 backdrop-blur-md",children:e.status})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-2 leading-tight tracking-wide drop-shadow-md",children:e.title}),c.jsxs("div",{className:"relative w-full mb-4",children:[c.jsx("input",{ref:m,type:"text",value:x,onChange:M=>w(M.target.value),onFocus:()=>v(!0),onBlur:M=>{f==null||f(e.id,M.target.value),p==null||p(e.id,M.target.value),setTimeout(()=>v(!1),200)},onClick:M=>M.stopPropagation(),placeholder:"Add notes...",className:"w-full bg-white text-zinc-800 rounded-lg pl-3 pr-16 py-2 font-light italic text-xs placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all shadow-sm"}),c.jsx(Ke,{children:g&&c.jsx("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 bg-[#007AFF] text-white text-[10px] font-bold px-3 py-1.5 rounded-md shadow-md cursor-pointer hover:bg-blue-600 transition-colors z-10",onClick:M=>{var ee;M.stopPropagation(),(ee=m.current)==null||ee.blur()},children:"Done"})})]}),(e.duration||e.rating||e.openingHours)&&c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-300 font-bold",children:[e.rating&&c.jsxs("div",{className:"flex items-center gap-1 text-[#007AFF] bg-[#0B1221]/40 px-2 py-1 rounded-lg backdrop-blur-md border border-white/5",children:[c.jsx(Ts,{size:14,fill:"currentColor"}),c.jsx("span",{className:"text-slate-100",children:e.rating}),c.jsxs("span",{className:"text-slate-400 font-medium",children:["(",(L=e.reviews)==null?void 0:L.toLocaleString(),")"]})]}),e.duration&&c.jsxs("div",{className:"relative group/duration z-50",children:[c.jsxs("div",{onClick:M=>{M.stopPropagation(),_(!0)},className:"flex items-center gap-1.5 bg-[#0B1221]/40 px-2.5 py-1.5 rounded-lg border border-white/10 text-slate-200 shadow-sm backdrop-blur-md cursor-pointer hover:bg-white/10 hover:border-white/20 transition-all select-none",children:[c.jsx(Nt,{size:13,className:"text-[#007AFF]"}),c.jsx("span",{children:e.duration})]}),c.jsx(Ke,{children:S&&c.jsx(hA,{durationStr:e.duration,onSave:M=>{h==null||h(e.id,M)},onClose:()=>_(!1)})})]})]}),e.openingHours&&ne&&c.jsx("div",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1.5 opacity-80 pl-0.5",children:c.jsx("span",{className:D,children:ne.text})})]})]})]}),c.jsxs("div",{className:"bg-[#007AFF] p-4 relative",children:[c.jsx("div",{className:"absolute -top-3 -left-3 w-6 h-6 bg-zinc-50 rounded-full"}),c.jsx("div",{className:"absolute -top-3 -right-3 w-6 h-6 bg-zinc-50 rounded-full"}),c.jsxs("div",{className:"grid gap-2.5",children:[c.jsxs(Ca,{to:`/place/${e.id}`,onClick:M=>M.stopPropagation(),className:"flex items-center justify-between bg-white text-[#007AFF] text-xs font-bold py-3 px-5 rounded-xl transition-all hover:bg-white/90 hover:scale-[1.01] shadow-sm w-full",children:[c.jsx("span",{children:"View Details"}),c.jsx(Nr,{size:14,className:"opacity-70"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[c.jsxs("button",{onClick:M=>{M.stopPropagation(),o==null||o(e.id)},className:`
                                                flex items-center justify-center gap-2 py-3 px-3 rounded-xl transition-all text-xs font-bold border
                                                ${T?"bg-white text-[#007AFF] border-white shadow-md":"bg-[#005EC2] text-white/90 border-white/10 hover:bg-[#0051A8] hover:text-white"}
                                            `,children:[c.jsx(b2,{size:15,className:T?"fill-[#007AFF] text-white":""}),T?"Checked In":"Check In"]}),c.jsxs("button",{onClick:M=>{M.stopPropagation(),a==null||a(e.id)},className:"flex items-center justify-center gap-2 py-3 px-3 rounded-xl bg-[#005EC2] text-blue-200 border border-white/10 hover:bg-[#0051A8] hover:text-white transition-all text-xs font-bold",children:[c.jsx(S2,{size:15}),"Skip"]})]})]})]})]})})]})}function vA(e){const t={};try{const n=new URL(e),r=e.match(/\/place\/([^/@]+)/);r&&(t.query=decodeURIComponent(r[1].replace(/\+/g," ")));const s=e.match(/!1s(0x[a-f0-9]+:0x[a-f0-9]+|ChIJ[A-Za-z0-9_-]+)/i);s&&(t.placeId=s[1]);const i=n.searchParams.get("place_id");i&&(t.placeId=i);const o=e.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(o&&(t.coords={lat:parseFloat(o[1]),lng:parseFloat(o[2])}),!t.query){const a=n.searchParams.get("q");a&&(t.query=a)}return t}catch{return t}}async function xA(e){try{const r=new AbortController,s=setTimeout(()=>r.abort(),8e3),i=await fetch("/api/parse-place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e}),signal:r.signal});if(clearTimeout(s),i.ok){const o=await i.json();if(o&&o.name)return{success:!0,data:o}}}catch(r){console.warn("API parsing failed or timed out, falling back to local regex:",r)}const t=vA(e),n=e.includes("maps.app.goo.gl")||e.includes("goo.gl/maps");return!t.query&&!t.coords&&!t.placeId&&!n?{success:!1,error:"Could not extract place info from URL. Try copying the full Google Maps URL."}:n&&!t.query?{success:!0,data:{name:"New Place",address:"Details from link",placeId:`link-${Date.now()}`,googleMapsUrl:e}}:t.query?{success:!0,data:{name:t.query.split(",")[0].trim(),address:t.query,placeId:t.placeId||"unknown",googleMapsUrl:e}}:t.coords?{success:!0,data:{name:"Location",address:`${t.coords.lat}, ${t.coords.lng}`,placeId:t.placeId||"unknown",lat:t.coords.lat,lng:t.coords.lng,googleMapsUrl:e}}:{success:!0,data:{name:"Google Maps Location",address:"See link for details",placeId:t.placeId||"unknown",googleMapsUrl:e}}}function wA(e){if(!e)return"Play";const t={airport:"Transport",bus_station:"Transport",train_station:"Transport",transit_station:"Transport",taxi_stand:"Transport",subway_station:"Transport",lodging:"Stay",hotel:"Stay",motel:"Stay",resort:"Stay",campground:"Stay",restaurant:"Eat",cafe:"Eat",bakery:"Eat",bar:"Eat",food:"Eat",meal_delivery:"Eat",meal_takeaway:"Eat"};for(const n of e)if(t[n])return t[n];return"Play"}function bA(e){return/^https?:\/\/(www\.)?(google\.com\/maps|maps\.google\.com|maps\.app\.goo\.gl|goo\.gl\/maps)/i.test(e)}async function Sc(e,t){var n;if(e.length<2)return e;try{console.log("[Traffic Debug] Making API call with",e.length,"events. Fixed End:",t==null?void 0:t.fixEnd);const r=await fetch("/api/optimize-route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e,preserveOrder:t==null?void 0:t.preserveOrder,fixEnd:t==null?void 0:t.fixEnd})});if(console.log("[Traffic Debug] API response status:",r.status),!r.ok){const f=await r.text();throw console.error("[Traffic Debug] Optimization failed:",f),new Error(`Optimization failed: ${r.status} ${r.statusText} - ${f}`)}const s=await r.json();if(console.log("[Traffic Debug] Response has routes:",!!s.routes,"Count:",(n=s.routes)==null?void 0:n.length),!s.routes||!s.routes[0])return console.log("[Traffic Debug] No routes - Full response:",JSON.stringify(s,null,2)),e;const i=s.routes[0],o=i.legs;console.log("[Traffic Debug] Legs count:",o==null?void 0:o.length);const a=e[0];let l,u=null;t!=null&&t.fixEnd?(u=e[e.length-1],l=e.slice(1,-1)):l=e.slice(1);let d=l;if(console.log("[Traffic Debug] Original Intermediates:",l.map(f=>f.title)),!(t!=null&&t.preserveOrder))if(i.optimizedIntermediateWaypointIndex){const f=i.optimizedIntermediateWaypointIndex;console.log("[Traffic Debug] Optimized Indices from Google:",f),d=f.map(p=>l[p]),console.log("[Traffic Debug] New Intermediates Order:",d.map(p=>p.title))}else console.warn('[Traffic Debug] API returned 200 OK but NO "optimizedIntermediateWaypointIndex". This usually means "Routes API" is not fully enabled or the route is trivial.');const h=[a,...d];return u&&h.push(u),h.forEach((f,p)=>{if(p===0){f.travelTime=void 0,f.congestion=void 0;return}const y=o[p-1];if(console.log(`[Traffic Debug] Event ${p}: ${f.title}, Leg:`,y),y&&y.duration){const x=parseInt(y.duration.replace("s","")),w=Math.ceil(x/60),m=Math.floor(w/60),g=w%60,v=m>0?`${m}h ${g}m`:`${g}m`,j=y.distanceMeters?y.distanceMeters/1e3:null,k=j!==null?new Intl.NumberFormat("en-US",{minimumFractionDigits:1,maximumFractionDigits:1}).format(j):null;if(f.travelTime=k?`${v}  ${k} KM`:v,f.travelDistance=k?`${k} KM`:void 0,y.staticDuration){const S=parseInt(y.staticDuration.replace("s","")),_=x/S;console.log(`[Traffic Debug] Ratio for ${f.title}: ${_.toFixed(2)} (${x}s / ${S}s)`),_>1.3?f.congestion="high":_>1.1?f.congestion="moderate":f.congestion="low",console.log(`[Traffic Debug] Congestion for ${f.title}: ${f.congestion}`)}else f.congestion="low",console.log(`[Traffic Debug] No staticDuration for ${f.title}, defaulting to 'low'`)}else console.log(`[Traffic Debug] No leg data for event ${p}: ${f.title}`)}),console.log("[Traffic Debug] Final events with congestion:",h.map(f=>({title:f.title,travelTime:f.travelTime,congestion:f.congestion}))),h}catch(r){return console.error("Error optimizing route:",r),e}}function gw({isOpen:e,onClose:t,onSave:n,initialData:r,hideDuration:s=!1}){const i=_=>{if(!_)return 60;let E=0;const N=_.match(/(\d+)\s*h/),T=_.match(/(\d+)\s*m/);return N&&(E+=parseInt(N[1])*60),T&&(E+=parseInt(T[1])),E||60},o=_=>{if(_<=0)return"0m";const E=Math.floor(_/60),N=_%60;return E>0&&N>0?`${E}h ${N}m`:E>0?`${E}h`:`${N}m`},[a,l]=b.useState("INPUT"),[u,d]=b.useState(!1),[h,f]=b.useState(null),[p,y]=b.useState(""),[x,w]=b.useState(60),[m,g]=b.useState({title:"",type:"Play",time:"TBD",description:"",placeId:""});b.useEffect(()=>{e&&(f(null),r?(g({id:r.id,title:r.title,type:r.type,time:r.time,description:r.description||"",googleMapsLink:r.googleMapsLink||"",rating:r.rating,duration:r.duration,placeId:r.placeId,openingHours:r.openingHours}),y(r.googleMapsLink||""),w(i(r.duration)),l("PREVIEW")):(l("INPUT"),y(""),w(60),g({title:"",type:"Play",time:"TBD",description:"",placeId:""})))},[e,r]);const v=_=>{w(E=>Math.max(0,E+_))};if(!e)return null;const j=async()=>{if(p){if(d(!0),f(null),!bA(p)){f("Please paste a valid Google Maps link"),d(!1);return}try{const _=await xA(p);if(!_.success||!_.data){f(_.error||"Failed to fetch place details"),d(!1);return}const E=_.data;console.log("DEBUG: API result:",E),console.log("DEBUG: openingHours:",E.openingHours),g(N=>{var T;return{...N,title:E.name,type:wA(E.types),description:E.address,googleMapsLink:E.googleMapsUrl,rating:E.rating,reviews:E.reviewCount,image:(T=E.photos)==null?void 0:T[0],placeId:E.placeId,lat:E.lat,lng:E.lng,address:E.address,openingHours:E.openingHours}}),l("PREVIEW")}catch{f("Network error. Please try again.")}finally{d(!1)}}},k=async()=>{console.log("!!! [AddActivityModal] Confirming with:",m.openingHours),await n({...m,googleMapsLink:p,duration:o(x),placeId:m.placeId,lat:m.lat,lng:m.lng,address:m.address,openingHours:m.openingHours})!==!1&&t()},S=()=>{t(),setTimeout(()=>{l("INPUT"),y(""),w(60)},300)};return c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:S}),c.jsx("div",{className:`relative w-full max-w-lg bg-white rounded-2xl shadow-2xl transition-all duration-300 overflow-hidden ${a==="PREVIEW"?"scale-105":"scale-100"}`,children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-zinc-900",children:[a==="INPUT"&&c.jsx($2,{className:"text-emerald-500",size:24}),a==="INPUT"?"Add a Place":r?"Edit Details":"Confirm Details"]}),c.jsx("button",{onClick:S,className:"p-2 hover:bg-zinc-100 rounded-full text-zinc-400 hover:text-zinc-600 transition-colors",children:c.jsx(Yn,{size:20})})]}),a==="INPUT"?c.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-left-4",children:c.jsxs("div",{className:"p-6 bg-blue-50/50 rounded-xl border border-blue-100 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 text-[#007AFF] shadow-sm border border-blue-100",children:c.jsx(Ie,{size:24})}),c.jsx("h3",{className:"text-lg font-bold text-zinc-900 mb-1",children:"Paste Google Maps Link"}),c.jsx("p",{className:"text-sm text-zinc-500 mb-6",children:"We'll automatically extract the details."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:p,onChange:_=>{y(_.target.value),f(null)},placeholder:"https://goo.gl/maps/...",className:`flex-1 bg-white border rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100 shadow-sm text-zinc-900 placeholder:text-zinc-400 ${h?"border-red-300 focus:border-red-400":"border-zinc-200 focus:border-blue-300"}`,onKeyDown:_=>_.key==="Enter"&&j()}),c.jsx("button",{onClick:j,disabled:u||!p,className:"bg-[#007AFF] text-white font-bold px-5 py-2 rounded-xl text-sm disabled:opacity-50 flex items-center gap-2 shadow-lg shadow-blue-500/20 hover:bg-[#0061c2] active:scale-95 transition-all",children:u?c.jsx(Nv,{size:18,className:"animate-spin"}):c.jsx(Nr,{size:18})})]}),h&&c.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-3 bg-red-50 p-2 rounded-lg border border-red-100",children:[c.jsx(Tv,{size:14}),c.jsx("span",{children:h})]})]})}):c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4",children:[c.jsxs("div",{className:"bg-zinc-50 rounded-2xl overflow-hidden border border-zinc-200 shadow-sm",children:[c.jsxs("div",{className:"h-40 bg-zinc-200 relative overflow-hidden group",children:[m.image?c.jsx("img",{src:m.image,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-100 text-zinc-300",children:c.jsx(Ie,{size:48})}),c.jsx("div",{className:"absolute top-0 inset-x-0 h-20 bg-gradient-to-b from-black/60 to-transparent"}),c.jsx("div",{className:"absolute top-3 right-3 bg-white/20 backdrop-blur-md px-2.5 py-1 rounded-full text-[10px] font-bold text-white uppercase tracking-wider border border-white/20 shadow-sm",children:m.type}),c.jsx("div",{className:"absolute bottom-0 inset-x-0 h-24 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),c.jsxs("div",{className:"absolute bottom-3 left-4 right-4 text-white",children:[c.jsx("h3",{className:"text-xl font-bold leading-tight drop-shadow-md line-clamp-2",children:m.title}),c.jsx("div",{className:"flex items-center gap-1 mt-1 text-xs font-medium text-white/90",children:c.jsx("span",{className:"opacity-80 line-clamp-1",children:Mn(m.address)})})]})]}),c.jsx("div",{className:"p-4 space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[!s&&c.jsxs("div",{className:"col-span-2 flex items-center justify-between bg-white p-3 rounded-xl border border-zinc-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-zinc-500 px-1",children:[c.jsx(Nt,{size:16}),c.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Duration"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>v(-30),className:"w-8 h-8 rounded-lg bg-zinc-100 hover:bg-zinc-200 flex items-center justify-center text-zinc-600 transition-colors",children:c.jsx(lh,{size:14,strokeWidth:3})}),c.jsx("span",{className:"text-zinc-900 font-bold min-w-[60px] text-center text-sm",children:o(x)}),c.jsx("button",{onClick:()=>v(30),className:"w-8 h-8 rounded-lg bg-zinc-100 hover:bg-zinc-200 flex items-center justify-center text-zinc-600 transition-colors",children:c.jsx(Wt,{size:14,strokeWidth:3})})]})]}),c.jsxs("div",{className:"col-span-2 flex items-center gap-3 bg-white p-3 rounded-xl border border-zinc-200 shadow-sm",children:[c.jsx(P2,{size:16,className:"text-zinc-400 shrink-0"}),c.jsx("input",{type:"text",value:p,onChange:_=>y(_.target.value),placeholder:"Google Maps Link",className:"bg-transparent border-none text-sm text-zinc-900 focus:outline-none w-full placeholder:text-zinc-400 font-medium truncate"})]})]})})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>l("INPUT"),className:"flex-1 py-3.5 rounded-xl border border-zinc-200 text-zinc-600 font-bold text-sm hover:bg-zinc-50 hover:border-zinc-300 transition-all",children:r?"Back":"Paste New Link"}),c.jsx("button",{onClick:k,className:"flex-[2] bg-[#007AFF] text-white font-bold py-3.5 rounded-xl shadow-lg shadow-blue-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:r?"Save Changes":"Confirm Insert"})]})]})]})})]})}function SA({isOpen:e,onClose:t,savedPlaces:n,onSelectPlace:r,onAddNew:s}){const[i,o]=b.useState(""),[a,l]=b.useState(null),[u,d]=b.useState({}),[h,f]=b.useState(new Set),[p,y]=b.useState(new Set),x=b.useMemo(()=>n.filter(S=>{var _;return S.title.toLowerCase().includes(i.toLowerCase())||((_=S.description)==null?void 0:_.toLowerCase().includes(i.toLowerCase()))}),[n,i]),w=S=>u[S]||60,m=(S,_,E)=>{E.stopPropagation(),d(N=>({...N,[S]:Math.max(30,(N[S]||60)+_)}))},g=(S,_)=>{_.stopPropagation(),f(E=>{const N=new Set;return E.has(S)||N.add(S),N})},v=(S,_)=>{_.stopPropagation(),y(E=>{const N=new Set;return E.has(S)||N.add(S),N})},j=S=>{const _=Math.floor(S/60),E=S%60;return _>0&&E>0?`${_}h ${E}m`:_>0?`${_}h`:`${E}m`},k=S=>{const _=h.has(S.id),E=p.has(S.id);r(S,w(S.id),_,E),f(N=>{const T=new Set(N);return T.delete(S.id),T}),y(N=>{const T=new Set(N);return T.delete(S.id),T})};return e?c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),c.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[80vh] flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-zinc-100 flex justify-between items-center bg-zinc-50",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold text-zinc-900",children:"Add from Library"}),c.jsx("p",{className:"text-xs text-zinc-500",children:"Add multiple places to your day"})]}),c.jsx("button",{onClick:t,className:"px-4 py-2 bg-zinc-900 text-white rounded-lg text-sm font-bold shadow-sm hover:bg-zinc-800 transition-colors",children:"Done"})]}),c.jsx("div",{className:"p-4 bg-white border-b border-zinc-100",children:c.jsxs("div",{className:"relative",children:[c.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:18}),c.jsx("input",{type:"text",placeholder:"Search your places...",value:i,onChange:S=>o(S.target.value),className:"w-full bg-zinc-50 border border-zinc-200 rounded-xl pl-10 pr-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300 transition-all font-medium text-zinc-700"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-zinc-50/50",children:x.length>0?(()=>{const S=[];return[...x].sort((E,N)=>{const T=Mn(E.address,E.description),C=Mn(N.address,N.description);return T.localeCompare(C)||E.title.localeCompare(N.title)}).forEach(E=>{const N=Mn(E.address,E.description),T=S[S.length-1];T&&T.area===N?T.places.push(E):S.push({area:N,places:[E]})}),S.map(E=>c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"pt-2 pb-1 px-1",children:c.jsxs("h3",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx(Ie,{size:10,className:"text-zinc-300"}),E.area]})}),c.jsx("div",{className:"space-y-3",children:E.places.map(N=>c.jsxs("div",{onClick:()=>l(N.id),className:`bg-white rounded-xl border border-zinc-100 shadow-sm p-3 transition-all cursor-pointer group hover:border-blue-200 ${a===N.id?"ring-2 ring-blue-500 border-transparent":""}`,children:[c.jsxs("div",{className:"flex justify-between items-start gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-zinc-400 bg-zinc-100 px-1.5 py-0.5 rounded",children:N.type}),c.jsx("h3",{className:"font-bold text-zinc-900 text-sm line-clamp-1",children:N.title})]}),c.jsx("p",{className:"text-xs text-zinc-500 line-clamp-1 font-medium",children:Mn(N.address,N.description)})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-zinc-50 rounded-lg p-1 border border-zinc-200",onClick:T=>T.stopPropagation(),children:[c.jsx("button",{onClick:T=>m(N.id,-30,T),className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-zinc-200 text-zinc-600 transition-colors",children:c.jsx(lh,{size:12,strokeWidth:3})}),c.jsx("span",{className:"text-xs font-bold text-zinc-700 min-w-[40px] text-center",children:j(w(N.id))}),c.jsx("button",{onClick:T=>m(N.id,30,T),className:"w-6 h-6 flex items-center justify-center rounded-md hover:bg-zinc-200 text-zinc-600 transition-colors",children:c.jsx(Wt,{size:12,strokeWidth:3})})]})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-3 px-1",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group/chk",onClick:T=>T.stopPropagation(),children:[c.jsx("div",{onClick:T=>g(N.id,T),className:`w-4 h-4 rounded border flex items-center justify-center transition-all ${h.has(N.id)?"bg-[#007AFF] border-[#007AFF]":"border-zinc-300 bg-white group-hover/chk:border-blue-400"}`,children:h.has(N.id)&&c.jsx(Wt,{size:10,className:"text-white",strokeWidth:4})}),c.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${h.has(N.id)?"text-[#007AFF]":"text-zinc-400"}`,children:"Start"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group/chk",onClick:T=>T.stopPropagation(),children:[c.jsx("div",{onClick:T=>v(N.id,T),className:`w-4 h-4 rounded border flex items-center justify-center transition-all ${p.has(N.id)?"bg-[#007AFF] border-[#007AFF]":"border-zinc-300 bg-white group-hover/chk:border-blue-400"}`,children:p.has(N.id)&&c.jsx(Wt,{size:10,className:"text-white",strokeWidth:4})}),c.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${p.has(N.id)?"text-[#007AFF]":"text-zinc-400"}`,children:"End"})]})]}),c.jsx("button",{onClick:T=>{T.stopPropagation(),k(N)},className:"w-full mt-3 bg-[#007AFF] text-white py-2 rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20 hover:scale-[1.01] active:scale-[0.99] transition-all flex items-center justify-center gap-2",children:"Add to Itinerary"})]},N.id))})]},E.area))})():c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center text-zinc-400",children:[c.jsx("div",{className:"w-12 h-12 bg-zinc-100 rounded-full flex items-center justify-center mb-3",children:c.jsx(Es,{size:20,className:"opacity-50"})}),c.jsx("p",{className:"text-sm font-medium",children:"No matches found"})]})}),c.jsx("div",{className:"p-4 bg-white border-t border-zinc-100",children:c.jsxs("button",{onClick:s,className:"w-full py-3 rounded-xl border border-zinc-200 text-zinc-600 font-bold text-sm hover:bg-zinc-50 hover:border-zinc-300 transition-all flex items-center justify-center gap-2",children:[c.jsx(Ie,{size:16})," Paste Google Maps Link"]})})]})]}):null}const kc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kA=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j0=(e,t)=>{const n=new Set(t),r=e.filter(a=>n.has(a.dayOffset||0)),s=e.filter(a=>!n.has(a.dayOffset||0));if(r.length===0)return e;let i=Nn(r[0].time);const o=r.map((a,l)=>{const u=a.parkingBuffer??10;if(l>0&&a.travelTime){const f=tt(a.travelTime);i+=f+u}const d=ln(i),h=tt(a.duration);return i+=h,{...a,time:d}});return[...s,...o]},Nn=e=>{try{if(!e||e.startsWith("NaN"))return 9*60;const[t,n]=e.split(" ");let[r,s]=t.split(":").map(Number);return isNaN(r)||isNaN(s)?9*60:(n==="PM"&&r!==12&&(r+=12),n==="AM"&&r===12&&(r=0),r*60+s)}catch{return 9*60}},tt=e=>{if(!e)return 60;try{const t=e.match(/(\d+)h/),n=e.match(/(\d+)m/);let r=0;return t&&(r+=parseInt(t[1])*60),n&&(r+=parseInt(n[1])),r||60}catch{return 60}},ln=e=>{let t=Math.floor(e/60);const n=e%60,r=t>=12?"PM":"AM";return t>12&&(t-=12),(t===0||t===24)&&(t=12),t>24&&(t-=24),`${t}:${n.toString().padStart(2,"0")} ${r}`};function E0(){const{tripName:e,events:t,setEvents:n,deleteEvent:r,tripDates:s}=sn(),[i,o]=b.useState("All"),[a,l]=b.useState([0]),[u,d]=b.useState(!1),[h,f]=b.useState(!1),[p,y]=b.useState(!1),[x,w]=b.useState(!1),[m,g]=b.useState(!0),v=z=>{const $=z||t,F=new Set(a),V=$.filter(Y=>F.has(Y.dayOffset||0)),U=$.filter(Y=>!F.has(Y.dayOffset||0));if(V.length===0)return;let X=Nn(V[0].time);const ie=V.map((Y,ae)=>{const te=Y.parkingBuffer??10;if(ae>0&&Y.travelTime){const et=tt(Y.travelTime);X+=et+te}const Gt=ln(X),ue=tt(Y.duration);return X+=ue,{...Y,time:Gt}});n([...U,...ie])},j=(z,$)=>{const F=Nn($),V=ln(F),U=t.findIndex(ie=>ie.id===z);if(U===-1)return;const X=[...t];X[U]={...X[U],time:V},v(X)},k=(z,$)=>{const F=t.findIndex(U=>U.id===z);if(F===-1)return;const V=[...t];V[F]={...V[F],parkingBuffer:$},v(V)},S=(z,$)=>{const F=t.findIndex(U=>U.id===z);if(F===-1)return;const V=[...t];V[F]={...V[F],duration:$},v(V)},_=()=>{h&&v(),f(!h)},E=z=>{const $=new Set(qt.map(V=>V.id)),F=t.filter(V=>!$.has(V.id));n([...F,...z])},[N,T]=b.useState([]),[C,I]=b.useState(null),[H,Q]=b.useState(!1),se=z=>{T($=>{const F=[...$,z];return F.length>5?F.slice(F.length-5):F})},[fe,ne]=b.useState(null),D=async()=>{y(!0),se(t);try{const z=t.filter(U=>a.includes(U.dayOffset||0)),$=t.filter(U=>!a.includes(U.dayOffset||0)),F=z.some(U=>U.isEnd),V=await Sc(z,{fixEnd:F});if(V.length>0){let U=Nn(V[0].time);const X=V.map((ie,Y)=>{const ae={...ie,time:ln(U)};Y>0&&ie.travelTime&&(U+=tt(ie.travelTime)),ae.time=ln(U);const te=tt(ie.duration);return U+=te,ae});n([...$,...X])}}catch(z){console.error("Optimization failed",z),alert("Optimization Error: "+(z instanceof Error?z.message:String(z)))}finally{y(!1)}},P=async()=>{w(!0),se(t);try{const z=t.filter(U=>a.includes(U.dayOffset||0)),$=t.filter(U=>!a.includes(U.dayOffset||0)),F=z.some(U=>U.isEnd),V=await Sc(z,{preserveOrder:!0,fixEnd:F});if(V.length>0){let U=Nn(V[0].time);const X=V.map((ie,Y)=>{const ae={...ie,time:ln(U),congestion:ie.congestion,travelTime:ie.travelTime};Y>0&&ie.travelTime&&(U+=tt(ie.travelTime)),ae.time=ln(U);const te=tt(ie.duration);return U+=te,ae});n([...$,...X])}}catch(z){console.error("Traffic update failed",z)}finally{w(!1)}},R=z=>{switch(z){case"Transport":return c.jsx(ch,{size:18});case"Eat":return c.jsx(ah,{size:18});case"Stay":return c.jsx(_v,{size:18});default:return c.jsx(Ie,{size:18})}},A=z=>{const $=new Date;let F=$.getHours();const V=$.getMinutes(),U=F>=12?"PM":"AM";F>12&&(F-=12),F===0&&(F=12);const X=`${F.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")} ${U}`;n(ie=>{const Y=ie.findIndex(et=>et.id===z);if(Y===-1)return ie;const ae=[...ie],te=ae[Y];te.status==="Checked In"?ae[Y]={...te,status:"Scheduled"}:ae[Y]={...te,status:"Checked In",time:X};let Gt=tt(ae[Y].duration||"60m");ae[Y].status==="Skipped"&&(Gt=0);let ue=Nn(ae[Y].time)+Gt;for(let et=Y+1;et<ae.length;et++){const Fe=ae[et],wl=tt(Fe.travelTime),Jh=ue+wl;ae[et]={...Fe,time:ln(Jh)};let Yh=tt(Fe.duration||"60m");Fe.status==="Skipped"&&(Yh=0),ue=Jh+Yh}return ae})},L=async z=>{const $=[...t],F=$.findIndex(Y=>Y.id===z);if(F===-1)return;const V=$[F],U=V.status==="Skipped"?"Scheduled":"Skipped";$[F]={...V,status:U};const X=Y=>{if(!Y||Y.length===0)return Y;let ae=Nn(Y[0].time);return Y.map((te,Gt)=>{if(Gt>0){const et=tt(te.travelTime),Fe=ae+et;te={...te,time:ln(Fe)},ae=Fe}else ae=Nn(te.time);let ue=tt(te.duration||"60m");return te.status==="Skipped"&&(ue=0),ae+=ue,te})},ie=X($);n(ie),w(!0);try{const Y=V.dayOffset||0,ae=ie.filter(te=>(te.dayOffset||0)===Y&&te.status!=="Skipped");if(ae.length>=2){const te=await Sc(ae,{preserveOrder:!0});n(Gt=>{const ue=new Map;te.forEach(Fe=>{ue.set(Fe.id,{travelTime:Fe.travelTime,congestion:Fe.congestion,travelDistance:Fe.travelDistance})});const et=Gt.map(Fe=>{if(ue.has(Fe.id)){const wl=ue.get(Fe.id);return{...Fe,...wl}}return Fe});return X(et)})}}catch(Y){console.error("Failed to recalculate traffic on skip:",Y)}finally{w(!1)}},M=(z,$)=>{n(F=>F.map(V=>V.id===z?{...V,description:$}:V))},ee=async(z,$)=>{try{await It.updateEvent(z,{description:$})}catch(F){console.error("Failed to save description:",F)}},je=z=>{l([z])},Rt=async z=>{var F;const $=a[0]||0;if(console.log("### ITINERARY-V5-FINAL ###"),console.log("!!! [ItineraryPage] handleSaveActivity:",z),z.openingHours?console.log("!!! [ItineraryPage] HAS OPENING HOURS"):console.warn("!!! [ItineraryPage] MISSING OPENING HOURS"),se(t),C&&z.id)n(V=>{const U=V.map(X=>X.id===z.id?{...X,...z,dayOffset:X.dayOffset}:X);return j0(U,a)}),I(null);else{console.log("!!! [ItineraryPage] Creating event with oh:",(F=z.openingHours)==null?void 0:F.length);const V={id:Wi(),...z,openingHours:z.openingHours,dayOffset:$};n(U=>{let X;if(fe!==null){const ie=U.filter(te=>(te.dayOffset??0)===$),Y=U.filter(te=>(te.dayOffset??0)!==$),ae=[...ie];ae.splice(fe,0,V),X=[...Y,...ae]}else X=[...U,V];return j0(X,a)}),ne(null)}},zr=z=>{window.confirm("Are you sure you want to remove this activity?")&&(se(t),r(z))},yw=(z,$,F,V)=>{const U=a[0]||0,X=(ie,Y)=>({...z,id:Wi(),status:"Scheduled",dayOffset:U,duration:$<60?`${$}m`:`${Math.floor($/60)}h${$%60?` ${$%60}m`:""}`,time:ie?"08:00 AM":"09:00 AM",isStart:ie,isEnd:Y});n(ie=>{const Y=ie.filter(ue=>(ue.dayOffset??0)===U),ae=ie.filter(ue=>(ue.dayOffset??0)!==U);let te=[...Y];const Gt=ue=>{const et=te[te.length-1];et&&et.isEnd?fe!==null&&fe<te.length?te.splice(fe,0,ue):te.splice(te.length-1,0,ue):fe!==null&&fe<=te.length?te.splice(fe,0,ue):te.push(ue)};if(F){const ue=X(!0,!1);te.unshift(ue)}if(V){const ue=X(!1,!0);te.push(ue)}if(!F&&!V){const ue=X(!1,!1);Gt(ue)}return[...ae,...te]}),ne(null)},vl=z=>{ne(z),Q(!0)},vw=()=>{Q(!1),I(null),d(!0)},xw=z=>{h&&(I(z),d(!0))},qt=t.filter(z=>{const $=i==="All"||z.type===i,F=a.includes(z.dayOffset??0);return $&&F}),ww=b.useMemo(()=>{const z=a[0]||0,$=new Set;t.forEach(V=>{if((V.dayOffset??0)===z){const U=V.placeId||V.googleMapsLink||V.title;U&&$.add(U)}});const F=new Map;return t.forEach(V=>{const U=V.placeId||V.googleMapsLink||V.title;U&&$.has(U)||U&&!F.has(U)&&F.set(U,V)}),Array.from(F.values())},[t,a]),bw=()=>{if(s.length===0)return"";const z=s[0].dateObj,$=s[s.length-1].dateObj;return`${kc[z.getMonth()]} ${z.getDate()}  ${kc[$.getMonth()]} ${$.getDate()}, ${$.getFullYear()}`},Ir=t.map(z=>z.image).filter(z=>!!z),[Hh,Sw]=b.useState(0),{scrollY:xl}=yl(),kw=bn(xl,[0,500],["0%","-15%"]),_w=bn(xl,[0,300],[1,.3]);b.useEffect(()=>{if(Ir.length<=1)return;const z=setInterval(()=>{Sw($=>($+1)%Ir.length)},8e3);return()=>clearInterval(z)},[Ir.length]);const[jw,Kh]=b.useState(!1);yP(xl,"change",z=>{z>100&&!jw&&m?(g(!1),Kh(!0)):z<50&&(m||g(!0),Kh(!1))});const ao=b.useMemo(()=>{let z=0,$=0,F=0;qt.forEach(X=>{z++,X.status!=="Skipped"&&(F+=tt(X.duration)),X.travelTime&&($+=tt(X.travelTime))});const V=$+F,U=X=>{const ie=Math.floor(X/60),Y=X%60;return ie>0?`${ie}h ${Y}m`:`${Y}m`};return{destinations:z,roadTime:U($),spotTime:U(F),totalTime:U(V)}},[qt]),[qh,Ew]=b.useState(new Date);b.useEffect(()=>{const z=setInterval(()=>Ew(new Date),1e3);return()=>clearInterval(z)},[]);const Gh=z=>{let $=z.getHours();const F=z.getMinutes(),V=$>=12?"PM":"AM";$>12&&($-=12),$===0&&($=12);const U=`${$}:${F.toString().padStart(2,"0")} ${V}`,X=`${kA[z.getDay()]}, ${z.getDate()} ${kc[z.getMonth()]}`;return{timeStr:U,dateStr:X}};return c.jsxs(Xn,{children:[c.jsx(gw,{isOpen:u,onClose:()=>{d(!1),I(null)},onSave:Rt,initialData:C}),c.jsx(SA,{isOpen:H,onClose:()=>Q(!1),savedPlaces:ww,onSelectPlace:yw,onAddNew:vw}),c.jsxs("header",{className:"relative z-10 min-h-[280px] flex flex-col justify-end p-6 overflow-hidden",children:[c.jsx(Z.div,{style:{y:h?"0%":kw,opacity:_w},className:"absolute inset-0 z-0 bg-zinc-900",children:c.jsx(Ke,{mode:"popLayout",children:Ir.length>0?c.jsx(Z.img,{src:Ir[Hh],initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},alt:"Trip Header",className:"absolute inset-0 w-full h-full object-cover"},Ir[Hh]):c.jsx(Z.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},src:"https://images.unsplash.com/photo-1512100356356-de1b84283e18?auto=format&fit=crop&w=1920&q=80",alt:"Bali Landscape",className:"absolute inset-0 w-full h-full object-cover"},"default-bali")})}),c.jsx("div",{className:"absolute inset-0 bg-[#0B1221]/40 z-10 pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent z-10 pointer-events-none h-full translate-y-1"}),c.jsx("div",{className:"relative z-10 flex justify-between items-end pb-8",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-['Playfair_Display'] font-black text-white mb-2 leading-tight drop-shadow-md",children:e}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex items-center text-white/70 text-xs gap-2 font-medium drop-shadow-sm",children:[c.jsx(js,{size:12}),c.jsx("span",{children:bw()})]}),c.jsxs("div",{className:"flex items-center text-white text-sm gap-2 font-bold drop-shadow-sm mt-1",children:[c.jsx(Nt,{size:14,className:"text-[#007AFF]"}),c.jsx("span",{children:Gh(qh).timeStr}),c.jsx("span",{className:"text-white/40",children:"|"}),c.jsx("span",{className:"text-white/90",children:Gh(qh).dateStr})]})]})]})})]}),c.jsx("div",{className:"sticky top-0 z-30 transition-all -mt-5",children:c.jsxs("div",{className:"bg-zinc-50/95 backdrop-blur-xl border-b border-zinc-200 shadow-sm rounded-t-[2rem] overflow-hidden shadow-[0_-12px_40px_rgba(0,0,0,0.4)]",children:[c.jsxs("div",{className:"px-6 pt-5 pb-4 border-b border-zinc-100",children:[c.jsxs("div",{className:"text-[10px] font-extrabold text-zinc-400 uppercase tracking-[0.15em] mb-3 text-center",children:["Day ",(a[0]||0)+1," Summary"]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center justify-center p-2 bg-zinc-50 rounded-xl border border-zinc-100",children:[c.jsx("div",{className:"text-[#007AFF] mb-1 opacity-80",children:c.jsx(Ie,{size:14})}),c.jsx("div",{className:"text-sm font-bold text-zinc-900",children:ao.destinations}),c.jsx("div",{className:"text-[9px] text-zinc-500 uppercase font-bold tracking-wide",children:"Places"})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center p-2 bg-zinc-50 rounded-xl border border-zinc-100",children:[c.jsx("div",{className:"text-[#007AFF] mb-1 opacity-80",children:c.jsx(Nt,{size:14})}),c.jsx("div",{className:"text-sm font-bold text-zinc-900",children:ao.totalTime}),c.jsx("div",{className:"text-[9px] text-zinc-500 uppercase font-bold tracking-wide",children:"Total"})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center p-2 bg-zinc-50 rounded-xl border border-zinc-100",children:[c.jsx("div",{className:"text-[#007AFF] mb-1 opacity-80",children:c.jsx(w2,{size:14})}),c.jsx("div",{className:"text-sm font-bold text-zinc-900",children:ao.roadTime}),c.jsx("div",{className:"text-[9px] text-zinc-500 uppercase font-bold tracking-wide",children:"Road"})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center p-2 bg-zinc-50 rounded-xl border border-zinc-100",children:[c.jsx("div",{className:"text-[#007AFF] mb-1 opacity-80",children:c.jsx(T2,{size:14})}),c.jsx("div",{className:"text-sm font-bold text-zinc-900",children:ao.spotTime}),c.jsx("div",{className:"text-[9px] text-zinc-500 uppercase font-bold tracking-wide",children:"Spot"})]})]})]}),c.jsx("div",{className:"w-full flex justify-center pt-1 pb-1 cursor-pointer active:opacity-70 transition-opacity",onClick:()=>g(!m),children:c.jsx("div",{className:"w-16 h-5 flex items-center justify-center bg-zinc-100/50 rounded-full text-zinc-400 hover:text-[#007AFF] transition-colors",children:m?c.jsx(jv,{size:14,strokeWidth:2.5}):c.jsx(Ev,{size:14,strokeWidth:2.5})})}),c.jsx(Ke,{children:m&&c.jsx(Z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:c.jsxs("div",{className:"bg-zinc-50/80 border-t border-zinc-200",children:[c.jsxs("div",{className:"pt-3.5",children:[c.jsx("div",{className:"px-6 mb-1",children:c.jsx("span",{className:"text-[10px] font-extrabold text-zinc-400 uppercase tracking-[0.15em]",children:"Category Filter"})}),c.jsx("div",{className:"pb-3",children:c.jsx(mw,{selected:i,onSelect:o})})]}),c.jsxs("div",{className:"pt-3 border-t border-zinc-100/50",children:[c.jsx("div",{className:"px-6 mb-2",children:c.jsx("span",{className:"text-[10px] font-extrabold text-zinc-400 uppercase tracking-[0.15em]",children:"Date Selection"})}),c.jsx("div",{className:"flex gap-2 flex-wrap justify-start px-6 pb-4 overflow-x-auto no-scrollbar",children:s.map((z,$)=>{const F=a.includes(z.offset),V=new Date,U=new Date(z.dateObj),X=new Date(V.getFullYear(),V.getMonth(),V.getDate()),Y=new Date(U.getFullYear(),U.getMonth(),U.getDate())<X;return c.jsxs("button",{onClick:()=>je(z.offset),className:`
                                                    flex flex-col items-center justify-center min-w-[3rem] h-14 rounded-2xl transition-all duration-300 border
                                                    ${F?"bg-[#007AFF] text-white border-[#007AFF] shadow-md shadow-blue-500/40 scale-105 z-10":Y?"bg-zinc-50 text-zinc-300 border-zinc-100 opacity-60 hover:opacity-100 hover:bg-white hover:border-zinc-300 hover:text-zinc-500":"bg-white text-zinc-500 border-zinc-200 shadow-sm hover:bg-zinc-50 hover:border-zinc-300 hover:text-zinc-700"} // Future/Present style
                                                `,children:[c.jsx("span",{className:`text-base leading-none mb-0.5 font-bold ${!F&&Y?"text-zinc-300":F?"":"text-zinc-700"}`,children:z.dateNum}),c.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${F?"text-white/90":Y?"text-zinc-300":"text-zinc-400"}`,children:z.dayName})]},$)})})]})]})})}),c.jsx("div",{className:"px-6 py-3 w-full bg-zinc-50/95 backdrop-blur-xl border-t border-zinc-200",children:c.jsxs("div",{className:"grid grid-cols-3 gap-3 w-full",children:[c.jsxs("button",{onClick:P,disabled:x,className:`
                                h-14 px-2 rounded-2xl border flex flex-col items-center justify-center gap-1 text-[10px] font-bold transition-all shadow-sm w-full
                                ${x?"bg-zinc-100 text-zinc-400 border-zinc-200 cursor-wait":"bg-white text-zinc-600 border-zinc-300 hover:bg-zinc-50 hover:border-zinc-400 hover:text-zinc-900 active:scale-95"}
                            `,children:[c.jsx(O2,{size:14,className:x?"animate-spin":""}),c.jsx("span",{className:"whitespace-nowrap uppercase tracking-tighter opacity-80",children:x?"Updating...":"Update Traffic"})]}),c.jsxs("button",{onClick:D,disabled:p,className:`
                                h-14 px-2 rounded-2xl flex flex-col items-center justify-center gap-1 text-[10px] font-bold transition-all w-full
                                ${p?"bg-blue-500/20 text-blue-300 border border-blue-500/50 cursor-wait":"bg-[#007AFF] text-white shadow-md shadow-blue-500/30 hover:bg-blue-600 hover:scale-105 active:scale-95"}
                            `,children:[c.jsx(D2,{size:14,className:p?"animate-spin":""}),c.jsx("span",{className:"whitespace-nowrap uppercase tracking-tighter opacity-90",children:p?"Optimizing...":"Optimize Route"})]}),c.jsxs("button",{onClick:_,className:`h-14 px-2 rounded-2xl border flex flex-col items-center justify-center gap-1 text-[10px] font-bold transition-all shadow-sm w-full
                                ${h?"bg-zinc-900 text-white border-zinc-900 hover:bg-zinc-800":"bg-white text-zinc-900 border-zinc-300 hover:bg-zinc-50 hover:border-zinc-400"}
                            `,children:[h?c.jsx(ll,{size:16}):c.jsx(Pv,{size:14}),c.jsx("span",{className:"whitespace-nowrap uppercase tracking-tighter opacity-80",children:h?"Done":"Edit Mode"})]})]})})]})}),c.jsxs("div",{className:"px-4 pb-32 pt-8 min-h-[50vh] transition-all max-w-2xl mx-auto",children:[qt.length>0?c.jsx(eA,{axis:"y",values:qt,onReorder:E,className:"space-y-0",children:c.jsx(Ke,{mode:"popLayout",children:qt.map((z,$)=>{var F,V;return c.jsx(_A,{event:z,index:$,isEditing:h,isLast:$===qt.length-1,isFirst:$===0,icon:R(z.type),nextCongestion:(F=qt[$+1])==null?void 0:F.congestion,selectedDayName:(V=s.find(U=>U.offset===(z.dayOffset??0)))==null?void 0:V.dayName,openSelectorAt:vl,openEditModal:xw,handleDeleteEvent:zr,onCheckIn:A,onSkip:L,onTimeChange:j,onBufferChange:k,onDurationChange:S,onDescriptionChange:M,onDescriptionSave:ee},z.id)})})}):c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400 animate-in fade-in zoom-in duration-300",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-50 flex items-center justify-center mb-6 border border-blue-100 shadow-sm",children:c.jsx(Ie,{size:24,className:"text-[#007AFF]"})}),c.jsxs("button",{onClick:()=>vl(0),className:"px-8 py-3 bg-[#007AFF] text-white rounded-2xl text-sm font-bold shadow-lg shadow-blue-500/30 hover:bg-[#0071EB] hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[c.jsx(Wt,{size:16,strokeWidth:3}),"Add First Activity"]})]}),h&&qt.length>0&&c.jsx("div",{onClick:()=>vl(qt.length),className:"h-12 border-2 border-dashed border-zinc-200 rounded-xl flex items-center justify-center text-sm font-bold text-zinc-400 hover:text-zinc-900 hover:border-zinc-400 hover:bg-zinc-50 cursor-pointer transition-all mt-4",children:"+ Add to End"})]})]})}function _A({event:e,index:t,isEditing:n,isLast:r,isFirst:s,icon:i,nextCongestion:o,selectedDayName:a,openSelectorAt:l,openEditModal:u,handleDeleteEvent:d,onCheckIn:h,onSkip:f,onTimeChange:p,onBufferChange:y,onDurationChange:x,onDescriptionChange:w,onDescriptionSave:m}){const g=QP();return c.jsxs(sA,{value:e,dragListener:!1,dragControls:g,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"relative",children:[n&&c.jsx("div",{onClick:()=>l(t),className:"h-10 my-2 flex items-center justify-center group cursor-pointer transition-all",children:c.jsx("div",{className:"h-[2px] w-full bg-zinc-200 group-hover:bg-zinc-300 rounded-full relative transition-all",children:c.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-zinc-900 border border-zinc-900 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-lg scale-100 transition-transform flex items-center gap-1",children:[c.jsx(Wt,{size:10,strokeWidth:3})," INSERT HERE"]})})}),c.jsxs("div",{className:"relative group flex items-stretch",children:[n&&c.jsx("div",{className:"flex flex-col justify-center items-center pr-2 cursor-grab active:cursor-grabbing touch-none select-none",onPointerDown:v=>g.start(v),children:c.jsx("div",{className:"p-3 bg-zinc-100 rounded-xl hover:bg-zinc-200 text-zinc-400 transition-colors",children:c.jsx(E2,{size:20})})}),c.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>n&&u(e),children:[c.jsx(yA,{event:e,isLast:r,isFirst:s,isCompact:n,icon:i,nextCongestion:o,onCheckIn:h,onSkip:f,onTimeChange:p,onBufferChange:y,onDurationChange:x,onDescriptionChange:w,onDescriptionSave:m,selectedDayName:a}),n&&c.jsx("button",{onClick:v=>{v.stopPropagation(),d(e.id)},className:"absolute -right-2 -top-2 w-7 h-7 bg-white text-zinc-900 border border-zinc-200 rounded-full flex items-center justify-center shadow-md hover:scale-110 active:scale-90 transition-transform z-10",children:c.jsx(Yn,{size:14,strokeWidth:3})})]})]})]})}function jA(){var m,g,v,j,k,S,_,E,N;const{id:e}=AS(),t=th(),{events:n}=sn(),[r,s]=b.useState("photos"),[i,o]=b.useState(null),[a,l]=b.useState(!0),u=n.find(T=>T.id===e),d=u?{title:u.title,address:u.description||"",rating:u.rating||0,reviews:u.reviews||0,status:u.status||"Unknown",images:u.image?[u.image]:[],googleMapsLink:u.googleMapsLink}:null;if(b.useEffect(()=>{(async()=>{if(u){l(!0);try{let C=u.placeId,I;if(C){const H=await fetch(`/api/place-details?placeId=${C}`);H.ok&&(I=await H.json())}else if(u.googleMapsLink){const H=await fetch("/api/parse-place",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:u.googleMapsLink})});H.ok&&(I=await H.json())}I&&o(I)}catch(C){console.error("Failed to fetch place details",C)}finally{l(!1)}}})()},[u]),!u||!d)return c.jsx(Xn,{showNav:!1,children:c.jsxs("div",{className:"p-6 text-center pt-20 bg-zinc-950 min-h-screen",children:[c.jsx("h1",{className:"text-white font-bold text-xl",children:"Place not found"}),c.jsx("button",{onClick:()=>t(-1),className:"text-[#007AFF] mt-4 font-bold",children:"Go Back"})]})});const h={title:(i==null?void 0:i.displayName)||d.title,address:(i==null?void 0:i.formattedAddress)||(i==null?void 0:i.address)||d.address,rating:(i==null?void 0:i.rating)||d.rating,reviews:(i==null?void 0:i.userRatingCount)||(i==null?void 0:i.reviewCount)||d.reviews,itineraryStatus:d.status&&d.status!=="Unknown"?d.status:null,liveStatus:((m=i==null?void 0:i.regularOpeningHours)==null?void 0:m.openNow)===!0?"Open now":((g=i==null?void 0:i.regularOpeningHours)==null?void 0:g.openNow)===!1?"Closed":null,liveStatusColor:((v=i==null?void 0:i.regularOpeningHours)==null?void 0:v.openNow)===!0?"text-emerald-500":((j=i==null?void 0:i.regularOpeningHours)==null?void 0:j.openNow)===!1?"text-red-500":"text-zinc-500",closeTime:((S=(k=i==null?void 0:i.regularOpeningHours)==null?void 0:k.weekdayDescriptions)==null?void 0:S[new Date().getDay()===0?6:new Date().getDay()-1])||"",images:i!=null&&i.photoUrls&&i.photoUrls.length>0?i.photoUrls:((_=i==null?void 0:i.photos)==null?void 0:_.filter(T=>typeof T=="string"))||d.images,userReviews:(i==null?void 0:i.reviews)||[],googleMapsLink:(i==null?void 0:i.googleMapsUri)||(i==null?void 0:i.googleMapsUrl)||d.googleMapsLink,openingHours:(i==null?void 0:i.openingHours)||((E=i==null?void 0:i.regularOpeningHours)==null?void 0:E.weekdayDescriptions)||[],websiteUri:(i==null?void 0:i.websiteUri)||null,priceLevel:(i==null?void 0:i.priceLevel)||null,editorialSummary:(i==null?void 0:i.editorialSummary)||null,types:(i==null?void 0:i.types)||[]},[f,p]=b.useState(null),x=(T=>T?{PRICE_LEVEL_FREE:"Free",PRICE_LEVEL_INEXPENSIVE:"$",PRICE_LEVEL_MODERATE:"$$",PRICE_LEVEL_EXPENSIVE:"$$$",PRICE_LEVEL_VERY_EXPENSIVE:"$$$$"}[T]||T:null)(h.priceLevel),w=h.types.some(T=>["restaurant","cafe","bar","bakery","meal_takeaway","meal_delivery","food"].includes(T));return c.jsxs(Xn,{showNav:!1,children:[c.jsxs("div",{className:"relative h-72 w-full bg-zinc-200 group",children:[h.images.length>0?c.jsx("img",{src:h.images[0],className:"w-full h-full object-cover opacity-100",alt:"Place Hero"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-100",children:c.jsx(Qp,{size:48,className:"text-zinc-300"})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-zinc-50/90"}),c.jsx("div",{className:"absolute top-0 left-0 right-0 p-6 flex justify-between items-start z-20",children:c.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-md border border-white/20 flex items-center justify-center text-white hover:bg-white/30 transition-colors shadow-lg",children:c.jsx(kv,{size:24})})})]}),c.jsxs("div",{className:"px-6 -mt-12 relative z-10 pb-24",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-[2rem] p-6 border border-white/40 shadow-xl shadow-zinc-200/50 mb-8",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-zinc-900 mb-2 leading-tight",children:h.title}),c.jsxs("div",{className:"flex items-start text-zinc-500 text-sm gap-3 mb-6 font-medium",children:[c.jsx("div",{className:"mt-0.5 shrink-0",children:c.jsx(Ie,{size:18,className:"text-[#007AFF]"})}),c.jsx("span",{className:"leading-relaxed",children:h.address})]}),c.jsxs("div",{className:"flex justify-between items-end border-t border-zinc-100 pt-5",children:[c.jsxs("div",{className:"flex flex-col gap-2.5",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"shrink-0",children:c.jsx(Ts,{size:18,fill:"currentColor",className:"text-yellow-400"})}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"font-bold text-zinc-900 leading-none",children:h.rating||"New"}),c.jsxs("span",{className:"text-zinc-400 text-xs font-medium leading-none",children:["(",((N=h.reviews)==null?void 0:N.toLocaleString())||0," reviews)"]})]})]}),h.itineraryStatus&&c.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold text-zinc-500",children:[c.jsx("div",{className:"shrink-0",children:c.jsx(Nt,{size:18})}),c.jsx("span",{className:"leading-none",children:h.itineraryStatus})]}),h.liveStatus&&c.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[c.jsx("div",{className:"w-[18px] h-[18px] flex items-center justify-center shrink-0",children:c.jsx("div",{className:`w-2 h-2 rounded-full ${h.liveStatus==="Open now"?"bg-emerald-500":"bg-red-500"}`})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`${h.liveStatusColor} leading-none`,children:h.liveStatus}),h.closeTime&&c.jsxs("span",{className:"text-zinc-400 font-medium hidden sm:inline leading-none",children:[" ",h.closeTime]})]})]})]}),h.googleMapsLink&&c.jsxs("a",{href:h.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"bg-[#007AFF] text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-blue-500/20 hover:bg-[#0062cc] active:scale-95 transition-all flex items-center gap-2",children:["Directions ",c.jsx(Nr,{size:14})]})]})]}),c.jsxs("div",{className:"flex gap-6 mb-6 border-b border-zinc-200 px-2 overflow-x-auto no-scrollbar justify-center",children:[c.jsx(Mo,{active:r==="photos",onClick:()=>s("photos"),icon:c.jsx(Qp,{size:18}),label:"Photos"}),h.openingHours.length>0&&c.jsx(Mo,{active:r==="hours",onClick:()=>s("hours"),icon:c.jsx(Nt,{size:18}),label:"Hours"}),!w&&h.priceLevel&&c.jsx(Mo,{active:r==="tickets",onClick:()=>s("tickets"),icon:c.jsx($u,{size:18}),label:x?`Tickets (${x})`:"Ticket Info"}),c.jsx(Mo,{active:r==="reviews",onClick:()=>s("reviews"),icon:c.jsx(R2,{size:18}),label:"Reviews"})]}),c.jsxs("div",{className:"min-h-[200px]",children:[a&&c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"animate-spin text-[#007AFF]",children:c.jsx(Nt,{size:24})})}),!a&&r==="photos"&&c.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in duration-500",children:[h.images.map((T,C)=>c.jsx(Z.img,{src:T,layoutId:`img-${C}`,onClick:()=>p(T),className:"rounded-2xl h-40 w-full object-cover cursor-zoom-in hover:opacity-95 transition-opacity bg-zinc-100 shadow-sm",alt:"Gallery"},C)),h.images.length===0&&c.jsx("div",{className:"col-span-2 text-center py-10 text-zinc-400 font-medium",children:"No photos available"})]}),!a&&r==="hours"&&c.jsx("div",{className:"px-2 animate-in fade-in duration-500",children:c.jsx("div",{className:"bg-zinc-50 rounded-2xl p-4 border border-zinc-100",children:c.jsx("div",{className:"space-y-2",children:h.openingHours.map((T,C)=>{const I=new Date().getDay()===0?6:new Date().getDay()-1,H=C===I,[Q,se]=T.split(": ");return c.jsxs("div",{className:`flex justify-between text-xs ${H?"font-bold text-zinc-900 bg-white p-2 -mx-2 rounded-lg shadow-sm border border-zinc-100":"text-zinc-600"}`,children:[c.jsx("span",{children:Q}),c.jsx("span",{children:se})]},C)})})})}),!a&&r==="tickets"&&c.jsx("div",{className:"px-2 animate-in fade-in duration-500",children:c.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-zinc-100 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-zinc-900 mb-1",children:"Admission"}),h.editorialSummary&&c.jsx("p",{className:"text-xs text-zinc-500 mb-4 leading-relaxed",children:h.editorialSummary}),c.jsx("p",{className:"text-xs text-zinc-400 mb-6",children:"Gives you entry to this place"}),c.jsx("div",{className:"space-y-3",children:h.websiteUri&&c.jsxs("a",{href:h.websiteUri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between group py-1",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 text-[#007AFF] flex items-center justify-center",children:c.jsx($u,{size:16})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-sm text-zinc-900 group-hover:text-[#007AFF] transition-colors",children:"Official Site"}),c.jsx("span",{className:"text-[10px] text-zinc-400 font-medium",children:"Instant confirmation"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[x&&c.jsx("span",{className:"text-sm font-bold text-zinc-900",children:x}),c.jsx(Nr,{size:14,className:"text-zinc-300 group-hover:text-[#007AFF] transition-colors"})]})]})})]})}),!a&&r==="reviews"&&c.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[h.userReviews.length>0?h.userReviews.map((T,C)=>{var I,H,Q,se;return c.jsxs("div",{className:"p-5 bg-white rounded-2xl border border-zinc-100 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[(I=T.authorAttribution)!=null&&I.photoUri?c.jsx("img",{src:T.authorAttribution.photoUri,className:"w-8 h-8 rounded-full border border-zinc-100",alt:""}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 text-[#007AFF] flex items-center justify-center font-bold text-xs",children:(((H=T.authorAttribution)==null?void 0:H.displayName)||T.name||"G")[0]}),c.jsx("div",{className:"text-zinc-900 font-bold text-sm",children:((Q=T.authorAttribution)==null?void 0:Q.displayName)||T.name||"Google User"})]}),c.jsx("div",{className:"text-[10px] font-bold text-zinc-400 bg-zinc-50 px-2 py-1 rounded-full",children:T.relativePublishTimeDescription})]}),c.jsx("div",{className:"flex text-yellow-400 mb-2",children:[...Array(5)].map((fe,ne)=>c.jsx(Ts,{size:14,fill:ne<(T.rating||0)?"currentColor":"none",className:ne<(T.rating||0)?"":"text-zinc-200"},ne))}),c.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed text-left font-medium",children:((se=T.text)==null?void 0:se.text)||T.text})]},C)}):c.jsx("div",{className:"text-center py-10 text-zinc-400 font-medium",children:"No reviews available"}),h.googleMapsLink&&c.jsx("a",{href:h.googleMapsLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center py-4 text-[#007AFF] font-bold text-sm hover:underline",children:"View all on Google Maps"})]})]})]}),c.jsx(Ke,{children:f&&c.jsxs(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(null),className:"fixed inset-0 z-[60] bg-black/95 backdrop-blur-md flex items-center justify-center p-4 cursor-zoom-out",children:[c.jsx("button",{className:"absolute top-6 right-6 text-white/70 hover:text-white transition-colors",children:c.jsx(Yn,{size:32})}),c.jsx(Z.img,{layoutId:h.images.includes(f)?`img-${h.images.indexOf(f)}`:"selected-img",src:f,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full screen"})]})})]})}function Mo({active:e,onClick:t,icon:n,label:r}){return c.jsxs("button",{onClick:t,className:`flex items-center gap-2 pb-3 px-1 transition-all border-b-2 font-bold text-sm ${e?"border-[#007AFF] text-[#007AFF]":"border-transparent text-zinc-400 hover:text-zinc-600"}`,children:[n,c.jsx("span",{className:"whitespace-nowrap",children:r})]})}const T0={Transport:"M22 16.92v3L12 15v-9H9v9L-1 16.92v3L9 18.5v9l1.5 1.5 1.5-1.5v-9l10 1.42z",Stay:"M19 7h-8v6h8V7zm2-4H3C2.45 3 2 3.45 2 4v16h2v-2h16v2h2V4c0-.55-.45-1-1-1zm-1 9H4V5h16v7z",Eat:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z",Play:"M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"};function EA({apiKey:e,center:t={lat:-8.409518,lng:115.188919},zoom:n=10,markers:r=[],className:s="w-full h-full",onRouteInfo:i,onMarkerClick:o,onMapClick:a}){const l=b.useRef(null),u=b.useRef(null),d=b.useRef([]),h=b.useRef(null),[f,p]=b.useState(!1),[y,x]=b.useState(""),[w,m]=b.useState("");if(!e)return c.jsx("div",{className:`${s} flex items-center justify-center bg-zinc-900 border border-zinc-800 rounded-xl p-6`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-400 font-bold mb-2",children:"Google Maps API Key Missing"}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Please set VITE_GOOGLE_MAPS_API_KEY in your .env file."})]})});b.useEffect(()=>{var k;if((k=window.google)!=null&&k.maps){p(!0);return}if(document.getElementById("google-maps-script")){const S=setInterval(()=>{var _;(_=window.google)!=null&&_.maps&&(p(!0),clearInterval(S))},100);return}const j=document.createElement("script");j.id="google-maps-script",j.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,geometry`,j.async=!0,j.defer=!0,j.onload=()=>p(!0),j.onerror=()=>x("Failed to load Google Maps script."),document.body.appendChild(j)},[e]),b.useEffect(()=>{!f||!l.current||u.current||(u.current=new window.google.maps.Map(l.current,{center:t,zoom:n,mapId:"DEMO_MAP_ID",disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,backgroundColor:"#27272a",gestureHandling:"greedy"}),a&&u.current.addListener("click",()=>{a()}))},[f]),b.useEffect(()=>{u.current&&(u.current.setCenter(t),u.current.setZoom(n))},[t,n]);const[g,v]=b.useState(n);return b.useEffect(()=>{if(!u.current)return;const j=u.current.addListener("zoom_changed",()=>{v(u.current.getZoom())});return()=>{window.google.maps.event.removeListener(j)}},[f]),b.useEffect(()=>{if(!u.current)return;d.current.forEach(k=>k.setMap(null)),d.current=[];const j={};r.forEach(k=>{const S=`${k.lat.toFixed(6)},${k.lng.toFixed(6)}`;j[S]||(j[S]=[]),j[S].push(k)}),r.forEach(k=>{const S=`${k.lat.toFixed(6)},${k.lng.toFixed(6)}`,_=j[S],E=_.indexOf(k);let N=k.lat,T=k.lng;if(_.length>1){const se=Math.pow(2,15-g),fe=15e-5*se,ne=(E-(_.length-1)/2)*fe;T+=ne,N+=E%2===0?0:5e-5*se}let C;if(k.type&&T0[k.type]){const Q=4.199999999999999,se=`
                <svg width="32" height="32" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="11" fill="${k.color||"#6B7280"}" stroke="white" stroke-width="2"/>
                    <path d="${T0[k.type]}" fill="white" transform="translate(${Q}, ${Q}) scale(${.65})"/>
                </svg>`.trim();C={url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(se),scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)}}else C={path:window.google.maps.SymbolPath.CIRCLE,scale:14,fillColor:k.color||"#007AFF",fillOpacity:1,strokeColor:"white",strokeWeight:2,labelOrigin:new window.google.maps.Point(0,0)};const I=new window.google.maps.Marker({position:{lat:N,lng:T},map:u.current,title:k.title,label:k.label?{text:k.label||"",color:"white",fontWeight:"bold",fontSize:"12px"}:null,icon:C,zIndex:k.isRoutePoint?100+E:10});o&&I.addListener("click",()=>{o(k.id)}),d.current.push(I)})},[r,f,g,o]),b.useEffect(()=>{var N;if(!u.current||!((N=window.google)!=null&&N.maps))return;m(""),h.current&&(h.current.setMap(null),h.current=null);const j=r.filter(T=>T.isRoutePoint);if(j.length<2)return;const k=new window.google.maps.DirectionsService;h.current=new window.google.maps.DirectionsRenderer({map:u.current,suppressMarkers:!0,polylineOptions:{strokeColor:"#007AFF",strokeWeight:5,strokeOpacity:.8}});const S={lat:j[0].lat,lng:j[0].lng},_={lat:j[j.length-1].lat,lng:j[j.length-1].lng},E=j.slice(1,-1).map(T=>({location:{lat:T.lat,lng:T.lng},stopover:!0}));k.route({origin:S,destination:_,waypoints:E,travelMode:window.google.maps.TravelMode.DRIVING},(T,C)=>{if(C===window.google.maps.DirectionsStatus.OK){if(h.current.setDirections(T),i&&T.routes[0]){const I=T.routes[0];let H=0,Q=0;I.legs.forEach(se=>{H+=se.distance.value,Q+=se.duration.value}),i(H/1e3,Math.floor(Q/60))}}else console.error("Directions request failed due to "+C),m(`Route: ${C}`)})},[r,f,i]),y?c.jsx("div",{className:`${s} flex items-center justify-center bg-zinc-900 text-red-400 p-4 text-center`,children:c.jsxs("div",{children:[c.jsx("p",{className:"font-bold mb-1",children:"Map Script Error"}),c.jsx("p",{className:"text-sm opacity-80",children:y})]})}):c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("div",{ref:l,className:s}),w&&c.jsx("div",{className:"absolute top-2 left-2 right-2 bg-red-500/90 text-white text-[10px] px-3 py-2 rounded-lg backdrop-blur shadow-lg z-50 pointer-events-none text-center",children:w})]})}function TA(){const{tripDates:e,events:t}=sn(),[n,r]=b.useState(-1),[s,i]=b.useState(null),[o,a]=b.useState(!0),[l,u]=b.useState(null),[d,h]=b.useState(null);b.useEffect(()=>{u(null),h(null),i(null)},[n]);const f=e.find(S=>S.offset===n),p=b.useMemo(()=>t.find(S=>S.id===s),[t,s]),y=b.useMemo(()=>{if(!p)return null;if((p.dayOffset??-1)>=0){const _=e.find(E=>E.offset===p.dayOffset);return{isScheduled:!0,text:`Scheduled on Day ${_?_.offset+1:"?"} (${_==null?void 0:_.dayName})`}}const S=t.find(_=>(_.dayOffset??-1)>=0&&(_.placeId&&_.placeId===p.placeId||_.title===p.title));if(S){const _=e.find(E=>E.offset===S.dayOffset);return{isScheduled:!0,text:`Scheduled on Day ${_?_.offset+1:"?"} (${_==null?void 0:_.dayName})`}}return{isScheduled:!1,text:"Saved in Library"}},[p,t,e]),x=b.useMemo(()=>n===-1?[]:t.filter(S=>S.dayOffset===n).sort((S,_)=>{const E=N0(S.time),N=N0(_.time);return E-N}),[t,n]),{markers:w,mapCenter:m}=b.useMemo(()=>{const S=x.filter(T=>T.lat&&T.lng).map(T=>({id:T.id,lat:T.lat,lng:T.lng,title:T.title,label:(CA(x,T.id)+1).toString(),color:"#007AFF",isRoutePoint:!0}));let _=[];if(n===-1){const T=I=>{switch(I){case"Transport":return"#3B82F6";case"Stay":return"#8B5CF6";case"Eat":return"#F97316";case"Play":return"#10B981";default:return"#9CA3AF"}},C=new Set(x.map(I=>I.id));_=t.filter(I=>I.status==="Saved"&&!C.has(I.id)&&I.lat&&I.lng).map(I=>({id:I.id,lat:I.lat,lng:I.lng,title:I.title,label:"",type:I.type,color:T(I.type),isRoutePoint:!1}))}const E=[...S,..._];let N={lat:-8.409518,lng:115.188919};return S.length>0?N={lat:S[0].lat,lng:S[0].lng}:_.length>0&&(N={lat:_[0].lat,lng:_[0].lng}),{markers:E,mapCenter:N}},[x,t,n]),g=x.reduce((S,_)=>{if(_.travelDistance){const E=_.travelDistance.match(/([\d.]+)/),N=E?parseFloat(E[1]):0;return S+(isNaN(N)?0:N)}return S},0),v=x.reduce((S,_)=>{if(_.travelTime){const E=_.travelTime.match(/(\d+)\s*h/i),N=_.travelTime.match(/(\d+)\s*m/i);let T=0;return E&&(T+=parseInt(E[1])*60),N&&(T+=parseInt(N[1])),S+T}return S},0),j=l!==null?l:g,k=d!==null?d:v;return c.jsx(Xn,{fullScreen:!0,children:c.jsxs("div",{className:"relative h-full w-full max-w-[100vw] overflow-hidden overscroll-none bg-zinc-50 touch-pan-x touch-pan-y",children:[c.jsx(EA,{apiKey:"AIzaSyDyfzuJ0rhAykjkKetws82o63_l6EDxmuc",center:m,zoom:12,markers:w,className:"w-full h-full",onRouteInfo:(S,_)=>{u(S),h(_)},onMarkerClick:i,onMapClick:()=>i(null)}),c.jsx("div",{className:"absolute top-14 left-4 right-4 flex justify-between items-start pointer-events-none z-20",children:c.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-xl px-4 py-2.5 rounded-2xl shadow-lg border border-zinc-100 flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 flex-shrink-0",children:c.jsx(Ie,{size:16,fill:"currentColor"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:n===-1?"VIEWING":`Viewing Day ${(f==null?void 0:f.offset)+1}`}),c.jsx("p",{className:"text-sm font-bold text-zinc-900 leading-none whitespace-nowrap",children:n===-1?"All Places":`${f==null?void 0:f.dayName}, ${f==null?void 0:f.dateNum}`})]})]})}),c.jsxs("div",{className:"absolute bottom-24 left-4 right-4 z-20 flex flex-col gap-4 pointer-events-none",children:[c.jsx(Ke,{children:p&&y&&c.jsxs(Z.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"bg-white/95 backdrop-blur-xl rounded-2xl border border-zinc-100 shadow-[0_8px_30px_rgba(0,0,0,0.12)] pointer-events-auto p-4 relative z-30",children:[c.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[c.jsx("div",{className:"inline-flex px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider text-white bg-zinc-400",style:{backgroundColor:p.type==="Eat"?"#F97316":p.type==="Stay"?"#8B5CF6":p.type==="Transport"?"#3B82F6":p.type==="Play"?"#10B981":"#9CA3AF"},children:p.type}),c.jsx("button",{onClick:()=>i(null),className:"text-zinc-400 hover:text-zinc-600 -mt-1 -mr-1 p-1",children:c.jsx(Yn,{size:14})})]}),c.jsx("h3",{className:"text-base font-bold text-zinc-900 leading-tight mb-1.5",children:p.title}),c.jsxs("div",{className:`flex items-center gap-2 text-xs ${y.isScheduled?"text-blue-600":"text-zinc-500"}`,children:[c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${y.isScheduled?"bg-blue-500":"bg-zinc-300"}`}),c.jsx("span",{className:"font-medium",children:y.text})]})]})}),!s&&x.length>0&&c.jsxs(Z.div,{initial:!1,animate:{height:"auto"},className:"bg-white/95 backdrop-blur-xl rounded-[1.75rem] border border-zinc-100 shadow-[0_8px_30px_rgba(0,0,0,0.12)] pointer-events-auto flex flex-col overflow-hidden",children:[c.jsxs("div",{onClick:()=>a(!o),className:"p-5 flex justify-between items-start flex-shrink-0 cursor-pointer active:bg-zinc-50 transition-colors touch-none",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-zinc-900 font-bold text-lg flex items-center flex-wrap gap-x-2",children:["Route",k>0&&c.jsx("span",{className:"text-zinc-400 font-medium",children:""}),k>0&&c.jsxs("span",{className:"text-sm text-zinc-600",children:[Math.floor(k/60),"h ",k%60,"m"]}),j>0&&c.jsx("span",{className:"text-zinc-400 font-medium",children:""}),j>0&&c.jsxs("span",{className:"text-sm text-zinc-600",children:[j.toFixed(1)," km"]})]}),c.jsx("div",{className:"flex items-center gap-2 text-xs text-zinc-500 font-medium mt-1",children:c.jsxs("span",{className:"bg-zinc-100 px-1.5 py-0.5 rounded text-zinc-600",children:[x.length," stops"]})})]}),c.jsx("div",{className:"flex gap-3",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-50 flex items-center justify-center text-zinc-400",children:o?c.jsx(jv,{size:18}):c.jsx(Ev,{size:18})})})]}),c.jsx(Ke,{initial:!1,children:o&&c.jsx(Z.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"border-t border-zinc-100",children:c.jsx("div",{className:"overflow-y-auto custom-scrollbar max-h-[35vh] overscroll-contain touch-pan-y p-5 pt-2",onTouchStart:S=>S.stopPropagation(),children:c.jsxs("div",{className:"relative -mx-2 px-2",children:[x.length>1&&c.jsx("div",{className:"absolute top-4 bottom-4 left-[23px] w-[2px] bg-zinc-100"}),x.map((S,_)=>c.jsx(NA,{title:S.title,time:S.time,active:_===0,last:_===x.length-1,type:S.type,travelTime:S.travelTime,congestion:S.congestion,index:_+1},S.id))]})})})})]}),c.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-xl p-1.5 rounded-[1.25rem] shadow-[0_8px_30px_rgba(0,0,0,0.12)] border border-zinc-100 flex gap-2 overflow-x-auto no-scrollbar mx-auto max-w-full overscroll-contain touch-pan-x",children:[c.jsxs("button",{onClick:()=>r(-1),className:`
                                flex flex-col items-center justify-center min-w-[3.25rem] h-14 rounded-2xl transition-all duration-200
                                ${n===-1?"bg-[#007AFF] text-white shadow-md shadow-blue-500/25 scale-100":"bg-transparent text-zinc-400 hover:bg-zinc-50 hover:text-zinc-600"}
                            `,children:[c.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider opacity-90",children:"VIEW"}),c.jsx("span",{className:`text-lg font-bold leading-none mt-0.5 ${n===-1?"text-white":"text-zinc-600"}`,children:"ALL"})]}),c.jsx("div",{className:"w-px bg-zinc-200 my-2"}),e.map(S=>c.jsxs("button",{onClick:()=>r(S.offset),className:`
                                    flex flex-col items-center justify-center min-w-[3.25rem] h-14 rounded-2xl transition-all duration-200
                                    ${n===S.offset?"bg-[#007AFF] text-white shadow-md shadow-blue-500/25 scale-100":"bg-transparent text-zinc-400 hover:bg-zinc-50 hover:text-zinc-600"}
                                `,children:[c.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider opacity-90",children:S.dayName}),c.jsx("span",{className:`text-lg font-bold leading-none mt-0.5 ${n===S.offset?"text-white":"text-zinc-600"}`,children:S.dateNum})]},S.offset))]})]})]})})}function NA({title:e,time:t,active:n,last:r,travelTime:s,congestion:i,index:o}){let a="text-zinc-400";return i==="high"?a="text-red-500":i==="moderate"?a="text-amber-500":i==="low"&&(a="text-emerald-500"),c.jsxs("div",{className:`flex items-start gap-4 relative z-10 ${r?"":"pb-6"}`,children:[c.jsx("div",{className:`w-8 h-8 flex-shrink-0 rounded-full flex items-center justify-center border-2 transition-colors relative z-10 font-bold text-[10px]
                ${n?"bg-[#007AFF] border-[#007AFF] text-white shadow-md shadow-blue-500/20":"bg-white border-zinc-100 text-zinc-400"}`,children:o}),c.jsxs("div",{className:"min-w-0 pt-0.5",children:[c.jsx("p",{className:`text-sm font-bold truncate transition-colors ${n?"text-zinc-900":"text-zinc-500"}`,children:e}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-[10px] font-mono text-zinc-400 bg-zinc-50 px-1.5 py-0.5 rounded",children:t||"TBD"}),s&&c.jsx("span",{className:`text-[10px] flex items-center gap-1 ${a} font-bold bg-white border border-zinc-100 px-1.5 py-0.5 rounded-full shadow-sm`,children:s})]})]})]})}function N0(e){if(!e||e==="TBD")return 9999;try{const[t,n]=e.split(" ");if(!t||!n)return 9999;let[r,s]=t.split(":").map(Number);return n==="PM"&&r!==12&&(r+=12),n==="AM"&&r===12&&(r=0),r*60+s}catch{return 9999}}function CA(e,t){return e.findIndex(n=>n.id===t)}function PA(){const{events:e,setEvents:t,deleteEvent:n}=sn(),[r,s]=b.useState(""),[i,o]=b.useState("All"),[a,l]=b.useState("https://images.unsplash.com/photo-1555400038-63f5ba517a47?auto=format&fit=crop&w=1000&q=80"),[u,d]=b.useState(!1),{scrollY:h}=yl(),f=bn(h,[0,500],["0%","-15%"]),p=bn(h,[0,300],[1,.3]);b.useEffect(()=>{const k=e.filter(S=>S.image).map(S=>S.image);if(k.length>0&&(l(k[0]),k.length>1)){let S=0;const _=setInterval(()=>{S=(S+1)%k.length,l(k[S])},5e3);return()=>clearInterval(_)}},[e]);const y=k=>{if(e.some(E=>!!(k.placeId&&E.placeId===k.placeId||k.googleMapsLink&&E.googleMapsLink&&E.googleMapsLink===k.googleMapsLink)))return alert("This place is already in your list!"),!1;const _={id:Wi(),type:k.type,title:k.title,time:"",description:k.description,rating:k.rating,reviews:k.reviews,image:k.image,googleMapsLink:k.googleMapsLink,duration:k.duration,status:"Saved",dayOffset:-1,placeId:k.placeId,address:k.address};t(E=>[...E,_]),d(!1)},x=new Map;e.filter(k=>["Transport","Stay","Eat","Play"].includes(k.type)&&k.status==="Saved").forEach(k=>{const S=k.placeId||k.googleMapsLink||k.title;S&&!x.has(S)&&x.set(S,k)});const w=Array.from(x.values()).filter(k=>{var _;if(i!=="All"&&k.type!==i)return!1;const S=r.toLowerCase();return k.title.toLowerCase().includes(S)||((_=k.description)==null?void 0:_.toLowerCase().includes(S))}).sort((k,S)=>{const _=Mn(k.address,k.description),E=Mn(S.address,S.description);return _.localeCompare(E)||k.title.localeCompare(S.title)}),[m,g]=b.useState(20),v=b.useRef(null);b.useEffect(()=>{g(20)},[r,i]),b.useEffect(()=>{const k=new IntersectionObserver(S=>{S[0].isIntersecting&&m<w.length&&g(E=>Math.min(E+20,w.length))},{root:null,rootMargin:"100px",threshold:1});return v.current&&k.observe(v.current),()=>{v.current&&k.unobserve(v.current)}},[w.length,m]);const j=w.slice(0,m);return c.jsxs(Xn,{children:[c.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-24",children:[c.jsxs("div",{className:"h-[280px] w-full fixed top-0 left-0 right-0 z-0 overflow-hidden bg-zinc-900",children:[c.jsx(Ke,{mode:"popLayout",children:c.jsx(Z.img,{src:a,initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1.5},style:{y:f,opacity:p},className:"absolute inset-0 w-full h-full object-cover",alt:"Header Background"},a)}),c.jsx("div",{className:"absolute inset-0 bg-[#0B1221]/40 z-10 pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent z-10 pointer-events-none h-full translate-y-1"}),c.jsxs("div",{className:"absolute bottom-16 left-6 z-20",children:[c.jsx("h1",{className:"text-4xl font-['Playfair_Display'] font-black text-white mb-2 shadow-sm drop-shadow-md",children:"Destination Library"}),c.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-sm max-w-xs",children:"Your personal collection of saved places."})]})]}),c.jsx("div",{className:"relative z-10 mt-[260px]",children:c.jsxs("div",{className:"bg-zinc-50 rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] min-h-screen pt-2",children:[c.jsx("div",{className:"sticky top-0 z-40 bg-zinc-50/95 backdrop-blur-md pt-6 pb-4 px-6 rounded-t-[2.5rem] border-b border-zinc-100",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(Ca,{to:"/places/explore",className:"block bg-gradient-to-r from-[#007AFF] to-blue-600 p-4 rounded-3xl text-white shadow-lg shadow-blue-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2 mb-1",children:c.jsx("h3",{className:"font-bold text-lg",children:"Explore Recommendations"})}),c.jsx("p",{className:"text-blue-100 text-xs font-medium",children:"Find new gems to add to your library"})]}),c.jsx("div",{className:"bg-white/20 w-10 h-10 flex items-center justify-center rounded-full backdrop-blur-sm",children:c.jsx(Nr,{size:20})})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative shadow-lg shadow-zinc-200/50 rounded-2xl flex-grow",children:[c.jsx(Es,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",size:20}),c.jsx("input",{type:"text",value:r,onChange:k=>s(k.target.value),placeholder:"Search your library...",className:"w-full bg-white border border-zinc-100 rounded-2xl py-3.5 pl-12 pr-4 text-zinc-900 focus:outline-none focus:border-blue-200 focus:ring-2 focus:ring-blue-100 placeholder:text-zinc-400 font-medium transition-all"})]}),c.jsx("button",{onClick:()=>d(!0),className:"bg-white border border-zinc-200 px-4 rounded-2xl flex items-center justify-center gap-2 text-zinc-700 shadow-sm hover:bg-zinc-50 active:scale-95 transition-all font-bold text-sm min-w-fit",children:c.jsx(Wt,{size:20})})]}),c.jsx("div",{children:c.jsx(mw,{selected:i,onSelect:o})})]})}),c.jsx("div",{className:"px-6 pb-24",children:w.length>0?c.jsxs("div",{className:"flex flex-col gap-8 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[(()=>{const k=[];return j.forEach(S=>{const _=Mn(S.address,S.description),E=k[k.length-1];E&&E.area===_?E.places.push(S):k.push({area:_,places:[S]})}),k.map(S=>c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"sticky top-[220px] z-30 pt-2 pb-4 bg-gradient-to-b from-zinc-50 via-zinc-50 to-transparent",children:c.jsxs("h2",{className:"text-sm font-black text-zinc-400 uppercase tracking-widest pl-3 border-l-4 border-zinc-200/50 flex items-center gap-2",children:[c.jsx(Ie,{size:12,className:"text-zinc-300"}),S.area]})}),c.jsx("div",{className:"flex flex-col gap-5",children:S.places.map(_=>c.jsx(Ca,{to:`/place/${_.id}`,className:"block group",children:c.jsxs("div",{className:"bg-white rounded-[1.75rem] overflow-hidden shadow-xl shadow-blue-900/5 hover:shadow-2xl hover:shadow-blue-900/10 transition-all border border-zinc-100 hover:scale-[1.01] active:scale-[0.99]",children:[c.jsxs("div",{className:"h-40 bg-zinc-100 relative overflow-hidden",children:[_.image?c.jsx("img",{src:_.image,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:_.title}):c.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-100 text-zinc-300",children:c.jsx(Ie,{size:40})}),c.jsx("div",{className:"absolute top-0 inset-x-0 h-16 bg-gradient-to-b from-black/50 to-transparent"}),c.jsx("div",{className:"absolute top-3 left-3 bg-black/30 backdrop-blur-md px-2.5 py-1 rounded-full text-[10px] font-bold text-white uppercase tracking-wider border border-white/10 shadow-sm z-20",children:_.type}),c.jsx("button",{onClick:E=>{E.preventDefault(),E.stopPropagation(),window.confirm("Are you sure you want to delete this place?")&&n(_.id)},className:"absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full bg-black/30 backdrop-blur-md text-white border border-white/20 shadow-sm z-20 hover:bg-red-500/80 transition-all active:scale-95",title:"Delete from library",children:c.jsx(Av,{size:14})})]}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h3",{className:"text-lg font-bold text-zinc-900 leading-tight group-hover:text-[#007AFF] transition-colors line-clamp-1",children:_.title}),c.jsxs("div",{className:"flex items-center gap-1 bg-yellow-400/10 px-1.5 py-0.5 rounded text-yellow-600 font-bold text-xs",children:[c.jsx(Ts,{size:10,fill:"currentColor"}),c.jsx("span",{children:_.rating||"New"})]})]}),c.jsx("p",{className:"text-xs text-zinc-500 line-clamp-2 mb-4 font-medium leading-relaxed",children:_.description}),c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-zinc-50",children:[c.jsx("span",{className:"text-[10px] font-bold text-zinc-400 bg-zinc-50 px-2 py-1 rounded-md",children:_.reviews?`${_.reviews} reviews`:"No reviews"}),c.jsxs("span",{className:"text-xs text-[#007AFF] font-bold flex items-center gap-1 group-hover:gap-2 transition-all",children:["View Details ",c.jsx(Nr,{size:14})]})]})]})]})},_.id))})]},S.area))})(),m<w.length&&c.jsx("div",{ref:v,className:"h-10 w-full flex items-center justify-center opacity-50",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-zinc-400 animate-bounce [animation-delay:-0.3s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-zinc-400 animate-bounce [animation-delay:-0.15s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-zinc-400 animate-bounce"})]})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-4 opacity-60",children:[c.jsx("div",{className:"w-20 h-20 bg-zinc-100 rounded-full flex items-center justify-center mb-2",children:c.jsx(Ie,{className:"text-zinc-300",size:32})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-zinc-400",children:r?"No matches found":"No places yet"}),c.jsx("p",{className:"text-zinc-400 text-sm max-w-[200px] mx-auto mt-1",children:r?"Try adjusting your search terms.":"Add activities to see them here."})]})]})})]})})]}),c.jsx(gw,{isOpen:u,onClose:()=>d(!1),onSave:y,hideDuration:!0})]})}function AA(){const e=th(),{setEvents:t,events:n}=sn(),[r,s]=b.useState(""),[i,o]=b.useState(!1),[a,l]=b.useState([]),[u,d]=b.useState(""),[h,f]=b.useState("https://images.unsplash.com/photo-1555400038-63f5ba517a47?auto=format&fit=crop&w=1000&q=80");b.useEffect(()=>{a.length>0&&a[0].photos&&a[0].photos.length>0&&f(a[0].photos[0])},[a]);const p=async x=>{if(x&&x.preventDefault(),!!r.trim()){o(!0),d(""),l([]);try{const w=await fetch("/api/explore-places",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r})}),m=await w.json();if(!w.ok)throw new Error(m.message||"Failed to fetch places");m.places?l(m.places):l([])}catch(w){console.error(w),d("Failed to search places. Please try again.")}finally{o(!1)}}},y=(x,w)=>{var j,k;if(x.preventDefault(),x.stopPropagation(),n.some(S=>S.placeId===w.placeId)){alert("This place is already in your list!");return}let g="Play";w.types&&(w.types.includes("restaurant")||w.types.includes("food")||w.types.includes("cafe")?g="Eat":w.types.includes("lodging")||w.types.includes("hotel")?g="Stay":(w.types.includes("transit_station")||w.types.includes("airport"))&&(g="Transport"));const v={id:Wi(),type:g,title:w.name||"Unknown Place",description:w.editorialSummary||w.address,rating:w.rating,reviews:w.userRatingCount,image:w.photos&&w.photos.length>0?w.photos[0]:void 0,placeId:w.placeId,googleMapsLink:w.googleMapsUrl,status:"Saved",dayOffset:-1,time:"",lat:(j=w.location)==null?void 0:j.latitude,lng:(k=w.location)==null?void 0:k.longitude,address:w.address,openingHours:w.openingHours};t(S=>[...S,v]),alert(`Added ${w.name} to your library!`)};return c.jsx(Xn,{children:c.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-24",children:[c.jsxs("div",{className:"h-[280px] bg-zinc-900 relative overflow-hidden shadow-xl rounded-b-[2.5rem]",children:[c.jsx("div",{className:"absolute inset-0 opacity-40",children:c.jsx("img",{src:h,alt:"Header Background",className:"w-full h-full object-cover"})}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/50 to-transparent"}),c.jsxs("div",{className:"absolute bottom-16 left-6 z-10",children:[c.jsx("div",{className:"flex items-center gap-2 mb-3",children:c.jsx("button",{onClick:()=>e("/places"),className:"p-1.5 -ml-2 hover:bg-white/10 rounded-full transition-colors text-white/80 hover:text-white",children:c.jsx(kv,{size:20})})}),c.jsx("h1",{className:"text-3xl font-extrabold text-white mb-2",children:"Explore"}),c.jsx("p",{className:"text-white/80 text-sm font-medium max-w-xs",children:"Find new gems to add to your itinerary."})]})]}),c.jsxs("div",{className:"px-6 -mt-6 relative z-20",children:[c.jsxs("form",{onSubmit:p,className:"relative shadow-xl shadow-zinc-200/50 rounded-2xl mb-8",children:[c.jsx(Es,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",size:20}),c.jsx("input",{type:"text",value:r,onChange:x=>s(x.target.value),placeholder:"Search e.g. 'Best Ramen in Tokyo'",className:"w-full bg-white border border-zinc-100 rounded-2xl py-4 pl-12 pr-4 text-sm text-zinc-900 focus:outline-none focus:border-blue-200 focus:ring-4 focus:ring-blue-50/50 placeholder:text-zinc-400 font-medium transition-all"}),c.jsx("button",{type:"submit",disabled:i,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[#007AFF] text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-[#0061c2] disabled:opacity-50 transition-colors shadow-lg shadow-blue-500/20",children:i?c.jsx(Nv,{className:"animate-spin",size:16}):"Search"})]}),c.jsxs("div",{className:"pb-12",children:[u&&c.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm font-medium mb-4",children:u}),c.jsxs("div",{className:"grid gap-5",children:[c.jsx(Ke,{children:a.map(x=>{var w,m;return c.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"group relative",children:c.jsxs("div",{className:"bg-white rounded-[1.75rem] overflow-hidden shadow-sm border border-zinc-100 hover:shadow-xl hover:shadow-zinc-200/50 transition-all",children:[c.jsxs("div",{className:"h-40 bg-zinc-100 relative overflow-hidden",children:[x.photos&&x.photos.length>0?c.jsx("img",{src:x.photos[0],alt:x.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-300",children:c.jsx(Ie,{size:40})}),c.jsx("div",{className:"absolute top-0 inset-x-0 h-20 bg-gradient-to-b from-black/50 to-transparent pointer-events-none"}),c.jsx("div",{className:"absolute top-3 left-3 flex gap-2",children:x.isOpen!==void 0&&c.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold backdrop-blur-md border border-white/20 shadow-sm ${x.isOpen?"bg-green-500/80 text-white":"bg-red-500/80 text-white"}`,children:x.isOpen?"Open Now":"Closed"})}),c.jsx("button",{onClick:g=>y(g,x),className:"absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full bg-[#007AFF] text-white shadow-lg shadow-blue-500/40 hover:scale-110 active:scale-95 transition-all z-20 border border-white/20",children:c.jsx(Wt,{size:16,strokeWidth:3})})]}),c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h3",{className:"text-lg font-bold text-zinc-900 leading-tight group-hover:text-[#007AFF] transition-colors pr-8 line-clamp-1",children:x.name}),c.jsxs("div",{className:"flex items-center gap-1 bg-yellow-400/10 text-yellow-600 px-1.5 py-0.5 rounded text-xs font-bold whitespace-nowrap",children:[c.jsx(Ts,{size:10,fill:"currentColor"}),c.jsx("span",{children:x.rating||"N/A"}),c.jsxs("span",{className:"text-yellow-600/60 font-medium hidden sm:inline",children:["(",((w=x.userRatingCount)==null?void 0:w.toLocaleString())||0,")"]})]})]}),c.jsx("p",{className:"text-xs text-zinc-500 line-clamp-2 mb-4 font-medium leading-relaxed",children:x.editorialSummary||x.address}),c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-zinc-50",children:[c.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-bold text-zinc-400 bg-zinc-50 px-2 py-1 rounded-md",children:[x.priceLevel&&c.jsxs("span",{className:"text-zinc-600 flex items-center",children:[c.jsx(j2,{size:10,className:"text-zinc-400"}),x.priceLevel]}),x.priceLevel&&c.jsx("span",{children:""}),((m=x.types)==null?void 0:m[0])&&c.jsx("span",{className:"capitalize text-zinc-500",children:x.types[0].replace(/_/g," ")})]}),c.jsxs("a",{href:x.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#007AFF] font-bold flex items-center gap-1 group-hover:gap-2 transition-all",children:["Maps ",c.jsx(Nr,{size:14})]})]})]})]})},x.placeId)})}),!i&&a.length===0&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center space-y-4 opacity-60",children:[c.jsx("div",{className:"w-20 h-20 bg-zinc-100 rounded-full flex items-center justify-center mb-2",children:c.jsx(Es,{className:"text-zinc-300",size:32})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-zinc-400",children:"Ready to explore?"}),c.jsx("p",{className:"text-zinc-400 text-sm max-w-[200px] mx-auto mt-1",children:"Enter a search term to find recommended places."})]})]})]})]})]})]})})}const _c={Transport:{iconBg:"bg-blue-50",iconColor:"text-blue-600",tagBg:"bg-blue-50",tagText:"text-blue-600"},Accommodation:{iconBg:"bg-emerald-50",iconColor:"text-emerald-600",tagBg:"bg-emerald-50",tagText:"text-emerald-600"},Identity:{iconBg:"bg-purple-50",iconColor:"text-purple-600",tagBg:"bg-purple-50",tagText:"text-purple-600"},Finance:{iconBg:"bg-amber-50",iconColor:"text-amber-600",tagBg:"bg-amber-50",tagText:"text-amber-600"},Other:{iconBg:"bg-zinc-100",iconColor:"text-zinc-500",tagBg:"bg-zinc-100",tagText:"text-zinc-500"}};function RA(){const{currentTripId:e}=sn(),[t,n]=b.useState("date"),[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,l]=b.useState(null),[u,d]=b.useState([]),[h,f]=b.useState(""),[p,y]=b.useState(null),[x,w]=b.useState("Other"),m=b.useRef(null),{scrollY:g}=yl(),v=bn(g,[0,500],["0%","-15%"]),j=bn(g,[0,300],[1,.3]);b.useEffect(()=>{e&&(console.log("Fetching documents for trip:",e),fetch(`/api/documents?tripId=${e}`).then(T=>T.json()).then(T=>{if(Array.isArray(T)){const C=T.map(I=>({id:I.id,title:I.title,date:new Date(I.created_at).toLocaleDateString(),size:I.size||"?",category:I.category,fileUrl:I.file_url}));d(C)}else console.error("API returned non-array:",T)}).catch(T=>console.error("Failed to fetch docs:",T)))},[e]);const k=b.useMemo(()=>{let T=[...u];if(h){const C=h.toLowerCase();T=T.filter(I=>I.title.toLowerCase().includes(C))}return t==="category"?T.sort((C,I)=>C.category.localeCompare(I.category)):T.sort((C,I)=>new Date(I.date).getTime()-new Date(C.date).getTime()),T},[u,t,h]),S=T=>{var I;const C=(I=T.target.files)==null?void 0:I[0];C&&y(C)},_=async()=>{if(!(!p||!e)){o(!0);try{const T=`${e}/${Date.now()}-${p.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,{error:C}=await De.storage.from("trip_docs").upload(T,p);if(C)throw C;const{data:{publicUrl:I}}=De.storage.from("trip_docs").getPublicUrl(T),H=await fetch("/api/process-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tripId:e,fileUrl:I,fileName:p.name,fileType:p.type,category:x})});if(!H.ok)throw new Error("Processing failed");const se=(await H.json()).document;d(fe=>[{id:se.id,title:se.title,date:new Date().toLocaleDateString(),size:`${(p.size/1024/1024).toFixed(1)} MB`,category:se.category,fileUrl:se.file_url},...fe]),l(`Uploaded ${p.name}`),setTimeout(()=>l(null),3e3),y(null),w("Other"),s(!1)}catch(T){console.error("Upload error:",T),alert("Upload failed: "+(T instanceof Error?T.message:"Unknown error"))}finally{o(!1),m.current&&(m.current.value="")}}},E=async(T,C,I)=>{if(I&&I.stopPropagation(),!confirm("Delete this document?"))return;const H=[...u];d(Q=>Q.filter(se=>se.id!==T));try{if(!(await fetch("/api/delete-document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:T,fileUrl:C})})).ok)throw new Error("Delete API failed");l("Document deleted"),setTimeout(()=>l(null),2e3)}catch(Q){console.error("Delete failed",Q),d(H),alert("Failed to delete document")}},N=T=>{T&&window.open(T,"_blank")};return c.jsxs(Xn,{children:[c.jsxs("div",{className:"min-h-screen bg-zinc-50 pb-24",children:[c.jsxs("div",{className:"h-[280px] w-full fixed top-0 left-0 right-0 z-0 overflow-hidden bg-zinc-900",children:[c.jsxs(Z.div,{style:{y:v,opacity:j},className:"absolute inset-0",children:[c.jsx("img",{src:"https://images.unsplash.com/photo-1517479149777-5f3b1511d5ad?auto=format&fit=crop&w=2000&q=80",className:"w-full h-full object-cover opacity-60",alt:"Documents Background"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900 via-transparent to-transparent"})]}),c.jsxs("div",{className:"absolute bottom-16 left-6 z-20",children:[c.jsx("h1",{className:"text-4xl font-['Playfair_Display'] font-black text-white mb-2 shadow-sm drop-shadow-md",children:"Travel Docs"}),c.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-sm max-w-xs",children:"Everything you need, organized and offline-ready."})]})]}),c.jsx("div",{className:"relative z-10 mt-[260px]",children:c.jsxs("div",{className:"bg-zinc-50 rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] min-h-screen pt-2",children:[c.jsxs("div",{className:"sticky top-0 z-40 bg-zinc-50/95 backdrop-blur-md pt-6 pb-4 px-6 rounded-t-[2.5rem] border-b border-zinc-100",children:[c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsxs("div",{className:"relative flex-grow shadow-sm",children:[c.jsx(Es,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",size:18}),c.jsx("input",{type:"text",placeholder:"Search documents...",value:h,onChange:T=>f(T.target.value),className:"w-full bg-white border border-zinc-200 rounded-xl py-3 pl-11 pr-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-300 transition-all text-zinc-800 placeholder:text-zinc-400"})]}),c.jsx("button",{onClick:()=>s(!0),className:"bg-black text-white px-4 rounded-xl flex items-center justify-center shadow-lg hover:bg-zinc-800 active:scale-95 transition-all",children:c.jsx(Wt,{size:20})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n("date"),className:`px-4 py-2 rounded-full text-xs font-bold transition-all border ${t==="date"?"bg-zinc-900 border-zinc-900 text-white shadow-md":"bg-white border-zinc-200 text-zinc-500 hover:bg-zinc-50"}`,children:"Recent"}),c.jsxs("button",{onClick:()=>n("category"),className:`px-4 py-2 rounded-full text-xs font-bold transition-all border flex items-center gap-1.5 ${t==="category"?"bg-zinc-900 border-zinc-900 text-white shadow-md":"bg-white border-zinc-200 text-zinc-500 hover:bg-zinc-50"}`,children:[c.jsx(L2,{size:12}),"Group by Category"]})]})]}),c.jsxs("div",{className:"px-6 pb-24 space-y-3 mt-4",children:[c.jsx(Ke,{children:k.map((T,C)=>{const I=t==="category"&&(C===0||k[C-1].category!==T.category),H=_c[T.category]||_c.Other;return c.jsxs("div",{children:[I&&c.jsx(Z.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-zinc-400 text-[10px] font-extrabold uppercase tracking-widest mt-6 mb-2 px-1",children:T.category}),c.jsxs(Z.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:()=>N(T.fileUrl),className:"bg-white border border-zinc-100 rounded-2xl p-4 flex items-center gap-4 hover:shadow-lg hover:shadow-zinc-200/50 hover:border-blue-100 transition-all cursor-pointer group active:scale-[0.99]",children:[c.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${H.iconBg} ${H.iconColor}`,children:c.jsx(Qo,{size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-bold text-zinc-900 truncate group-hover:text-[#007AFF] transition-colors text-sm mb-1",children:T.title}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full font-bold uppercase tracking-wide border border-transparent ${H.tagBg} ${H.tagText}`,children:T.category}),c.jsxs("span",{className:"text-[10px] text-zinc-400 font-medium",children:[T.date,"  ",T.size]})]})]}),c.jsx("button",{onClick:Q=>E(T.id,T.fileUrl,Q),className:"w-8 h-8 flex items-center justify-center rounded-full bg-zinc-50 text-zinc-400 hover:bg-red-50 hover:text-red-500 transition-colors z-10",title:"Delete document",children:c.jsx(Av,{size:14})})]})]},T.id)})}),!u.length&&!i&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center opacity-60",children:[c.jsx("div",{className:"w-16 h-16 bg-zinc-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(Qo,{className:"text-zinc-300",size:24})}),c.jsx("p",{className:"text-zinc-500 font-medium text-sm",children:"No documents yet"}),c.jsx("p",{className:"text-zinc-400 text-xs mt-1",children:"Upload files to keep them safe"})]})]})]})})]}),c.jsx(Ke,{children:r&&c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[c.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>!i&&(s(!1),y(null))}),c.jsxs(Z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-3xl p-6 w-full max-w-sm shadow-2xl relative z-10 overflow-hidden",children:[c.jsx("button",{onClick:()=>{s(!1),y(null)},disabled:i,className:"absolute top-4 right-4 text-zinc-400 hover:text-zinc-900 transition-colors disabled:opacity-50",children:c.jsx(Yn,{size:20})}),c.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[c.jsx("div",{className:`w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center text-[#007AFF] mb-6 shadow-sm ${i?"animate-pulse":""}`,children:i?c.jsx(Xp,{size:32,className:"animate-bounce"}):c.jsx(Xp,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-zinc-900 mb-2",children:i?"Analyzing...":"Upload Document"}),c.jsx("p",{className:"text-zinc-500 text-sm mb-6 leading-relaxed px-4",children:i?"Saving your document...":p?"Choose a category for your document.":"Select a PDF or image."}),c.jsx("div",{className:"w-full",children:p?c.jsxs("div",{className:"flex flex-col gap-4 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[c.jsxs("div",{className:"bg-zinc-50 p-4 rounded-xl border border-zinc-100 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:c.jsx(Qo,{size:20})}),c.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[c.jsx("p",{className:"font-bold text-sm text-zinc-900 truncate",children:p.name}),c.jsxs("p",{className:"text-xs text-zinc-500",children:[(p.size/1024/1024).toFixed(1)," MB"]})]}),c.jsx("button",{onClick:()=>y(null),className:"p-2 text-zinc-400 hover:text-red-500",children:c.jsx(Yn,{size:16})})]}),c.jsxs("div",{className:"text-left",children:[c.jsx("label",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wider mb-2 block ml-1",children:"Select Category"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(_c).map(T=>c.jsx("button",{onClick:()=>w(T),className:`px-3 py-2 rounded-lg text-xs font-bold transition-all border ${x===T?"bg-zinc-900 text-white border-zinc-900 shadow-md transform scale-105":"bg-white text-zinc-500 border-zinc-200 hover:bg-zinc-50"}`,children:T},T))})]}),c.jsx("button",{onClick:_,disabled:i,className:"w-full py-4 mt-2 rounded-xl bg-black text-white font-bold hover:bg-zinc-800 transition-all shadow-lg active:scale-[0.98] disabled:opacity-70",children:i?"Uploading...":"Confirm Upload"})]}):c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>{var T;return(T=m.current)==null?void 0:T.click()},disabled:i,className:"w-full py-4 rounded-xl bg-[#007AFF] text-white font-bold hover:bg-[#0066CC] transition-all shadow-lg shadow-blue-500/30 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed mb-4",children:"Select File"})})}),c.jsx("input",{ref:m,type:"file",className:"hidden",onChange:S,disabled:i})]})]})]})}),c.jsx(Ke,{children:a&&c.jsxs(Z.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-zinc-900 text-white px-5 py-3 rounded-full shadow-2xl shadow-zinc-900/40 flex items-center gap-3 z-50 whitespace-nowrap",children:[c.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-white",children:c.jsx(ll,{size:12,strokeWidth:3})}),c.jsx("span",{className:"text-sm font-bold",children:a})]})})]})}function OA(){const{pathname:e}=zs();return b.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),b.useEffect(()=>{const t=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"instant"});const n=document.querySelector("main");n&&(n.scrollTop=0),document.documentElement.scrollTop=0,document.body.scrollTop=0},0);return()=>clearTimeout(t)},[e]),null}function zA(){var T;const{tripName:e,startDate:t,tripDuration:n,events:r,tripDates:s}=sn(),{scrollY:i}=yl(),o=bn(i,[0,500],["0%","-15%"]),a=bn(i,[0,300],[1,.3]),l=r.map(C=>C.image).filter(C=>!!C),[u,d]=b.useState(0);b.useEffect(()=>{if(l.length<=1)return;const C=setInterval(()=>{d(I=>(I+1)%l.length)},8e3);return()=>clearInterval(C)},[l.length]);const h=r.length,f=new Set(r.filter(C=>C.type!=="Transport").map(C=>C.title)).size,p=C=>{if(!C)return 0;const I=C.toLowerCase().match(/([\d,.]+)\s*(km|m)/);if(!I)return 0;const H=I[1].replace(/,/g,""),Q=parseFloat(H);return isNaN(Q)?0:I[2]==="m"?Q/1e3:Q},y=r.reduce((C,I)=>C+p(I.travelDistance),0).toFixed(1),x=r.filter(C=>C.type==="Transport").length,w=r.filter(C=>C.type==="Stay").length,m=r.filter(C=>C.type==="Play"||C.type==="Eat").length,g=r.reduce((C,I)=>{const H=I.dayOffset||0;return C[H]=(C[H]||0)+1,C},{}),v=Math.max(...Object.values(g),0),j=Object.keys(g).find(C=>g[Number(C)]===v),k=j!==void 0?((T=s[Number(j)])==null?void 0:T.fullDate)||`Day ${Number(j)+1}`:"N/A",S=new Date,_=r.filter(C=>new Date(C.time)>S).sort((C,I)=>new Date(C.time).getTime()-new Date(I.time).getTime()).slice(0,3),E=_[0],N=(C,I)=>{const H=new Date(C);return H.setDate(H.getDate()+I),`${C.toLocaleDateString(void 0,{month:"short",day:"numeric"})} - ${H.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}`};return c.jsx(Xn,{children:c.jsxs("div",{className:"min-h-screen bg-transparent pb-24",children:[c.jsxs("div",{className:"h-[320px] w-full fixed top-0 left-0 right-0 z-0 overflow-hidden bg-zinc-900",children:[c.jsxs(Z.div,{style:{y:o,opacity:a},className:"absolute inset-0",children:[c.jsx(Ke,{mode:"popLayout",children:l.length>0?c.jsx(Z.img,{src:l[u],initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},className:"w-full h-full object-cover opacity-60",alt:"Trip Highlight"},l[u]):c.jsx(Z.img,{src:"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=1920&q=80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},className:"w-full h-full object-cover opacity-60",alt:"Bali Jungle"},"default-bali")}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/40 to-transparent"})]}),c.jsx("div",{className:"absolute bottom-24 left-6 right-6 z-20 flex justify-between items-center",children:c.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-[80%]",children:[c.jsx("span",{className:"px-3 py-1 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white/90 text-[10px] font-bold uppercase tracking-widest mb-3 inline-block",children:"Trip Overview"}),c.jsx("h1",{className:"text-4xl font-['Playfair_Display'] font-black text-white mb-2 shadow-sm drop-shadow-md leading-tight",children:e}),c.jsxs("p",{className:"text-white/80 text-sm font-medium drop-shadow-sm flex items-center gap-2",children:[c.jsx(js,{size:14}),N(t,n)]})]})})]}),c.jsx("div",{className:"relative z-10 mt-[280px]",children:c.jsxs("div",{className:"bg-zinc-50 rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] min-h-screen p-6 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-5 rounded-2xl border border-zinc-100 shadow-sm",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center text-blue-600 mb-3",children:c.jsx(Ie,{size:20,strokeWidth:2.5})}),c.jsx("div",{className:"text-2xl font-black text-zinc-900",children:f}),c.jsx("div",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wide",children:"Places to Visit"})]}),c.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-5 rounded-2xl border border-zinc-100 shadow-sm",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-xl flex items-center justify-center text-purple-600 mb-3",children:c.jsx(Nt,{size:20,strokeWidth:2.5})}),c.jsx("div",{className:"text-2xl font-black text-zinc-900",children:n}),c.jsx("div",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wide",children:"Days Long"})]}),c.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-5 rounded-2xl border border-zinc-100 shadow-sm",children:[c.jsx("div",{className:"w-10 h-10 bg-emerald-50 rounded-xl flex items-center justify-center text-emerald-600 mb-3",children:c.jsx(F2,{size:20,strokeWidth:2.5})}),c.jsxs("div",{className:"text-2xl font-black text-zinc-900",children:[y,c.jsx("span",{className:"text-sm text-zinc-400 font-bold ml-1",children:"km"})]}),c.jsx("div",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wide",children:"Total Travel"})]}),c.jsxs(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white p-5 rounded-2xl border border-zinc-100 shadow-sm",children:[c.jsx("div",{className:"w-10 h-10 bg-amber-50 rounded-xl flex items-center justify-center text-amber-600 mb-3",children:c.jsx(Yp,{size:20,strokeWidth:2.5})}),c.jsx("div",{className:"text-2xl font-black text-zinc-900",children:w}),c.jsx("div",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wide",children:"Stays"})]})]}),c.jsxs(Z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"bg-zinc-900 p-6 rounded-3xl text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-32 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),c.jsx("h3",{className:"text-lg font-bold font-['Playfair_Display'] mb-6 relative z-10",children:"Trip Makeup"}),c.jsxs("div",{className:"space-y-5 relative z-10",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2 text-zinc-300",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(ah,{size:12})," Activities & Food"]}),c.jsx("span",{children:m})]}),c.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:c.jsx(Z.div,{initial:{width:0},animate:{width:`${m/(h||1)*100}%`},transition:{duration:1,delay:.6},className:"h-full bg-emerald-500 rounded-full"})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2 text-zinc-300",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(x2,{size:12})," Transport"]}),c.jsx("span",{children:x})]}),c.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:c.jsx(Z.div,{initial:{width:0},animate:{width:`${x/(h||1)*100}%`},transition:{duration:1,delay:.7},className:"h-full bg-blue-500 rounded-full"})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs font-medium mb-2 text-zinc-300",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Yp,{size:12})," Stays"]}),c.jsx("span",{children:w})]}),c.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:c.jsx(Z.div,{initial:{width:0},animate:{width:`${w/(h||1)*100}%`},transition:{duration:1,delay:.8},className:"h-full bg-purple-500 rounded-full"})})]})]}),c.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10 flex justify-between items-center relative z-10",children:[c.jsx("span",{className:"text-xs text-zinc-400 font-medium",children:"Busiest Day"}),c.jsx("span",{className:"text-sm font-bold text-white bg-white/10 px-3 py-1 rounded-full",children:k})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-zinc-900 text-lg font-bold font-['Playfair_Display']",children:"Up Next"}),E?c.jsx(Z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white p-5 rounded-2xl border border-zinc-100 shadow-sm flex items-center gap-4 border-l-4 border-l-blue-500",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-widest mb-1",children:E.type}),c.jsx("h4",{className:"font-bold text-zinc-900 truncate text-lg",children:E.title}),c.jsxs("p",{className:"text-xs text-zinc-500 flex items-center gap-1 mt-1",children:[c.jsx(Nt,{size:12})," ",new Date(E.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),E.address&&`  ${E.address}`]})]})}):c.jsx("div",{className:"text-center py-8 bg-white rounded-2xl border border-zinc-100 border-dashed",children:c.jsx("p",{className:"text-zinc-400 text-sm font-medium",children:"No upcoming events!"})}),_.slice(1).map(C=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-zinc-100 flex items-center justify-between opacity-80",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx(N2,{size:14,className:"text-zinc-400"}),c.jsx("span",{className:"font-medium text-zinc-700 text-sm truncate",children:C.title})]}),c.jsx("span",{className:"text-xs text-zinc-400 whitespace-nowrap",children:new Date(C.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},C.id))]})]})})]})})}function IA(){const{isLoading:e}=sn();return e?c.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-[#007AFF] border-t-transparent rounded-full animate-spin"}),c.jsx("p",{className:"text-zinc-400 text-sm font-medium",children:"Loading your trips..."})]})}):c.jsx("div",{className:"min-h-screen bg-background text-text selection:bg-primary selection:text-background font-sans",children:c.jsxs(qS,{children:[c.jsx(an,{path:"/summary",element:c.jsx(zA,{})}),c.jsx(an,{path:"/",element:c.jsx(E0,{})}),c.jsx(an,{path:"/place/:id",element:c.jsx(jA,{})}),c.jsx(an,{path:"/map",element:c.jsx(TA,{})}),c.jsx(an,{path:"/places",element:c.jsx(PA,{})}),c.jsx(an,{path:"/places/explore",element:c.jsx(AA,{})}),c.jsx(an,{path:"/documents",element:c.jsx(RA,{})}),c.jsx(an,{path:"*",element:c.jsx(E0,{})})]})})}function DA(){return c.jsx(m2,{children:c.jsxs(ek,{children:[c.jsx(OA,{}),c.jsx(IA,{})]})})}const LA="modulepreload",MA=function(e){return"/"+e},C0={},$A=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=MA(l),l in C0)return;C0[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":LA,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function FA(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await $A(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r==null||r()}),a.register({immediate:t}).then(h=>{i?i("/sw.js",h):s==null||s(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}FA({immediate:!0});jc.createRoot(document.getElementById("root")).render(c.jsx(Yi.StrictMode,{children:c.jsx(DA,{})}));
